# Onno V6 사용자 경험 설계 (UX Design)

**버전**: 4.1 (Part 6.4 접근성 - WCAG 2.1 AA, 키보드 네비게이션, 스크린 리더 5-Layer Framework)
**작성일**: 2025-12-29 (최종 업데이트: 2025-12-30)
**문서 목적**: Onno의 Always-on-Top HUD 기반 사용자 경험 설계 + 행동심리 기반 온보딩 설계
**주요 업데이트**:
- HUD 크기 최적화 (375px × 525px)
- 브라우저 확장 우선 전략
- Playbook 템플릿 기반 접근
- 온보딩 플로우 추가
- 오프라인/프라이버시 모드 추가
- 실시간 리서치 더미 데이터 구현
- **5-Layer Framework 기반 행동심리 설계 통합**
- **Part 1.4: Notion 통합 - 확정 모달 시점으로 변경 (MVP: Notion only)**
- **Part 1.5: 첫 미팅 준비 - 5-Layer Framework 기반 준비 플로우 고도화**
- **Part 2: 미팅 전 - Today 화면 및 미팅 카드 5-Layer Framework 고도화**
- **Part 3: 미팅 중 - HUD 인터랙션 및 AI 알림 5-Layer Framework 고도화**
- **Part 4: 미팅 후 - 확정 모달 및 통합 자동화 5-Layer Framework 고도화**
- **Part 5: 검색 - 시맨틱 검색 및 과거 탐색 5-Layer Framework 고도화**
- **Part 5.2: 설정 - 개인화, 통합 관리, 알림 설정 5-Layer Framework 고도화**
- **Part 6.1: 에러 처리 - 횡단 관심사 에러 분류, 복구 전략, UI 컴포넌트 5-Layer Framework 고도화**
- **Part 6.2: 로딩 상태 - 횡단 관심사 로딩 분류, Skeleton/Spinner/Progress, 낙관적 UI 5-Layer Framework 고도화**
- **Part 6.3: 빈 상태 - 횡단 관심사 빈 상태 분류, 컨텍스트별 콘텐츠, 행동 유도 CTA 5-Layer Framework 고도화**
- **Part 6.4: 접근성 - WCAG 2.1 AA 준수, 키보드 네비게이션, 스크린 리더 지원, 포커스 관리 5-Layer Framework 고도화**

---

## 📋 목차

1. [설계 철학](#1-설계-철학)
2. [배포 전략 및 기술 스택](#2-배포-전략-및-기술-스택)
3. [2-Screen 아키텍처](#3-2-screen-아키텍처)
4. [실시간 대화 화면 (Always-on-Top HUD)](#4-실시간-대화-화면-always-on-top-hud)
5. [메인 SaaS 콘솔 (Decision OS)](#5-메인-saas-콘솔-decision-os)
6. [온보딩 경험 (First-Time User Experience)](#6-온보딩-경험-first-time-user-experience)
7. [전체 사용자 플로우](#7-전체-사용자-플로우)
8. [인터랙션 패턴 정의](#8-인터랙션-패턴-정의)
9. [디자인 토큰 및 컴포넌트](#9-디자인-토큰-및-컴포넌트)
10. [MVP 개발 로드맵](#10-mvp-개발-로드맵)
11. [행동심리 설계 원칙](#11-행동심리-설계-원칙)

---

## 1. 설계 철학

### 1.1 핵심 원칙

Onno의 UX는 **"방해 최소, 도움 최대"** 원칙으로 설계됩니다:

```
Always Visible ≠ Always Distracting
항상 보임 ≠ 항상 방해됨
```

**핵심 설계 원칙** (Onno DNA):

1. **Always-present, not always-demanding**
   - 항상 화면 최상단에 떠있는 플로팅 HUD
   - "작동 중임"을 지속적으로 확인 가능 → 안정감 제공
   - 유료 서비스의 가치를 시각적으로 인지
   - **하지만**: 사용자 주의를 빼앗지 않음, 자동 개입은 최소화

2. **One action at a time**
   - 실시간 제안은 "한 번에 하나의 실행 가능한 행동"
   - 질문 1개 / 용어 1개 / 리서치 1개 / 클로징 1개
   - 많이 말하는 AI가 아니라, **지금 필요한 다음 한 수를 주는 동반자**
   - 모든 제안은 클릭 한 번으로 실행 가능

3. **Context-first personalization**
   - 회의 맥락(딜/프로젝트/참석자/이전 약속) 미리 로딩
   - 사용자/팀 플레이북(필수 질문, 금지 표현, 리스크 체크) 반영
   - 대화 흐름을 읽고 적절한 타이밍에 개입
   - 개인화: 민수의 Onno ≠ 지연의 Onno (사용 패턴, 선호, 역량 다름)

4. **Decision-grade outputs**
   - 최종 산출물은 회의록이 아니라 **Decision Object** (결정·근거·가정·리스크·갭·액션)
   - 회의 중 개입 + 회의 후 로그 + 승인 기반 반영 + 결과 학습으로 닫힘
   - 설명 가능한 결정이 남고, 후속이 자동으로 시작됨

5. **Trust first**
   - 모든 제안에 "왜?"와 "근거" 표시 (예: "성공률 64%" ← 과거 18건 데이터 기반)
   - 오류 인정 (예: "이 예측은 데이터 부족으로 정확도 낮음")
   - 투명한 데이터 사용 (예: "당신의 대화 127건 분석해서 이 패턴 발견")
   - 사용자 통제 (예: "이 제안 거부" → 학습 → 유사 제안 안 함)

6. **Privacy by default**
   - 기본적으로 로컬 우선 처리
   - 민감 정보 자동 마스킹
   - 프라이버시 모드 원클릭 전환
   - 오프라인에서도 기본 기능 작동

### 1.2 문제 해결 관점

기존 프로토타입의 한계:
- ❌ "필요할 때만 나타남" → 90% 시간 동안 화면에 아무것도 없음
- ❌ 효용 가시성 부족 → "지금 뭘 하고 있지?" 의문
- ❌ 수동적 감지기 느낌 → 연기 감지기처럼 조용함

새로운 Always-on-Top HUD 접근:
- ✅ 항상 떠있음 → 작동 상태 지속 확인 가능
- ✅ 실시간 어시스턴트 정체성 → ChatGPT처럼 "항상 함께하는 동반자"
- ✅ 가시적 가치 제공 → 유료 서비스로서의 존재감 확보
- ✅ 적절한 크기 (375px × 525px) → 화면 15-20% 차지, 방해 최소화

### 1.3 사용자가 느껴야 할 "3가지 마법의 순간"

Onno가 반드시 만들어야 할 핵심 경험:

1. **회의 중: "놓칠 뻔한 질문"을 잡아준다**
   ```
   [35분 시점]
   💡 중요 질문 제안

   "승인 프로세스와 예상 소요기간이 어떻게 되나요?"

   근거: 예산 언급 후 승인 구조 미확인 (딜 브레이커 가능)
   과거 유사 상황 18건 중 이 질문으로 11건 성사 (61%)

   [쓰겠다] [나중에] [무시]
   ```

2. **회의 말미: 끝나기 2분 전에 합의/액션을 정확히 닫아준다**
   ```
   [58분 시점 - 자동 클로징 모드]
   ⏰ 회의 종료 전 체크

   ✅ 결정: DD 진행 합의 (1/6 시작)
   ⚠️ 조건: CTO 보안 검토 통과 시
   ❌ 액션: 담당자/기한 미정

   [지금 정리하기] [나중에]
   ```

3. **다음 회의: 지난번 약속/리스크를 자동으로 꺼내준다**
   ```
   [회의 시작 10분 전 - 자동 브리핑]
   📋 오늘 회의 준비 완료

   지난번 미확인 항목 (2):
   • CAC 채널별 상세
   • LTV 계산 기준

   이전 약속 (1):
   • "다음 미팅에서 재무 자료 공유" (김대표)

   [15분 브리핑 보기] [바로 시작]
   ```

---

## 2. 배포 전략 및 기술 스택

### 2.1 배포 전략: 브라우저 확장 우선

**Phase 순서:**

```
Phase 1 (MVP, 0-3개월):
└─ 브라우저 확장 (Chrome/Edge)
   ├─ 빠른 설치 (클릭 한 번)
   ├─ 낮은 마찰 (IT 부서 승인 불필요)
   ├─ 즉시 업데이트
   └─ 타겟: 개인 사용자, 소규모 팀

Phase 2 (6-12개월):
└─ 웹앱 (PWA)
   ├─ 브라우저 제약 없음
   ├─ 모바일 지원
   └─ 타겟: 확장된 사용자층

Phase 3 (12개월+):
└─ Electron 앱 (엔터프라이즈)
   ├─ 완전한 OS 통합
   ├─ 온프레미스 배포
   └─ 타겟: 대기업, 규제 산업
```

**Phase 1 우선 이유:**
```
브라우저 확장 장점:
✅ 설치 마찰 최소화 (Chrome 웹스토어 클릭)
✅ 가벼움 (<5MB vs Electron 100MB+)
✅ 신뢰성 (구글 검증 통과)
✅ 빠른 업데이트 (자동)
✅ Zoom/Meet/Teams 모두 지원 (웹 버전)

Electron 단점 (초기):
❌ 설치 마찰 (기업 IT 부서 승인)
❌ 용량 큰 (크롬 엔진 포함)
❌ 보안 감사 오래 걸림
❌ 개발 시간 더 필요
```

### 2.2 기술 스택 (Phase 1: 브라우저 확장)

#### 프론트엔드
```javascript
// 기술 스택
- Framework: React 18
- Build: Vite + Manifest V3
- State: Redux Toolkit
- UI: Tailwind CSS + Radix UI
- Animation: Framer Motion
- Icons: Lucide React
```

#### 백엔드
```javascript
// 기술 스택
- Runtime: Node.js 20
- Framework: Next.js 14 (App Router)
- Database: Supabase (PostgreSQL)
- Cache: Redis
- Storage: Supabase Storage
- Auth: Supabase Auth
```

#### AI/ML
```javascript
// 기술 스택
- STT: OpenAI Whisper API or Deepgram
- LLM: GPT-4 Turbo or Claude 3.5 Sonnet
- Embedding: OpenAI text-embedding-3-small
- Vector DB: Pinecone or Supabase pgvector
```

#### 배포
```javascript
// 인프라
- Extension: Chrome Web Store
- Web: Vercel
- Database: Supabase Cloud
- CDN: Cloudflare
- Monitoring: Sentry + PostHog
```

### 2.3 브라우저 확장 아키텍처

```
┌─────────────────────────────────────────────────────────┐
│                  브라우저 확장 구조                       │
└─────────────────────────────────────────────────────────┘

Background Script (Service Worker)
├─ STT 연결 관리
├─ API 통신
├─ 상태 동기화
└─ 알림 관리

Content Script (각 탭에 주입)
├─ 페이지 분석 (Zoom/Meet/Teams 감지)
├─ 오디오 캡처
└─ HUD 렌더링 트리거

Sidebar (Chrome Side Panel API)
├─ Always-on-Top HUD
├─ 최소화/확장 상태
└─ 실시간 UI 업데이트

Popup (확장 아이콘 클릭 시)
├─ 빠른 설정
├─ 오늘 미팅 목록
└─ 콘솔 바로가기
```

---

## 3. 2-Screen 아키텍처

Onno는 **2개의 화면 체계**로 구성됩니다:

```
┌─────────────────────────────────────────────────┐
│                                                 │
│  (1) 실시간 대화 화면 (회의 중)                  │
│      Always-on-Top Floating HUD                │
│      → 회의 중 실시간 지원                      │
│      → 크기: 375px × 525px (최적화)            │
│                                                 │
└─────────────────────────────────────────────────┘
                      ↕
┌─────────────────────────────────────────────────┐
│                                                 │
│  (2) 메인 SaaS 콘솔 (회의 전후)                  │
│      Decision OS Console                       │
│      → 준비, 확정, 반영, 분석, 운영             │
│                                                 │
└─────────────────────────────────────────────────┘
```

### 3.1 역할 분리

| 화면 | 타이밍 | 주요 역할 | 정체성 | 크기 |
|------|--------|-----------|--------|------|
| **실시간 대화 HUD** | 회의 중 | 실시간 어시스턴트 | "파일럿 HUD" | 375×525px |
| **메인 SaaS 콘솔** | 회의 전후 | 운영 시스템 | "Decision OS" | 풀스크린 |

### 3.2 HUD 크기 최적화

**크기 결정 근거:**
```
기존 제안: 400px × 600px (화면의 20-25% 차지)
피드백: 너무 크다, Zoom 화면 가림

새로운 크기: 375px × 525px
├─ 화면 비율: 1920×1080 기준 약 15-18%
├─ 세로 스크롤: 가능 (내용 많을 때)
├─ 최소화 시: 300px × 80px (유지)
└─ 풀스크린 모드: Ctrl+F로 전체 오버레이 (필요 시)
```

**반응형 조정:**
```css
/* 대형 화면 (>1920px) */
.hud-expanded { width: 400px; height: 550px; }

/* 표준 화면 (1366-1920px) */
.hud-expanded { width: 375px; height: 525px; } ← 기본

/* 소형 화면 (<1366px) */
.hud-expanded { width: 350px; height: 480px; }
```

---

## 4. 실시간 대화 화면 (Always-on-Top HUD)

### 4.1 화면 구성 (크기 업데이트)

```
┌──────────────────────────────────────────────────┐
│  다른 앱 화면 (Zoom, Google Meet, Teams...)      │
│                                                  │
│    ┌────────────────────────────────┐           │
│    │ 🟢 LIVE  │  A사 시리즈A 2차    │  [─][□][×] │
│    │ 00:23:45 │  목표: 검증/리스크   │           │
│    │────────────────────────────────│           │
│    │ 📊 결정 품질                    │  ▼       │
│    │ • 목표: 명확 ✓                  │           │
│    │ • 근거: 보통 ⚠️                 │           │
│    │ • 리스크: 누락 ❌               │           │
│    │                                │           │
│    │ 💡 지금 제안할 질문:            │           │
│    │ "CAC는 채널별로                │  [복사]   │
│    │  어떻게 되시나요?"              │           │
│    │                                │           │
│    │ 📖 전문용어:                    │           │
│    │ • CAC = 고객 획득 비용          │  [?]     │
│    │                                │           │
│    │ 🔍 실시간 리서치               │  [보기]   │
│    │ (더미 데이터 준비됨)            │           │
│    └────────────────────────────────┘           │
│                                                  │
│  Zoom 화면 계속...                               │
└──────────────────────────────────────────────────┘

HUD 크기: 375px × 525px (최적화)
```

### 4.2 HUD 상태 체계

Onno HUD는 **3단계 상태**로 작동합니다:

#### 상태 1: 최소화 모드 (Collapsed State)
```
┌─────────────────────────┐
│ 🟢 LIVE │ A사 2차 미팅   │  [▼]
│ 00:23:45                │
│ 💬 인사이트 2개 대기     │
└─────────────────────────┘
```

**특징**:
- 크기: 300px × 80px (유지)
- 위치: 화면 우측 상단 고정 (Chrome Side Panel)
- 표시 정보:
  - 🟢 실시간 청취 중 표시
  - 회의 제목
  - 경과 시간
  - 대기 중인 인사이트/제안 개수
- 클릭 시: 확장 모드로 전환

#### 상태 2: 확장 모드 (Expanded State)
```
┌────────────────────────────────────┐
│ 🟢 LIVE │ A사 시리즈A 2차 미팅      │  [─][×]
│ 00:23:45 │ 목표: 검증/리스크        │
│────────────────────────────────────│
│ 📊 대화 진행 상황                   │
│ ▓▓▓▓▓▓▓▓░░░░░░░ 60%                │
│                                    │
│ 🎯 결정 품질 체크                   │
│ • 목표 (Goal): 명확 ✓              │
│ • 근거 (Evidence): 보통 ⚠️          │
│ • 리스크 (Risk): 누락 ❌            │
│ • 액션 (Action): 미형성 ⚪          │
│                                    │
│ 💡 지금 제안할 질문 (2):            │
│ 1. "CAC는 채널별로 어떻게..."      │  [복사]
│ 2. "LTV 계산 기준이..."            │  [복사]
│                                    │
│ 💬 방금 캡처된 인사이트:            │
│ "MAU 10만, 월 성장률 15%"          │  [메모]
│ "유료 전환율 8%"                   │  [메모]
│                                    │
│ 📖 전문용어 (3):                    │
│ • CAC = 고객 획득 비용             │  [자세히]
│ • LTV = 생애 가치                  │  [자세히]
│                                    │
│ 🔍 실시간 리서치:                   │
│ "A사 경쟁사 분석 준비됨"           │  [보기]
│ (더미 데이터)                       │
│                                    │
│ ⚠️ 중요: 미확인 항목 (2)            │  [확인]
│                                    │
└────────────────────────────────────┘
```

**특징**:
- 크기: 375px × 525px (**최적화**)
- 위치: Chrome Side Panel (고정) 또는 드래그 가능
- 표시 정보:
  - 대화 진행률 (시간 기준)
  - 결정 품질 실시간 체크 (8가지 요소 상태)
  - 실시간 질문 제안 (최대 3개)
  - 캡처된 인사이트/숫자 (자동 추출)
  - 전문용어 설명 (대화 중 등장한 용어)
  - 실시간 리서치 결과 (**더미 데이터**)
  - 경고/알림 (미확인 항목, 리스크 등)
- 스크롤 가능 (세로)

#### 상태 3: 개입 모드 (Intervention Mode)
```
┌────────────────────────────────────┐
│ ⚠️ 안전 카드 │ 신뢰도 85%           │  [×]
│────────────────────────────────────│
│ 상황:                              │
│ CAC 확인 기회 - 유닛이코노믹스 검증 │
│                                    │
│ 제안:                              │
│ "CAC는 채널별로 어떻게 되시나요?"   │
│                                    │
│ 💡 왜 지금?                         │
│ • 지난 미팅에서 미확인              │
│ • 투자 의사결정에 핵심 지표          │
│ • 대화 흐름상 자연스러운 타이밍     │
│                                    │
│ [쓰겠다]  [나중에]  [무시]          │
└────────────────────────────────────┘
```

**특징**:
- 트리거: 중요한 갭 감지 시 자동 팝업
- 표시 정보:
  - 카드 유형 (안전 카드, 프레이밍 카드 등)
  - 신뢰도 점수 (AI 확신도)
  - 상황 설명
  - 구체적 제안 (질문/표현/액션)
  - 근거 (왜 지금 이것을 제안하는지)
- 사용자 선택:
  - "쓰겠다" → 클립보드에 복사 + 회의록에 자동 기록
  - "나중에" → 확장 모드 대기 목록에 추가
  - "무시" → 해당 제안 숨김

### 4.3 실시간 지원 기능

#### 기능 1: 질문 제안 (Question Suggestion)
```
💡 지금 제안할 질문:

1. "채널별 CAC가 어떻게 되시나요?"
   [복사] [수정] [무시]

   💡 타이밍 근거:
   • 지난 미팅 미확인 항목
   • 대화 흐름상 자연스러운 전환점
   • 투자 의사결정 핵심 지표
```

**AI 로직**:
- **입력**: 실시간 전사 + 과거 미팅 맥락 + 목표 모드 + 시간 진행률
- **처리**:
  - 결정 구조 8요소 중 누락 항목 감지
  - 대화 흐름 분석 (화제 전환 타이밍)
  - 목표 모드 일치도 계산
- **출력**: 질문 후보 3개 (우선순위 정렬)

#### 기능 2: 인사이트 추출 (Insight Extraction)
```
💬 방금 캡처된 인사이트:

"MAU 10만, 월 성장률 15%"
[메모에 추가] [하이라이트]

"유료 전환율 8%"
[메모에 추가] [하이라이트]

"경쟁사 B사 대비 AI 정확도 15% 높음"
[메모에 추가] [하이라이트]
```

**AI 로직**:
- **입력**: 실시간 전사 스트림
- **처리**: Named Entity Recognition (숫자, 지표, 클레임 감지)
- **출력**: 구조화된 인사이트 카드
- **저장**: 자동으로 회의록 "Evidence" 섹션에 기록

#### 기능 3: 전문용어 설명 (Terminology Explanation)
```
📖 전문용어:

CAC (Customer Acquisition Cost)
고객 1명을 획득하는 데 드는 평균 비용
마케팅비 + 영업비 / 신규 고객 수

[예시 보기] [계산기] [자세히]
```

**AI 로직**:
- **입력**: 대화 중 등장한 약어/전문용어
- **처리**:
  - 용어 사전 매칭
  - 산업/도메인 맥락 고려
  - 사용자 레벨 추정 (초급/중급/전문가)
- **출력**:
  - 간단한 정의 (1-2줄)
  - 계산 공식 (해당 시)
  - 실제 예시

#### 기능 4: 실시간 리서치 (Real-time Research) - **더미 데이터 구현**
```
🔍 실시간 리서치 준비됨:

"A사 경쟁사 분석"
• B사: 최근 500억 투자 유치 (2024.11)
• C사: 시장점유율 35% (1위)
• 평균 CAC: $120-150 (산업 평균)

⚠️ 더미 데이터 (실제 검색 아님)

[전체 보고서 보기]
```

**더미 데이터 구현**
```javascript
// 더미 데이터 구조
const dummyResearchData = {
  "A사": {
    competitors: [
      { name: "B사", funding: "500억", date: "2024.11" },
      { name: "C사", marketShare: "35%", rank: 1 }
    ],
    industryAvg: {
      CAC: "$120-150",
      LTV: "$800-1200",
      paybackPeriod: "8-12개월"
    },
    recentNews: [
      "B사, 시리즈B 투자 유치 성공",
      "C사, 신제품 출시로 시장점유율 증가"
    ]
  }
};

// 표시 방법
- 명확히 "더미 데이터" 표시
- 실제 API 연동 전까지 사용
- 사용자 혼동 방지
```

**실제 구현 로드맵:**
```
Phase 1 (MVP): 더미 데이터
├─ 미리 정의된 회사별 데이터
├─ "더미 데이터" 워터마크 표시
└─ UI/UX 검증용

Phase 2 (3개월): 내부 데이터
├─ 과거 미팅 기록 검색
├─ Decision Library 연동
└─ Context Manager 데이터 활용

Phase 3 (6개월): 검증된 API
├─ Crunchbase API (유료)
├─ PitchBook API (유료)
└─ 신뢰도 점수 표시
```

#### 기능 5: 결정 품질 체크 (Decision Quality Check)
```
🎯 결정 품질 실시간 체크:

목표 (Goal):        ✅ 명확 (DD 진행 합의)
근거 (Evidence):    ⚠️  보통 (유닛이코노믹스 일부 확인)
가정 (Assumption):  ⚠️  보통 (성장률 지속 가정)
리스크 (Risk):      ❌ 누락 (공동창업자 이탈 언급 안됨)
미확인 (Unknown):   ❌ 누락 (경쟁 대응 전략 미확인)
결정 (Decision):    ✅ 명확 (DD 진행)
액션 (Action):      ⚪ 부분 (담당자 미지정)
결과 (Outcome):     - (아직 실행 전)

종합 점수: 62/100 (보통)
```

**AI 로직**:
- **실시간 추적**: 8가지 결정 요소 각각의 충족도
- **상태 정의**:
  - ✅ 명확: 충분히 논의됨
  - ⚠️ 보통: 부분적으로만 다뤄짐
  - ❌ 누락: 전혀 언급 안 됨
  - ⚪ 미형성: 아직 해당 단계 아님
- **경고 트리거**: 리스크/미확인 항목 누락 시 개입 카드 발동

#### 기능 6: 자동 개입 규칙 (Intervention Logic)

**Always-on-top이더라도 자동 카드 개입은 '엄격한 규칙'이 적용됩니다.**

**개입 조건** (2개 이상 충족 시만 발동):
1. **Critical Gap**: 딜 브레이커 가능 (예: 계약 조건, 승인 프로세스)
2. **Recovery cost high**: 놓치면 재회의 필요
3. **Flow match**: 지금 주제와 자연스럽게 연결됨
4. **Time window**: 지금 아니면 타이밍 놓침

**3단계 개입 강도**:

```
┌─────────────────────────────────────┐
│ 🔴 긴급 (즉시 대응 필요)             │  ← Level 3: 강알림 (극소수)
│                                     │     빨간색, 애니메이션
│ 대화를 멈추고 확인하세요             │     예: "치명적 리스크 누락"
│ "계약 해지 조건 논의 안 됨"          │
│                                     │     트리거:
│ [지금 대응] [나중에]                 │     • 딜 브레이커 수준
│                                     │     • 법적 리스크
├─────────────────────────────────────┤     • 금액 오류
│ 🟡 주의 (권장 사항)                  │  ← Level 2: 작은 카드 (가끔)
│                                     │     노란색, 부드러운 알림
│ 상대방 말 더 들어보기                │     예: "발화 비율 불균형"
│ 현재 65:35 (권장 40:60)             │
│                                     │     트리거:
│ [조정하기] [무시]                    │     • 패턴 이상 감지
│                                     │     • 권장 사항
├─────────────────────────────────────┤     • 개선 기회
│ 🟢 정보 (참고)                       │  ← Level 1: HUD 배지 강조 (대부분)
│                                     │     회색, 접혀있음
│ 유사 상황 3건 참조 가능              │     예: "과거 패턴 참조"
│                                     │
│ [펼치기]                             │     Default 상태
└─────────────────────────────────────┘     클릭 시에만 확장
```

**인터랙션 원칙**:
- **Default**: 최소화 - 대화 방해 최소화
- **긴급 시**: 확장 - 치명적 갭 감지 시만 화면 차지
- **선택 존중**: "무시" 옵션 항상 제공
- **학습 반영**: 무시 패턴 학습해서 불필요한 알림 줄임
- **한 번에 하나**: 카드는 반드시 동시에 1개만 표시

### 4.4 HUD 인터랙션 패턴

#### 패턴 1: 드래그 앤 드롭
- HUD 헤더를 드래그하여 화면 내 위치 자유롭게 조정
- 위치 자동 저장 (다음 회의 시 동일 위치에 표시)
- **제약**: Chrome Side Panel 사용 시 고정 위치 (드래그 불가)

#### 패턴 2: 투명도 조절
```
[불투명] ███████░░░ [반투명]
  100%  ←―――――→  30%
```
- 슬라이더로 HUD 배경 투명도 조절
- 화면 가림 최소화하면서도 가독성 유지

#### 패턴 3: 핫키 지원
| 핫키 | 기능 |
|------|------|
| `Ctrl + H` | HUD 최소화/확장 토글 |
| `Ctrl + C` | 첫 번째 제안 질문 클립보드 복사 |
| `Ctrl + M` | 빠른 메모 패널 열기 |
| `Ctrl + Q` | HUD 완전 숨김/표시 |
| `Ctrl + F` | 풀스크린 오버레이 모드 |

#### 패턴 4: 호버 인터랙션
- 각 요소에 호버 시 툴팁으로 추가 정보 표시
- 예: "근거 보통 ⚠️" 호버 → "CAC/LTV 일부만 확인됨. 채널별 상세 미확인"

### 4.5 회의 말미 자동 전환

회의 종료 15분 전 자동으로 **Decision Closure Card** 표시:

```
┌────────────────────────────────────┐
│ 📝 회의 종료 전 체크리스트           │
│────────────────────────────────────│
│ ⚠️ 아직 확인 안 된 항목:             │
│ • 리스크: 공동창업자 이탈 이슈       │
│ • 미확인: 경쟁 대응 전략             │
│                                    │
│ ✅ 결정 사항 확정:                   │
│ • DD 진행 합의 (1/6 시작)           │
│   담당: [김대표]  기한: [2025-01-06] │
│                                    │
│ 📋 액션 아이템:                      │
│ • 재무 자료 제출                    │
│   담당: [____]  기한: [____]       │
│                                    │
│ [지금 정리] [나중에]                 │
└────────────────────────────────────┘
```

### 4.6 오프라인 모드

**네트워크 끊김 시 동작:**

```
┌────────────────────────────────────┐
│ 🔴 OFFLINE │ A사 2차 미팅           │  [─][×]
│ 00:23:45 │ 기본 모드                │
│────────────────────────────────────│
│ ⚠️ 네트워크 연결 끊김                │
│                                    │
│ 제한 모드로 작동 중:                │
│ ✅ 로컬 STT (정확도 낮음)            │
│ ✅ 전사 기록                        │
│ ❌ AI 질문 제안 (비활성화)           │
│ ❌ 실시간 리서치 (비활성화)          │
│                                    │
│ 💾 로컬 저장 중...                   │
│ 네트워크 복구 시 자동 동기화          │
│                                    │
└────────────────────────────────────┘
```

**기능:**
- 로컬 STT 전환 (WebSpeech API, 정확도 낮지만 작동)
- 전사 기록 계속 (로컬 저장)
- AI 기능 비활성화 (LLM 필요)
- 복구 시 백그라운드 동기화

### 4.7 프라이버시 모드

**민감한 회의용 원클릭 전환:**

```
┌────────────────────────────────────┐
│ 🔒 PRIVATE │ A사 2차 미팅           │  [─][×]
│ 00:23:45 │ 로컬 전용               │
│────────────────────────────────────│
│ 🔐 프라이버시 모드 활성화            │
│                                    │
│ 보호 조치:                          │
│ ✅ 로컬에만 저장 (클라우드 전송 X)   │
│ ✅ 자동 마스킹 활성화                │
│    • 주민번호 ***-******           │
│    • 계좌번호 ****-**-******       │
│    • 이메일 ****@****.com         │
│ ✅ 회의 종료 후 자동 삭제 옵션       │
│                                    │
│ [설정 변경]                         │
│                                    │
└────────────────────────────────────┘
```

**토글 방법:**
```
HUD 헤더 → [🔓] 클릭 → [🔒 프라이버시 모드 ON]
```

---

## 5. 메인 SaaS 콘솔 (Decision OS)

### 5.1 콘솔 구조 (6개 모듈)

메인 SaaS 콘솔은 **6개 모듈**로 구성됩니다:

```
┌─────────────────────────────────────────────────────────┐
│  Onno                                     [🔍] [🔔] [👤]  │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  📅 오늘  |  📚 Library  |  📖 Playbook  |  🗂️ Context  |  ⚙️ Governance  |  📊 Analytics  │
│  ────                                                   │
│                                                         │
│  [콘텐츠 영역]                                           │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

**MVP/V2 구분:**

| 모듈 | MVP (0-3개월) | V2 (3-6개월) | V3 (6-12개월) |
|------|---------------|--------------|---------------|
| **오늘** | ✅ 필수 | - | - |
| **Library** | ✅ 필수 | - | - |
| **Playbook** | ⚠️ 템플릿만 | ✅ Studio 기능 | - |
| **Context** | ❌ 제외 | ⚠️ 용어집만 | ✅ 풀 기능 |
| **Governance** | ❌ 제외 | ❌ 제외 | ✅ 엔터프라이즈 |
| **Analytics** | ❌ 제외 | ⚠️ 기본 지표 | ✅ 고급 분석 |

### 5.2 모듈 1: 오늘 (Today Dashboard) - **MVP**

**목적**: 오늘 해야 할 일 + 예정된 미팅 관리

```
┌─────────────────────────────────────────┐
│  좋은 아침이에요, 지윤님 👋               │
│  2025년 12월 29일 일요일                 │
├─────────────────────────────────────────┤
│                                         │
│  📅 오늘 미팅 (3)                        │
│  ┌───────────────────────────────────┐  │
│  │ 🔴 10:00 | A사 시리즈A 2차 미팅   │  │
│  │ ⚠️ 지난번 미확인: 유닛이코노믹스   │  │
│  │ [준비하기] [바로 시작]             │  │
│  └───────────────────────────────────┘  │
│                                         │
│  📋 오늘 처리할 것 (5)                   │
│  🔴 확정 대기 (2)                       │
│  • 어제 C사 미팅 - 결정 3개 미확정      │
│  🟡 반영 대기 (2)                       │
│  • A사 - CRM 단계 업데이트 필요         │
│  ⚪ 후속 대기 (1)                       │
│  • F사 - 자료 요청 응답 대기 (D+2)      │
│                                         │
│  ⚠️ 주요 리스크 (2)                      │
│  • A사: 경쟁사 검토 중                  │
│  • G사: 예산 확보 불확실                │
│                                         │
└─────────────────────────────────────────┘
```

### 5.3 모듈 2: Decision Library (결정 도서관) - **MVP**

**목적**: 모든 결정/근거/리스크/액션 검색 및 추적

```
┌─────────────────────────────────────────────────────────┐
│  📚 Decision Library                                    │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  🔍 [검색: 회사명, 키워드, 날짜, 담당자...]             │
│                                                         │
│  필터: [전체 ▼] [2025년 ▼] [담당자: 전체 ▼]             │
│                                                         │
│  ┌─────────────────────────────────────────────────┐   │
│  │ ✅ DD 진행 합의                    2025.12.29    │   │
│  │ A사 시리즈A 2차 미팅                              │   │
│  │                                                  │   │
│  │ 결정: DD 진행 (2025.01.06 시작)                  │   │
│  │ 근거: • MAU 10만, 월 성장률 15%                  │   │
│  │       • 유료 전환율 8%                           │   │
│  │ 리스크: 공동창업자 이탈 이슈 (🔴 높음)            │   │
│  │ 액션: • 재무 자료 제출 (김대표, ~1/3)            │   │
│  │       • 법무 자문 선임 (이수진, ~1/5)            │   │
│  │                                                  │   │
│  │ 상태: 진행 중 | 다음 체크: 2025.01.03            │   │
│  │                                                  │   │
│  │ [자세히] [편집] [타임라인]                        │   │
│  └─────────────────────────────────────────────────┘   │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

### 5.4 모듈 3: Playbook Studio - **템플릿 기반 (MVP)**

**목적**: 팀별 필수 질문, 합의 템플릿, 금지 규칙 관리

**템플릿 제공 우선**

```
┌─────────────────────────────────────────────────────────┐
│  📖 Playbook                                            │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  🎯 내 Playbook                                          │
│                                                         │
│  ┌─────────────────────────────────────────────────┐   │
│  │ 📋 시리즈A 투자 검토                              │   │
│  │ (기본 템플릿)                            [ON/OFF] │   │
│  │                                                  │   │
│  │ 필수 확인 항목 (12):                              │   │
│  │ ☑ 유닛이코노믹스 (CAC, LTV, Payback)             │   │
│  │ ☑ 시장 규모 (TAM, SAM, SOM)                     │   │
│  │ ☑ 경쟁 우위/해자                                 │   │
│  │ ☐ 팀 구성 및 채용 계획                           │   │
│  │ ...                                              │   │
│  │                                                  │   │
│  │ 추천 질문 (5개 표시 중 25개):                     │   │
│  │ • "현재 CAC와 LTV가 각각 얼마인가요?"            │   │
│  │ • "가장 큰 경쟁사는 어디이고..."                 │   │
│  │                                                  │   │
│  │ [질문 추가하기] [템플릿 수정]                     │   │
│  └─────────────────────────────────────────────────┘   │
│                                                         │
│  [+ 새 Playbook 만들기] (V2 기능)                       │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

**MVP 접근:**
```
제공 템플릿 (3개):
├─ 시리즈A 투자 검토
├─ 세일즈 협상
└─ 채용 면접

사용자 커스텀 (간단):
├─ ON/OFF 토글
├─ 필수 항목 체크/해제
├─ 질문 3-5개 추가/수정
└─ "다음 미팅에 적용" 선택

V2 Studio 기능 (6개월 후):
├─ 새 Playbook 생성
├─ 금지 규칙 설정
├─ 복잡한 조건부 로직
└─ 팀 공유 및 버전 관리
```

### 5.5 모듈 4: Context Manager - **V2 부분, V3 풀**

**MVP**: 제외
**V2**: 용어집만
**V3**: 풀 기능 (정책, 프로젝트, 관계 맵)

### 5.6 모듈 5: Governance - **V3 엔터프라이즈**

**MVP**: 제외
**V2**: 제외
**V3**: 엔터프라이즈 고객 요구 시 개발

### 5.7 모듈 6: Analytics - **V2 기본, V3 고급**

**MVP**: 제외
**V2**: 기본 KPI만
**V3**: 고급 분석 및 인사이트

---

## 6. 온보딩 경험 (First-Time User Experience)

### 6.1 온보딩 플로우 (4단계 + 확정 시점 통합)

```
1단계: 환영        →  2단계: 목표 선택  →  3단계: 데모 투어
                                                ↓
                                          4단계: 첫 미팅 시뮬레이션
                                                ↓
                                          확정 모달 (Notion 통합 포함)
```

**핵심 변경 (Part 1.4):**
- ❌ 기존: 온보딩 3단계에서 통합 설정 (데이터 없이 연결)
- ✅ 변경: 첫 미팅 확정 시점에서 통합 제안 (저장할 데이터 있을 때)
- **이유**: 맥락적 트리거 - 사용자가 실제 데이터를 가진 순간에 저장 옵션 제시

### 6.2 단계별 화면

#### 1단계: 환영 화면
```
┌─────────────────────────────────────────┐
│                                         │
│          Onno에 오신 것을 환영합니다      │
│                                         │
│  🎯 회의 중 놓치는 중요한 질문을 잡아줍니다│
│                                         │
│  [영상으로 보기 (1분)]                   │
│  [바로 시작하기]                         │
│                                         │
└─────────────────────────────────────────┘
```

#### 2단계: 목표 선택
```
┌─────────────────────────────────────────┐
│  주로 어떤 회의를 하시나요?              │
│                                         │
│  ┌─────────────────────────────────┐   │
│  │ 💰 투자 검토                     │   │
│  │ VC, 투자심사역                   │ ☑ │
│  └─────────────────────────────────┘   │
│                                         │
│  ┌─────────────────────────────────┐   │
│  │ 💼 세일즈 협상                   │   │
│  │ B2B 영업, 딜 클로징              │ ☐ │
│  └─────────────────────────────────┘   │
│                                         │
│  ┌─────────────────────────────────┐   │
│  │ 👥 채용 면접                     │   │
│  │ HR, 채용 담당자                  │ ☐ │
│  └─────────────────────────────────┘   │
│                                         │
│  [다음 단계]                            │
│                                         │
└─────────────────────────────────────────┘
```

#### 3단계: 데모 투어
```
┌─────────────────────────────────────────┐
│  🎬 5분 가이드 투어를 보시겠어요?         │
│                                         │
│  AI와 모의 투자 검토 회의를 해보며        │
│  Onno의 핵심 기능을 경험하세요.          │
│                                         │
│  [투어 시작]  [건너뛰기]                 │
│                                         │
└─────────────────────────────────────────┘
```

**데모 투어 시나리오:**
```
1. AI 창업자가 피칭 시작
2. HUD가 실시간으로 인사이트 추출
3. 중요한 순간에 질문 제안
4. 회의 종료 → 확정 모달 (Notion 통합 포함)
5. Decision Library에서 검색
```

#### 4단계: 첫 미팅 시뮬레이션 → 확정 모달 (Part 1.4: Notion 통합)

**확정 모달 UI (Notion 통합 포함):**
```
┌────────────────────────────────────────────────────┐
│ 📝 방금 회의 정리 (5분)                             │
├────────────────────────────────────────────────────┤
│                                                    │
│ AI가 자동 추출한 내용:                              │
│                                                    │
│ ✅ 결정 사항 (1):                                  │
│ ┌──────────────────────────────────────────────┐  │
│ │ DD 진행 합의                                  │  │
│ │ 시작일: 2025-01-06                            │  │
│ │ 담당: 김대표 (A사)                            │  │
│ └──────────────────────────────────────────────┘  │
│                                                    │
│ 📋 인사이트 (5개 자동 추출됨):                      │
│ ✓ MAU 10만, 월 성장률 15%                          │
│ ✓ 유료 전환율 8%                                   │
│ ... [더 보기]                                      │
│                                                    │
│ ────────────────────────────────────────────────  │
│                                                    │
│ 💾 저장 옵션                                        │
│                                                    │
│ ┌──────────────────────────────────────────────┐  │
│ │ ☑ Notion에 저장하기                          │  │
│ │                                              │  │
│ │   미연결 상태:                                │  │
│ │   [🔗 Notion 연결하기]  ← Primary 버튼       │  │
│ │   "30초면 연결 완료!"                         │  │
│ │                                              │  │
│ │   연결됨 상태:                                │  │
│ │   ✅ Notion 연결됨 (민수의 워크스페이스)      │  │
│ │   저장 위치: Onno 회의록 (자동 생성)          │  │
│ └──────────────────────────────────────────────┘  │
│                                                    │
│ [확정하고 저장하기]                                │
│                                                    │
└────────────────────────────────────────────────────┘
```

**Notion 연결 플로우 (5-Layer Framework 적용):**

**Layer 1: Strategy & JTBD**
```
Functional Job: 회의록을 Notion에 자동 저장
Emotional Job: 귀찮은 복붙 작업에서 해방
Social Job: 팀원들과 쉽게 공유
```

**Layer 2: Behavioral Design (Fogg Model)**
```
Motivation (동기):
├─ Hope: "회의 끝나고 바로 팀에 공유할 수 있어요"
├─ Fear: "복붙 안 해도 돼요"
└─ Context: 방금 정리한 데이터가 눈앞에 있음

Ability (능력):
├─ Zero Input: 체크박스 하나 + 버튼 하나
├─ OAuth: 클릭 한 번으로 연결
└─ 자동 설정: 워크스페이스/페이지 자동 감지

Trigger (트리거):
├─ Hot Trigger: 저장할 데이터가 있는 순간
├─ Contextual: 확정 버튼 누르기 직전
└─ Clear CTA: "Notion에 저장하기" 체크박스
```

**Layer 3: User Flow**
```
[확정 모달]
    ↓
[Notion 체크박스 선택]
    ↓
[상태 확인]
    ├─ 연결됨 → 바로 저장
    └─ 미연결 → [Notion 연결하기] 버튼 표시
                    ↓
                [클릭]
                    ↓
                [OAuth 팝업]
                    ↓
                [사용자 승인]
                    ↓
                [연결 완료] ← 체크박스 상태 업데이트
                    ↓
[확정하고 저장하기]
    ↓
[Notion 페이지 자동 생성]
    ↓
[완료 메시지] "Notion에 저장됐어요!"
```

**Layer 4: Edge Cases**
```
Case 1: OAuth 거부
├─ 팝업 닫힘
├─ 체크박스 해제됨
├─ 메시지: "나중에 설정에서 연결할 수 있어요"
└─ [확정하고 저장하기] 활성 (Notion 없이)

Case 2: OAuth 실패 (네트워크)
├─ 에러 메시지: "연결 실패. 다시 시도해주세요"
├─ [다시 시도] 버튼
└─ 3회 실패 → "나중에 설정에서 연결해주세요"

Case 3: Notion 저장 실패
├─ 확정은 완료 (로컬 저장)
├─ 백그라운드 재시도 (3회)
├─ 실패 시: "오늘" 화면에 알림 표시
└─ [수동 재시도] 옵션
```

**Layer 5: Event Logging**
```typescript
type NotionIntegrationEvent =
  | 'notion_checkbox_shown'        // 체크박스 표시됨
  | 'notion_checkbox_checked'      // 체크박스 선택됨
  | 'notion_checkbox_unchecked'    // 체크박스 해제됨
  | 'notion_connect_clicked'       // 연결 버튼 클릭
  | 'notion_oauth_started'         // OAuth 팝업 열림
  | 'notion_oauth_completed'       // OAuth 성공
  | 'notion_oauth_denied'          // OAuth 거부
  | 'notion_oauth_error'           // OAuth 에러
  | 'notion_save_attempted'        // 저장 시도
  | 'notion_save_completed'        // 저장 성공
  | 'notion_save_failed';          // 저장 실패

// 핵심 지표
const notionMetrics = {
  // 체크박스 선택률
  checkboxRate: count(notion_checkbox_checked) / count(notion_checkbox_shown),
  // 연결 전환율
  connectRate: count(notion_oauth_completed) / count(notion_connect_clicked),
  // 저장 성공률
  saveRate: count(notion_save_completed) / count(notion_save_attempted),
};
// 목표: checkboxRate > 60%, connectRate > 80%, saveRate > 95%
```

#### 완료 화면 (Notion 저장 성공 시)
```
┌─────────────────────────────────────────┐
│  🎉 저장 완료!                           │
│                                         │
│  ✅ 결정/액션 확정됨                      │
│  ✅ Notion에 저장됨                       │
│     → "A사 2차 미팅" 페이지 생성          │
│                                         │
│  [Notion에서 보기]  [오늘 화면으로]       │
│                                         │
└─────────────────────────────────────────┘
```

### 6.3 Part 1.5: 첫 미팅 준비 (5-Layer Framework)

온보딩 완료 후, 사용자가 실제 첫 미팅을 준비하는 플로우입니다.

#### Layer 1: Strategy & JTBD

```
Functional Job:
├─ "과거 미팅 내용 직접 찾아보지 않고 빠르게 준비하고 싶다"
├─ "어떤 질문 해야 할지 미리 알고 싶다"
└─ "지난번 미확인 항목 놓치지 않고 챙기고 싶다"

Emotional Job:
├─ "자신감 있게 미팅에 들어가고 싶다"
├─ "준비 안 해서 멍청해 보이기 싫다"
└─ "같은 질문 또 하는 실수 피하고 싶다"

Social Job:
├─ "상대방에게 전문적으로 보이고 싶다"
├─ "팀원들에게 꼼꼼하다는 평가 받고 싶다"
└─ "중요한 포인트 놓치지 않는 사람으로 인식되고 싶다"
```

#### Layer 2: Behavioral Design (Fogg Model B=MAT)

```
Motivation (동기):
├─ Hope: "2분 준비로 완벽하게 무장된 상태로 미팅 입장"
├─ Fear: "지난번에 뭐 약속했는지 기억 안 나서 신뢰 잃기 싫다"
└─ Context: 미팅 10분 전, 시간 압박 + 준비 욕구 동시 발생

Ability (능력):
├─ Zero Input: AI가 다 준비해놓음, 읽기만 하면 됨
├─ Time: 2분 이내 (브리핑 읽기 30초 + 확인 90초)
├─ Cognitive: 체크박스 확인만, 복잡한 판단 불필요
└─ Physical: 클릭 3-4번으로 완료

Trigger (트리거):
├─ Push: 10분 전 알림 "A사 미팅 10분 후, 준비할까요?"
├─ Visual: "오늘" 화면에 카운트다운 표시
├─ Contextual: 캘린더 연동으로 정확한 타이밍
└─ Hot: 미팅 임박한 순간 = 행동 가능성 최고조
```

#### Layer 3: User Flow

```
[10분 전 알림]
    ↓
[오늘 화면] → 미팅 카드 "🔴 10:00 A사 2차"
    ↓
[준비하기] 클릭
    ↓
┌────────────────────────────────────────┐
│ 📋 A사 2차 미팅 준비                      │
│ 예상 소요: 2분                           │
├────────────────────────────────────────┤
│                                        │
│ 📌 지난 미팅 핵심 (12/22)               │
│ ┌──────────────────────────────────┐  │
│ │ • MAU 10만, 월 성장률 15%         │  │
│ │ • 유료 전환율 8%                  │  │
│ │ • CTO가 보안 우려 표명            │  │
│ └──────────────────────────────────┘  │
│                                        │
│ ⚠️ 미확인 항목 (지난번 놓친 것)          │
│ ┌──────────────────────────────────┐  │
│ │ ❌ CAC 채널별 상세                 │  │
│ │ ❌ LTV 계산 기준                   │  │
│ │ ⚠️ 경쟁사 대응 전략 (일부만)        │  │
│ └──────────────────────────────────┘  │
│                                        │
│ 💡 이번에 물어볼 질문                    │
│ ☑ "CAC는 채널별로 어떻게 되나요?"       │
│ ☑ "CTO 보안 검토 일정은 어떻게 되나요?" │
│ ☐ [+ 내 질문 추가]                      │
│                                        │
│ [준비 완료 - 회의 시작 →]  [나중에]     │
│                                        │
└────────────────────────────────────────┘
    ↓
[준비 완료 클릭]
    ↓
[HUD 자동 실행 대기 상태]
    ↓
[Zoom/Meet 열면 → HUD 자동 활성화 + 준비 질문 로드됨]
```

#### Layer 4: Edge Cases

```
Case 1: 첫 미팅 (과거 기록 없음)
├─ 조건: meeting_count === 0
├─ 화면: "지난 미팅 핵심" 섹션 숨김
├─ 대신: Playbook 기본 질문 표시
│   "시리즈A 투자 검토 - 표준 질문 5개"
└─ CTA: "첫 미팅 시작 →"

Case 2: 미팅 3건 이상 (기록 많음)
├─ 조건: meeting_count >= 3
├─ 화면: 가장 최근 미팅만 상세 표시
├─ 추가: "이전 미팅 2건 더 보기" 접힘 섹션
└─ 미확인 항목: 모든 미팅에서 누적

Case 3: 준비 건너뛰기
├─ 사용자: [나중에] 또는 직접 "바로 시작" 클릭
├─ 시스템: 준비 안 됨 상태로 미팅 시작
├─ HUD: "💡 준비 안 됨 - 미확인 2건" 배지 표시
└─ 클릭 시: 준비 모달 다시 표시 (미팅 중에도)

Case 4: AI 질문 생성 실패
├─ 조건: API 에러 또는 데이터 부족
├─ 화면: Playbook 기본 질문으로 대체
├─ 메시지: "AI 질문 생성 중 오류. 기본 질문 표시"
└─ 재시도: [다시 생성] 버튼

Case 5: 급한 미팅 (5분 이내)
├─ 조건: time_to_meeting < 5min
├─ 화면: 핵심만 표시 (미확인 항목 + 질문 2개)
├─ 메시지: "⚡ 빠른 준비 모드"
└─ CTA: "30초 준비 완료 →"
```

#### Layer 5: Event Logging

```typescript
type PrepEventType =
  // 진입
  | 'prep_reminder_pushed'      // 10분 전 알림 발송
  | 'prep_reminder_clicked'     // 알림에서 직접 클릭
  | 'prep_card_shown'           // 오늘 화면에서 카드 표시
  | 'prep_button_clicked'       // [준비하기] 클릭
  // 준비 모달
  | 'prep_modal_opened'         // 모달 열림
  | 'prep_past_expanded'        // 지난 미팅 섹션 확장
  | 'prep_unconfirmed_viewed'   // 미확인 항목 확인
  | 'prep_question_unchecked'   // AI 질문 체크 해제
  | 'prep_question_added'       // 사용자 질문 추가
  // 완료
  | 'prep_completed'            // 준비 완료 클릭
  | 'prep_skipped'              // 나중에 클릭
  | 'prep_direct_start';        // 바로 시작 클릭 (준비 건너뜀)

// 핵심 지표
const prepMetrics = {
  // 준비율: 알림 본 사람 중 준비 완료한 비율
  prepRate: count(prep_completed) / count(prep_card_shown),
  // 목표: > 70%

  // 평균 준비 시간
  avgPrepTime: avg(prepTimeSeconds WHERE prep_completed),
  // 목표: < 120초 (2분)

  // AI 질문 채택률: AI 질문 중 체크 유지된 비율
  questionAdoptionRate: (suggested - unchecked) / suggested,
  // 목표: > 80%

  // 건너뛰기율
  skipRate: count(prep_skipped + prep_direct_start) / count(prep_card_shown),
  // 목표: < 30%
};
```

### 6.4 Part 2: 미팅 전 - Today 화면 (5-Layer Framework)

온보딩 완료 후, 사용자가 매일 서비스를 사용하는 핵심 진입점입니다.

#### Part 2.1: Today 화면에서 미팅 확인

##### Layer 1: Strategy & JTBD

```
Functional Job:
"오늘 해야 할 일과 미팅을 한눈에 파악하고 싶다"

Emotional Job:
"뭘 놓쳤는지 불안하지 않고, 통제감을 느끼고 싶다"

Social Job:
"팀에게 '저 사람 꼼꼼하다'는 신뢰를 주고 싶다"
```

##### Layer 2: Behavioral Design (Fogg Model B=MAT)

```
Motivation (동기):
├─ Hope: "오늘 할 일 다 처리하면 깔끔하게 퇴근"
├─ Fear: "놓치면 내일 2배로 쌓임"
└─ Reward: 처리할수록 섹션이 비워지는 시각적 만족

Ability (능력):
├─ Zero Decision: AI가 우선순위 자동 정렬
├─ Scan Time: 3초 내 오늘 상황 파악
└─ Cognitive Load: 3개 섹션만 (긴급/오늘/나중에)

Trigger (트리거):
├─ Temporal: 아침 출근 시 첫 화면
├─ Visual: 🔴 빨간 배지로 긴급 강조
└─ Push: 미처리 항목 알림 (09:00, 17:00)
```

##### Layer 3: Structure & Logic (User Flow)

```
[앱 열기]
    ↓
[Today 화면 로드]
    ↓
┌─────────────────────────────────────────┐
│ AI 우선순위 계산                          │
│ ├─ 확정 대기 (24h 이내) → 🔴 긴급        │
│ ├─ 미팅 (오늘) → 📅 오늘                 │
│ └─ 나머지 → ⏰ 나중에                    │
└─────────────────────────────────────────┘
    ↓
[섹션별 렌더링]
    ├─ 🔴 지금 바로 처리 (확장, 상단 고정)
    ├─ 📅 오늘 미팅 (확장)
    └─ ⏰ 나중에 (접힘)
    ↓
[사용자 스캔] ─→ 3초 내 상황 파악
    ↓
[카드 선택] ─→ Part 2.2로 이동
```

##### Layer 4: Edge Cases

```
Case 1: Empty State (오늘 할 일 0개)
├─ 메시지: "오늘은 여유로운 하루예요 🌴"
├─ 서브텍스트: "예정된 미팅이 없습니다"
└─ CTA: [새 미팅 추가] 또는 [지난 기록 보기]

Case 2: Overload (10개 이상)
├─ 상위 5개만 표시
├─ "외 N개 더 보기" 링크
└─ 경고 배너: "오늘 할 일이 많네요. 우선순위를 확인해보세요."

Case 3: All Urgent (긴급 5개 이상)
├─ 경고 배너: "⚠️ 긴급 항목이 많습니다"
├─ 정렬: 마감 시간순
└─ 힌트: "가장 급한 것부터 처리하세요"

Case 4: Offline (네트워크 끊김)
├─ 캐시 데이터 표시
├─ 상단 배너: "오프라인 모드 - 마지막 동기화: 10분 전"
└─ 동기화 버튼 표시

Case 5: First Day (첫 사용)
├─ 온보딩 툴팁: "여기서 오늘 할 일을 확인하세요"
├─ 하이라이트 효과
└─ 3번 방문 후 자동 숨김
```

##### Layer 5: Event Logging

```typescript
type TodayEventType =
  | 'today_screen_viewed'       // Today 화면 진입
  | 'today_section_expanded'    // 섹션 펼침
  | 'today_section_collapsed'   // 섹션 접음
  | 'today_card_clicked'        // 카드 클릭
  | 'today_empty_state_shown'   // 빈 상태 표시
  | 'today_refresh_triggered'   // 새로고침
  | 'today_overload_shown';     // 과부하 경고 표시

interface TodayEventMetadata {
  urgentCount: number;
  meetingCount: number;
  laterCount: number;
  totalCount: number;
  timeOfDay: 'morning' | 'afternoon' | 'evening';
  isFirstVisitToday: boolean;
  sessionDuration?: number;
}
```

#### Part 2.2: 미팅 카드 인터랙션

##### Layer 1: Strategy & JTBD

```
Functional Job:
"미팅 전에 빠르게 준비 상태를 확인하고 싶다"

Emotional Job:
"준비 안 된 상태로 미팅 들어가는 불안 해소"

Social Job:
"상대방에게 '이 사람 준비 잘 해왔네' 인상"
```

##### Layer 2: Behavioral Design

```
Motivation (동기):
├─ Visual Cue: 💡 파란 배지 = "준비할 게 있다"
├─ Time Pressure: "35분 후" 카운트다운
└─ Completion: 준비 완료 시 ✅ 초록 전환

Ability (능력):
├─ One Tap: 카드 전체가 클릭 영역
├─ Preview: 카드에서 핵심 정보 미리보기
└─ Skip Option: [바로 시작]으로 건너뛰기 가능

Trigger (트리거):
├─ Proximity: 미팅 시간 가까울수록 상단 배치
├─ Color: 시간 임박 시 🔴 빨강으로 변경
└─ Animation: 10분 전 카드 펄스 효과
```

##### Layer 3: Structure & Logic (카드 상태 머신)

```
[MeetingCard State Machine]

         ┌──────────────────────────────────┐
         │                                  │
         ▼                                  │
    ┌─────────┐    시간 임박     ┌─────────┐
    │ PENDING │ ───────────────→ │ URGENT  │
    │ (회색)  │    (30분 전)     │ (주황)  │
    └────┬────┘                  └────┬────┘
         │                            │
         │ [준비하기]                  │ [준비하기]
         │ 클릭                       │ 클릭
         ▼                            ▼
    ┌─────────┐                  ┌─────────┐
    │ PREPPING│ ←────────────────│ PREPPING│
    │ (모달)  │                  │ (모달)  │
    └────┬────┘                  └─────────┘
         │
         │ [준비 완료]
         ▼
    ┌─────────┐    미팅 시작     ┌─────────┐
    │ READY   │ ───────────────→ │  LIVE   │
    │ (초록)  │                  │ (빨강)  │
    └─────────┘                  └─────────┘
         │
         │ [바로 시작]
         ▼
    ┌─────────┐
    │ SKIPPED │
    │ (회색)  │
    └─────────┘
```

##### 카드 상태별 UI

```
┌─────────────────────────────────────────────────────┐
│ State: PENDING (기본)                                │
├─────────────────────────────────────────────────────┤
│ ┌─────────────────────────────────────────────────┐ │
│ │ 14:00 A사 2차 투자 검토                          │ │
│ │                                                 │ │
│ │ 💡 준비 필요:                                    │ │
│ │ • 지난번 미확인: CAC, LTV                        │ │
│ │ • AI 추천 질문 2개                               │ │
│ │                                                 │ │
│ │ 예상 준비 시간: 2분                              │ │
│ │                                                 │ │
│ │  [준비하기]    [바로 시작]                       │ │
│ └─────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────┐
│ State: URGENT (30분 이내)                            │
├─────────────────────────────────────────────────────┤
│ ┌─────────────────────────────────────────────────┐ │
│ │ 🟠 10:00 A사 2차 투자 검토    25분 후            │ │
│ │ ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━             │ │
│ │ ⚠️ 아직 준비가 안 됐어요!                        │ │
│ │                                                 │ │
│ │  [지금 준비하기 →]                               │ │
│ └─────────────────────────────────────────────────┘ │
│ (Border: Orange, 펄스 애니메이션)                    │
└─────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────┐
│ State: READY (준비 완료)                             │
├─────────────────────────────────────────────────────┤
│ ┌─────────────────────────────────────────────────┐ │
│ │ ✅ 10:00 A사 2차 투자 검토    준비 완료          │ │
│ │                                                 │ │
│ │ 체크한 질문: 3개                                 │ │
│ │                                                 │ │
│ │  [미팅 시작]    [다시 확인]                      │ │
│ └─────────────────────────────────────────────────┘ │
│ (Border: Green)                                      │
└─────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────┐
│ State: LIVE (미팅 진행 중)                           │
├─────────────────────────────────────────────────────┤
│ ┌─────────────────────────────────────────────────┐ │
│ │ 🔴 LIVE  A사 2차 투자 검토    23:45             │ │
│ │ ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━             │ │
│ │ 실시간 기록 중...                                │ │
│ │                                                 │ │
│ │  [HUD로 이동]                                    │ │
│ └─────────────────────────────────────────────────┘ │
│ (Border: Red, 펄스 애니메이션)                       │
└─────────────────────────────────────────────────────┘
```

##### Layer 4: Edge Cases

```
Case 1: Immediate Meeting (5분 이내)
├─ Quick Mode 자동 활성화
├─ 카드 색상: 빨강
├─ CTA: "바로 시작" 강조
└─ 준비 모달도 Quick Mode

Case 2: Past Meeting (시작 시간 지남)
├─ 상태: "진행 중" 또는 "지나감"
├─ 시작 시간 지났으면 → LIVE 상태 확인
└─ 30분 이상 지났으면 → "미팅 놓침?" 확인 모달

Case 3: Cancelled Meeting
├─ 취소선 + 흐림 처리 (opacity: 0.5)
├─ 배지: "취소됨"
└─ 카드 접힘 (나중에 섹션으로 이동)

Case 4: No Prep Data (AI 실패)
├─ 기본 정보만 표시 (시간, 회사명)
├─ 배지: "준비 정보 없음"
└─ CTA: [미팅 시작] 만 표시

Case 5: Multiple Urgent (2개 이상 동시 긴급)
├─ 시간순 정렬
├─ 경고 배너: "연속 미팅이 있어요!"
└─ 각 카드에 순서 표시 (1/2, 2/2)
```

##### Layer 5: Event Logging

```typescript
type CardEventType =
  | 'card_viewed'              // 카드 뷰포트 진입
  | 'card_clicked'             // 카드 클릭
  | 'card_prep_clicked'        // [준비하기] 클릭
  | 'card_start_clicked'       // [바로 시작] 클릭
  | 'card_state_changed'       // 상태 전환
  | 'card_urgent_triggered'    // 긴급 상태 전환
  | 'card_pulse_shown';        // 펄스 애니메이션 표시

interface CardEventMetadata {
  meetingId: string;
  companyName: string;
  meetingNumber: number;
  minutesUntilMeeting: number;
  cardState: 'pending' | 'urgent' | 'ready' | 'live' | 'skipped';
  hasUnconfirmedItems: boolean;
  suggestedQuestionCount: number;
  position: number;  // 목록 내 위치
}
```

##### 핵심 지표 (Part 2)

```typescript
const part2Metrics = {
  // Today 화면 효과성
  avgScanTime: avg(session_duration where screen === 'today'),
  // 목표: < 10초

  urgentClearRate: count(urgent_completed) / count(urgent_shown),
  // 목표: > 80%

  returnRate: count(today_screen_viewed) per day,
  // 목표: 3-5회

  // 미팅 카드 전환율
  prepClickRate: count(card_prep_clicked) / count(card_viewed),
  // 목표: > 70%

  skipRate: count(card_start_clicked) / count(card_viewed),
  // 목표: < 30%

  urgentPrepRate: count(urgent → ready) / count(card_urgent_triggered),
  // 목표: > 60%
};
```

### 6.5 Part 3: 미팅 중 (5-Layer Framework)

> **핵심 철학**: "투명 인간처럼. 필요할 때만 나타나서 한 마디 하고 사라짐"
> **성공 지표**: 미팅 중 인지 부하 최소화 + 핵심 정보 누락 방지

#### Part 3.1: 자동 시작 (Zero-UI Activation)

**맥락**: 사용자가 Zoom/Meet/Teams를 실행하면 Onno HUD가 자동으로 활성화

```
┌─────────────────────────────────────────────────────────────────┐
│                    Part 3.1: 자동 시작                           │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  ① Trigger (계기)                                               │
│     └─ 외부: Zoom/Meet/Teams 앱 실행 감지                        │
│                                                                 │
│  ② Question (사용자 의문)                                        │
│     └─ "오, Onno가 자동으로 켜졌네?"                              │
│     └─ (의문이 아님 - 무의식적 인지)                              │
│                                                                 │
│  ③ Action (행동)                                                │
│     └─ 없음 (Zero-click Activation)                             │
│     └─ 사용자는 회의에 집중                                       │
│                                                                 │
│  ④ Result (결과)                                                │
│     [우측 상단에 HUD 조용히 등장]                                 │
│     ┌─────────────────────────────┐                              │
│     │ 🟢  00:00  ●REC             │  ← 녹음 시작 표시            │
│     └─────────────────────────────┘                              │
│     + 부드러운 fade-in (300ms)                                   │
│     + 녹음 시작 사운드 (선택적)                                   │
│                                                                 │
│  ⑤ Next (다음 단계)                                             │
│     └─ Part 3.2: HUD Idle 상태 유지                              │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

**자동 감지 로직**:
```typescript
// 앱 감지 흐름
detectMeetingApp():
├─ Zoom 실행 감지 (window title 패턴)
├─ 캘린더 API 조회: "10:00 A사 미팅 있음"
├─ 미팅 자동 매칭 (회사명 + 시간대)
├─ 매칭 성공 시:
│   └─ HUD 자동 실행 + 과거 미팅 맥락 로딩
└─ 매칭 실패 시:
    └─ "새 미팅 시작" 모드 (회사명 입력 프롬프트)
```

**엣지 케이스 처리**:
```
Case 1: 캘린더에 없는 미팅
├─ HUD 최초 실행 시 컴팩트 프롬프트 표시
├─ "새 미팅이 감지되었어요. 이름을 입력해주세요"
├─ 자동 제안: 최근 대화 회사명 or "새 회사"
└─ 5초 후 자동 숨김 (입력 없으면 "미정" 처리)

Case 2: 같은 시간에 여러 미팅
├─ 미팅 선택 드롭다운 표시
├─ 가장 최근 상호작용 회사 상단 배치
└─ 원터치 선택 후 시작

Case 3: 앱 감지 실패 (보안 설정 등)
├─ 수동 시작 버튼 제공 (Today 화면)
├─ "회의 시작" 플로팅 버튼
└─ 접근성 권한 안내 (필요시)
```

**이벤트 로깅**:
```typescript
meeting_auto_started: {
  meetingId: string,
  detectedApp: 'zoom' | 'meet' | 'teams' | 'manual',
  matchConfidence: number,  // 0-1
  matchedFromCalendar: boolean,
  timeToActivation: number  // ms (앱 실행 → HUD 표시)
}
```

#### Part 3.2: HUD Idle 상태 (Ambient Presence)

**맥락**: 미팅 진행 중 99%의 시간을 차지하는 대기 상태

```
┌─────────────────────────────────────────────────────────────────┐
│                    Part 3.2: HUD Idle 상태                       │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  ① Trigger (계기)                                               │
│     └─ 내부: 미팅 시작 후 자동 전환                               │
│     └─ 외부: 알림 닫힘 후 복귀                                    │
│                                                                 │
│  ② Question (사용자 의문)                                        │
│     └─ (없음 - 의식하지 않음)                                     │
│     └─ "저게 뭐지?" → "아 녹음 중이구나" (1초 내 해소)            │
│                                                                 │
│  ③ Action (행동)                                                │
│     └─ 없음 (시스템이 백그라운드 동작)                            │
│     └─ 선택적: 클릭 시 확장 (수동 조회)                           │
│                                                                 │
│  ④ Result (결과)                                                │
│     [화면 우측 상단 - 시선 방해 최소화]                           │
│     ┌─────────────────────────────────┐                         │
│     │ 🟢  23:45  [2]                  │  300 × 60px             │
│     └─────────────────────────────────┘                         │
│       ↑      ↑      ↑                                           │
│       |      |      └─ 누적 인사이트 (클릭 시 조회)               │
│       |      └─ 경과 시간 (실시간)                               │
│       └─ 청취 중 표시 (부드러운 펄스)                             │
│                                                                 │
│  ⑤ Next (다음 단계)                                             │
│     └─ [클릭 시] Part 3.2a: 수동 확장 모드                        │
│     └─ [갭 감지 시] Part 3.3: 알림 발생                          │
│     └─ [회의 종료 시] Part 4: 미팅 후                             │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

**백그라운드 AI 처리 (사용자 인지 없음)**:
```
실시간 파이프라인 (매 5초):
├─ STT: 음성 → 텍스트 (Deepgram)
├─ 화자 분리: 누가 말하고 있는지
├─ 인사이트 추출:
│   ├─ 숫자/지표 감지 (MAU, ARR 등)
│   ├─ 결정 8요소 추적
│   ├─ 키워드 매칭 (질문 vs 답변)
│   └─ 감정 분석 (긍정/부정/중립)
├─ 갭 분석:
│   ├─ 예상 답변 vs 실제 답변 비교
│   ├─ 누락 요소 감지
│   └─ 대화 흐름 컨텍스트 분석
└─ 알림 판단:
    ├─ Level 결정 (1/2/3)
    ├─ 타이밍 결정 (지금 vs 대화 쉬는 타이밍)
    └─ 메시지 생성
```

**Idle → Expand (수동 확장)**:
```
┌─────────────────────────────────────────────────────────────────┐
│  [사용자가 HUD 클릭]                                             │
│                                                                 │
│  확장된 상태 (300 × 400px):                                      │
│  ┌─────────────────────────────────────┐                        │
│  │ 🟢  23:45                           │                        │
│  ├─────────────────────────────────────┤                        │
│  │ 📊 수집된 정보                       │                        │
│  │                                     │                        │
│  │ • MAU: 10만 (10:05)                 │                        │
│  │ • MRR: $50K (10:12)                 │                        │
│  │ • Churn: 2.5% (10:18)               │                        │
│  │                                     │                        │
│  ├─────────────────────────────────────┤                        │
│  │ 💡 참고 사항 (2)                     │                        │
│  │                                     │                        │
│  │ • 경쟁사 B사 정보 있음               │                        │
│  │ • 용어 CAC 설명 준비됨               │                        │
│  │                                     │                        │
│  │ [접기]                              │                        │
│  └─────────────────────────────────────┘                        │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

**디자인 최적화 원칙**:
```
1. 투명도 전략:
   ├─ 기본: 80% opacity (배경 살짝 비침)
   ├─ Hover: 100% opacity (주목 시 선명)
   └─ 비활성 5분+: 60% opacity (더 투명)

2. 위치 전략:
   ├─ 우측 상단 기본 (시선 흐름 외곽)
   ├─ 드래그 가능 (사용자 커스터마이징)
   ├─ 마지막 위치 기억
   └─ 화면 모서리 스냅

3. 인터럽션 최소화:
   ├─ 소리 없음 (Idle 상태)
   ├─ 애니메이션 최소화 (펄스만)
   ├─ 숫자 변경 시 부드러운 트랜지션
   └─ 갑작스러운 크기 변화 없음
```

#### Part 3.3: 알림 발생 (Intelligent Interruption)

**맥락**: AI가 중요한 갭을 감지하여 적절한 타이밍에 알림

```
┌─────────────────────────────────────────────────────────────────┐
│                    Part 3.3: 알림 발생                           │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  ① Trigger (계기)                                               │
│     └─ 시스템: AI 갭 감지 (2개+ 조건 충족)                        │
│        • Critical Gap: 딜 브레이커급 누락                        │
│        • Recovery Cost: 놓치면 재회의 필요                       │
│        • Time Window: 지금 아니면 타이밍 놓침                     │
│        • Flow Match: 대화 흐름과 자연스러움                       │
│                                                                 │
│  ② Question (사용자 의문)                                        │
│     └─ Level 3: "이거 위험한 건가?" (즉각 주의)                   │
│     └─ Level 2: "뭐가 빠졌다고?" (관심 유발)                      │
│     └─ Level 1: "나중에 봐야겠네" (참고 수준)                     │
│                                                                 │
│  ③ Action (행동)                                                │
│     └─ 읽기 (2-5초)                                             │
│     └─ 버튼 클릭 or 무시                                         │
│                                                                 │
│  ④ Result (결과) - Level별 상이                                 │
│     └─ [아래 상세 화면 참조]                                     │
│                                                                 │
│  ⑤ Next (다음 단계)                                             │
│     └─ [물어보기] → Part 3.4a: 질문 수행                         │
│     └─ [나중에/무시] → Part 3.2: Idle 복귀                       │
│     └─ [타임아웃 10초] → Part 3.2: Idle 복귀                      │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

**Level 2 알림 (가장 흔함 - 9%)**:
```
┌─────────────────────────────────────────────────────────────────┐
│                                                                 │
│  ┌───────────────────────────────────────┐ ← 375 × 180px       │
│  │ ⚠️ 확인 필요                           │    노란 테두리 2px    │
│  │                                       │    fade-in 300ms     │
│  │ 예산 승인 프로세스 미확인               │                     │
│  │                                       │                     │
│  │ ┌─────────────────────────────────┐   │ ← 제안 질문 박스     │
│  │ │ 💡 제안 질문:                    │   │    파란 배경         │
│  │ │ "승인은 누가 하시나요?"          │   │                     │
│  │ └─────────────────────────────────┘   │                     │
│  │                                       │                     │
│  │  [🎤 물어보기]      [나중에]          │ ← 듀얼 CTA           │
│  └───────────────────────────────────────┘                     │
│                                                                 │
│  디자인 원칙:                                                    │
│  • 효과음 없음 (회의 방해 X)                                     │
│  • 진동 없음                                                     │
│  • 10초 후 자동 축소 (나중에 처리)                               │
│  • 우측 상단 위치 (대화 집중 영역 외)                            │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

**Level 3 긴급 알림 (1% - 딜 브레이커)**:
```
┌─────────────────────────────────────────────────────────────────┐
│                                                                 │
│  ┌───────────────────────────────────────┐ ← 375 × 250px       │
│  │ 🚨 치명적 누락                         │    빨간 테두리 2px    │
│  │                                       │    진동 애니메이션    │
│  │ 계약 해지 조건 논의 안 됨              │                     │
│  │                                       │                     │
│  │ ⚠️ 왜 위험한가요?                      │ ← 위험 설명         │
│  │ • 법적 분쟁 가능성                     │                     │
│  │ • 과거 2건 유사 사례                   │                     │
│  │                                       │                     │
│  │ ┌─────────────────────────────────┐   │                     │
│  │ │ 💡 "해지 조건은 어떻게 되나요?"  │   │                     │
│  │ └─────────────────────────────────┘   │                     │
│  │                                       │                     │
│  │  [🚨 지금 확인 →]    [위험 감수]       │ ← 강조된 CTA        │
│  └───────────────────────────────────────┘                     │
│                                                                 │
│  특수 처리:                                                      │
│  • 효과음: "띵!" (1회, 낮은 볼륨)                                │
│  • 화면 중앙 약간 위 배치 (주목도 증가)                          │
│  • 타임아웃 없음 (반드시 선택 필요)                              │
│  • [위험 감수] 시 사유 입력 (선택)                               │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

**Level 1 정보 알림 (90% - 배지만)**:
```
┌─────────────────────────────────────────────────────────────────┐
│                                                                 │
│  Idle 상태에서 배지 숫자만 증가:                                 │
│  ┌─────────────────────────────────┐                            │
│  │ 🟢  23:45  [3] ⚠️               │ ← 작은 경고 아이콘 추가     │
│  └─────────────────────────────────┘                            │
│                                                                 │
│  클릭 시 확장:                                                   │
│  ┌─────────────────────────────────┐                            │
│  │ 🟢  23:45                       │                            │
│  ├─────────────────────────────────┤                            │
│  │ 💡 참고 사항 (3)                 │                            │
│  │                                 │                            │
│  │ • 유사 딜 3건 참조 가능           │                            │
│  │ • 경쟁사 B사 정보 있음           │                            │
│  │ • 용어 CAC 설명 준비됨           │                            │
│  │                                 │                            │
│  │ [닫기]                          │                            │
│  └─────────────────────────────────┘                            │
│                                                                 │
│  특징:                                                           │
│  • 인터럽션 없음 (사용자 주도 조회)                              │
│  • 회의 종료 후 자동 정리됨                                      │
│  • 과거 미팅과 연결점 표시                                       │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

**알림 타이밍 최적화 (Flow-Aware)**:
```typescript
// 대화 흐름 분석 기반 최적 타이밍 결정
function findOptimalAlertTiming(conversation: Transcript[]): boolean {
  const recentUtterances = conversation.slice(-5);

  // 좋은 타이밍
  const goodTiming = [
    // 1. 침묵 2초 이상 (자연스러운 전환점)
    silenceDetected(2000),
    // 2. 화제 전환 감지 ("다음으로", "그러면")
    topicTransitionDetected(recentUtterances),
    // 3. 질문 완료 직후 (답변 전)
    questionJustAsked(recentUtterances),
    // 4. 숫자/지표 언급 직후 (확인 기회)
    metricJustMentioned(recentUtterances)
  ];

  // 나쁜 타이밍 (지연 필요)
  const badTiming = [
    // 1. 상대방이 말하는 중
    opponentSpeaking(),
    // 2. 감정적 대화 진행 중
    emotionalConversation(recentUtterances),
    // 3. 복잡한 설명 진행 중
    complexExplanationInProgress(recentUtterances)
  ];

  if (badTiming.some(Boolean)) return false;
  return goodTiming.some(Boolean);
}
```

#### Part 3.4: 사용자 응답 (Action Completion)

**맥락**: 알림에 대한 사용자 반응 처리

```
┌─────────────────────────────────────────────────────────────────┐
│                    Part 3.4: 사용자 응답                         │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  Path A: [물어보기] 클릭                                         │
│  ─────────────────────────────────────────                      │
│  ① Trigger: 버튼 클릭                                           │
│  ② Question: "이걸 어떻게 물어보지?"                             │
│  ③ Action: 제안된 질문 참고하여 실제 질문                        │
│  ④ Result:                                                      │
│     ┌─────────────────────────────────┐                         │
│     │ 🟢  24:15  ✓                    │ ← 체크 표시             │
│     └─────────────────────────────────┘                         │
│     + "질문 중..." 인디케이터 (3초)                              │
│     + 답변 감지 시 자동 수집                                    │
│  ⑤ Next: Part 3.2로 복귀 (Idle)                                 │
│                                                                 │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  Path B: [나중에] 클릭 or 타임아웃                               │
│  ─────────────────────────────────────────                      │
│  ① Trigger: 버튼 클릭 or 10초 경과                              │
│  ② Question: 없음 (명시적 연기)                                 │
│  ③ Action: 없음                                                 │
│  ④ Result:                                                      │
│     ┌─────────────────────────────────┐                         │
│     │ 🟢  24:15  [3]                  │ ← 배지 +1               │
│     └─────────────────────────────────┘                         │
│     + 연기된 항목은 배지에 포함                                  │
│     + 회의 후 리마인더에 표시                                    │
│  ⑤ Next: Part 3.2로 복귀 (Idle)                                 │
│                                                                 │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  Path C: [위험 감수] 클릭 (Level 3 전용)                         │
│  ─────────────────────────────────────────                      │
│  ① Trigger: 버튼 클릭                                           │
│  ② Question: "정말 괜찮을까?"                                   │
│  ③ Action: 확인 클릭 (선택적 사유 입력)                         │
│  ④ Result:                                                      │
│     ┌─────────────────────────────────┐                         │
│     │ 🟢  24:15  [!]                  │ ← 경고 배지 유지        │
│     └─────────────────────────────────┘                         │
│     + 위험 감수 기록 저장                                        │
│     + 회의 종료 후 다시 강조                                     │
│  ⑤ Next: Part 3.2로 복귀 (Idle)                                 │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

**질문 수행 후 피드백 플로우**:
```
[물어보기] 클릭
     ↓
┌─────────────────────────────────┐
│ 💬 질문 중...                   │  ← 일시적 상태 (3초)
│                                 │
│ "승인은 누가 하시나요?"         │  ← 제안 질문 표시
│                                 │
│ [복사됨 ✓]                      │  ← 클립보드 복사 (선택)
└─────────────────────────────────┘
     ↓ (3초 후)
[Idle 상태 복귀]
     ↓ (실시간 전사 분석)
[답변 감지 시]
     ↓
┌─────────────────────────────────┐
│ ✓ 답변 수집됨                   │  ← 토스트 알림 (2초)
│                                 │
│ "법무팀 최종 승인"              │  ← 캡처된 답변 요약
└─────────────────────────────────┘
```

**연기된 항목 처리**:
```typescript
// 연기된 알림은 미팅 종료 시 다시 표면화
interface DeferredAlert {
  id: string;
  originalAlert: Alert;
  deferredAt: Date;
  reason: 'timeout' | 'later_clicked';
  wasResolved: boolean;  // 나중에 자연스럽게 해결됐는지
}

// 미팅 종료 시 처리
onMeetingEnd():
├─ 미해결 연기 알림 필터링
├─ 자연스럽게 해결된 항목 제외 (전사 분석)
├─ 남은 항목 → 확정 모달에 표시
└─ "확인 안 된 항목" 섹션으로 이동
```

#### Part 3 전체 상태 머신

```
                    ┌─────────────┐
                    │  앱 감지    │
                    └──────┬──────┘
                           ↓
                    ┌─────────────┐
              ┌────→│ 3.1 자동시작 │
              │     └──────┬──────┘
              │            ↓
              │     ┌─────────────┐
              │     │ 3.2 Idle    │←──────────────┐
              │     └──────┬──────┘               │
              │            ↓                      │
              │     [갭 감지?]                    │
              │      │      │                     │
              │    Yes      No ───────────────────┤
              │      ↓                            │
              │     ┌─────────────┐               │
              │     │ 3.3 알림    │               │
              │     └──────┬──────┘               │
              │            ↓                      │
              │     [사용자 선택?]                │
              │      ├──────┼──────┐              │
              │   물어보기 나중에  위험감수        │
              │      ↓      ↓      ↓              │
              │     ┌─────────────┐               │
              │     │ 3.4 응답    │───────────────┘
              │     └──────┬──────┘
              │            ↓
              │     [회의 종료?]
              │      │      │
              │    Yes      No ───────────────────┘
              │      ↓
              │     ┌─────────────┐
              └─────│ Part 4 시작 │
                    └─────────────┘
```

#### Part 3 이벤트 로깅

```typescript
// Part 3.1: 자동 시작
type MeetingStartEvent = {
  event: 'meeting_auto_started' | 'meeting_manual_started';
  meetingId: string;
  detectedApp: 'zoom' | 'meet' | 'teams' | 'manual';
  matchConfidence: number;
  calendarMatched: boolean;
  prepCompleted: boolean;  // Part 2에서 준비 완료 여부
};

// Part 3.2: Idle 상태
type HUDIdleEvent = {
  event: 'hud_idle_entered' | 'hud_manual_expanded' | 'hud_manual_collapsed';
  meetingId: string;
  elapsedTime: number;  // 미팅 경과 시간
  insightCount: number;
  infoAlertCount: number;
};

// Part 3.3: 알림 발생
type AlertEvent = {
  event: 'alert_shown' | 'alert_dismissed' | 'alert_timeout';
  alertId: string;
  alertLevel: 1 | 2 | 3;
  alertType: string;  // 'missing_risk', 'no_action', 'legal_issue' 등
  triggerConditions: string[];  // 어떤 조건들이 충족됐는지
  conversationContext: string;  // 대화 맥락 요약
  timeInMeeting: number;
  displayDuration: number;  // 표시된 시간
};

// Part 3.4: 사용자 응답
type AlertResponseEvent = {
  event: 'alert_ask_clicked' | 'alert_later_clicked' | 'alert_risk_accepted';
  alertId: string;
  alertLevel: 1 | 2 | 3;
  responseTime: number;  // 알림 표시 → 클릭까지 시간
  questionAsked: boolean;  // 실제로 질문했는지 (전사 분석)
  answerReceived: boolean;  // 답변 받았는지
  riskAcceptReason?: string;  // Level 3 위험 감수 사유
};

// Part 3 종합: 미팅 종료
type MeetingEndEvent = {
  event: 'meeting_ended';
  meetingId: string;
  duration: number;  // 총 미팅 시간 (초)
  totalAlerts: { level1: number; level2: number; level3: number };
  alertsActioned: number;  // 물어보기 클릭한 횟수
  alertsDeferred: number;  // 나중에/타임아웃 횟수
  risksAccepted: number;  // 위험 감수 횟수
  insightsCollected: number;  // 수집된 인사이트 수
  decisionsTracked: number;  // 추적된 결정 요소 수
  gapsIdentified: number;  // 감지된 갭 수
  gapsResolved: number;  // 해결된 갭 수
};
```

#### Part 3 핵심 성과 지표

```typescript
const part3Metrics = {
  // 자동 시작 효과성
  autoStartRate: count(meeting_auto_started) / count(all_meetings),
  // 목표: > 90%

  matchAccuracy: count(calendar_matched) / count(meeting_auto_started),
  // 목표: > 85%

  // HUD 비간섭성
  avgIdleRatio: sum(idle_time) / sum(meeting_duration),
  // 목표: > 95% (알림은 5% 미만)

  manualExpandRate: count(hud_manual_expanded) / count(meetings),
  // 목표: 2-5회/미팅 (너무 적으면 미사용, 너무 많으면 방해)

  // 알림 효과성
  alertActionRate: count(alert_ask_clicked) / count(alert_shown),
  // 목표: > 50% (Level 2/3)

  alertTimeoutRate: count(alert_timeout) / count(alert_shown),
  // 목표: < 20%

  level3AcceptRate: count(alert_risk_accepted) / count(level3_alerts),
  // 목표: < 10% (너무 높으면 알림이 의미 없음)

  // 질문 효과성
  questionAskedRate: count(question_asked) / count(alert_ask_clicked),
  // 목표: > 80% (클릭했으면 실제로 질문해야)

  answerReceivedRate: count(answer_received) / count(question_asked),
  // 목표: > 90%

  // 갭 해결률
  gapResolutionRate: count(gaps_resolved) / count(gaps_identified),
  // 목표: > 70%

  // 미팅 중 인지 부하
  avgAlertDisplayTime: avg(display_duration where alert_level >= 2),
  // 목표: < 5초 (빠른 판단)

  avgResponseTime: avg(response_time where alert_level >= 2),
  // 목표: < 3초 (즉각 반응)
};
```

### 6.6 Part 4: 미팅 후 (5-Layer Framework)

> **핵심 철학**: "미팅이 끝나면 할 일도 끝나야 한다"
> 사용자가 확정 버튼 하나로 모든 후속 작업이 자동화되는 경험

#### Part 4.1: 자동 전환 (Seamless Transition)

##### Layer 1: Strategy & JTBD

```
Primary Job:
"미팅이 끝났을 때, 복잡한 정리 작업 없이 결정된 사항만 빠르게 확정하고 싶다"

Functional Outcome:
├─ 미팅 종료 자동 감지 → 확정 모달 즉시 표시
├─ AI가 추출한 결정/액션 확인만 하면 됨
├─ 빈칸만 채우면 자동 저장
└─ 총 소요 시간 < 5분

Emotional Outcome:
├─ "끝났다!" 해방감 (Closure)
├─ "AI가 다 해줬네" 편안함
├─ "놓친 게 없나?" 불안 해소
└─ "팀에 공유됐다" 안도감

Social Outcome:
├─ 팀에 빠르게 공유 → 신뢰 향상
├─ 정확한 기록 → 전문성 인정
└─ 후속 액션 명확 → 협업 원활
```

##### Layer 2: Behavioral Design (Fogg Model)

```
Motivation (동기):
├─ Hope: "5분만 투자하면 모든 정리 끝"
├─ Fear: "확정 안 하면 중요한 결정 잊어버림"
├─ Pleasure: 체크리스트 완료의 성취감 (Completion Effect)
└─ Social: "팀원들이 기다리고 있음"

Ability (능력):
├─ Physical: 클릭 5번 이내로 완료
├─ Cognitive: AI가 90% 채워둠 (빈칸 2-3개만)
├─ Time: 평균 3분, 최대 5분
├─ Money: 무료 (Notion 통합)
└─ Routine: 미팅 종료 = 확정 (습관화)

Trigger (트리거):
├─ External: 미팅 종료 감지 → 모달 자동 표시
├─ Internal: "끝나기 전에 정리해야지"
├─ Hot Trigger: 미팅 직후 = 기억 생생할 때
└─ Spark: 시간 표시 "(5분)" → 부담 최소화
```

##### Layer 3: Structure & Logic

```
자동 전환 시퀀스:

[Part 3 HUD Idle]
       │
       ▼
[미팅 종료 감지]
├─ Zoom: 통화 종료 이벤트
├─ Meet: 탭 URL 변경
└─ Teams: 회의 종료 API
       │
       ▼
[0.5초 딜레이] ← 갑작스러움 방지
       │
       ▼
[HUD → 확정 모달 전환]
├─ 부드러운 모핑 애니메이션
├─ 같은 위치에서 확장
└─ 전환 시간: 400ms

전환 조건:
├─ 미팅 시간 > 5분 (짧은 통화 제외)
├─ 인사이트 추출 > 0개 (빈 미팅 제외)
└─ 사용자 설정 ON (기본값: ON)
```

#### Part 4.2: 확정 모달 (Confirmation Modal)

##### Layer 1: Strategy & JTBD

```
Primary Job:
"AI가 추출한 결정/액션이 맞는지 확인하고, 빠진 정보만 채우고 싶다"

Success Criteria:
├─ 읽기: 30초 (AI 추출 내용 스캔)
├─ 채우기: 2분 (빈칸 2-3개)
├─ 확정: 클릭 1번
└─ 총합: 3분 이내

Information Architecture:
┌─────────────────────────────────────┐
│ Header: 방금 회의 정리 (5분)        │ ← 시간 앵커
├─────────────────────────────────────┤
│ ✅ 결정 사항 (완료됨)               │ ← 성취감
│ ⚠️ 빈칸 채우기 (2개)                │ ← 할 일 명확
│ 📋 인사이트 (자동 추출)             │ ← 보너스
│ 💾 저장 옵션 (Notion)               │ ← 통합
├─────────────────────────────────────┤
│ [확정 완료 →]                       │ ← CTA
└─────────────────────────────────────┘
```

##### Layer 2: Behavioral Design

```
Cognitive Load Optimization:
├─ 순서 효과: 완료된 것 먼저 → 성취감 프라이밍
├─ 목표 그래디언트: "2개만 채우면 끝" → 동기 상승
├─ 기본값: AI 추정치 미리 입력 → 확인만 하면 됨
└─ 선택 최소화: 드롭다운 > 자유 입력

Progress Indication:
├─ 상단: 예상 시간 "(5분)" → 부담 최소화
├─ 하단: "예상 시간: 2분 남음" → 진행 피드백
└─ 섹션별: ✅ 완료 표시 → 성취감

Completion Effect (Zeigarnik):
├─ 미완료 빈칸 = 불편함 유발
├─ 빈칸 채우기 = 해소 쾌감
└─ 전체 완료 = "끝났다!" 해방감
```

##### Layer 3: Structure & Logic

```
확정 모달 상태 머신:

[모달 표시]
    │
    ▼
┌─────────────┐
│ Reviewing   │ ← AI 추출 내용 확인
└──────┬──────┘
       │ [빈칸 있음?]
       ├─ No → [확정 가능]
       │
       ▼ Yes
┌─────────────┐
│ Filling     │ ← 빈칸 입력 중
└──────┬──────┘
       │ [모든 빈칸 채움?]
       ├─ No → 계속 Filling
       │
       ▼ Yes
┌─────────────┐
│ Ready       │ ← 확정 버튼 활성화
└──────┬──────┘
       │ [확정 완료 클릭]
       │
       ▼
┌─────────────┐
│ Saving      │ ← 저장 중 (로딩)
└──────┬──────┘
       │
       ▼
┌─────────────┐
│ Complete    │ ← 완료 메시지
└─────────────┘

빈칸 타입별 입력 최적화:
├─ 담당자: 드롭다운 (참석자 목록)
├─ 기한: 날짜 피커 (오늘+7일 기본값)
├─ 금액: 숫자 입력 + 단위 자동 (만원/억)
└─ 자유 텍스트: AI 추정 제안 + 수정
```

##### Layer 4: Edge Cases

```
Case 1: 빈칸 없이 확정
├─ AI가 모든 정보 추출 성공
├─ 사용자: 확인 후 바로 확정
└─ UX: "AI가 완벽하게 정리했어요!" 토스트

Case 2: 확정 없이 나가기
├─ X 버튼 또는 ESC
├─ 확인 모달: "저장하지 않고 나갈까요?"
├─ 옵션: [나중에 정리] [계속 정리]
├─ "나중에 정리" 선택 시:
│   └─ Today 화면 "긴급" 섹션에 추가
└─ 24시간 후 미확정 → 푸시 알림

Case 3: 네트워크 오류
├─ 로컬 임시 저장 (IndexedDB)
├─ "연결 재시도 중..." 표시
├─ 3회 실패 → "오프라인 저장됨, 나중에 동기화"
└─ 재접속 시 자동 동기화

Case 4: 미팅 시간 < 5분
├─ 확정 모달 표시 안 함
├─ Today 화면에 "짧은 통화" 카드
└─ "정리할 내용이 있나요?" 선택적

Case 5: 인사이트 0개
├─ AI 추출 실패 또는 빈 미팅
├─ 간소화 모달: "이 미팅 건너뛸까요?"
├─ 옵션: [직접 입력] [건너뛰기]
└─ 건너뛰기 → 기록 안 함

Case 6: 연속 미팅
├─ 다음 미팅 5분 이내
├─ 압축 모달: "빠른 확정" 모드
├─ 결정 1개 + 액션 1개만 표시
└─ "자세한 정리는 나중에" 옵션
```

#### Part 4.3: 통합 자동 반영 (Auto Integration)

##### Layer 1: Strategy & JTBD

```
Primary Job:
"확정 버튼 하나로 모든 시스템에 자동 반영되어,
 후속 작업을 따로 하지 않아도 되고 싶다"

Integration Flow:
[확정 완료] 클릭
    │
    ▼
┌─────────────────────────────────────────┐
│ 자동 실행 (사용자 개입 없음):          │
│ ├─ ✅ Notion 회의록 페이지 생성         │
│ ├─ ✅ 결정/액션 구조화 저장             │
│ ├─ ⏳ Salesforce 딜 단계 업데이트 (향후)│
│ ├─ ⏳ Slack 채널 요약 공유 (향후)       │
│ └─ ⏳ Calendar 팔로업 일정 추가 (향후)  │
└─────────────────────────────────────────┘
    │
    ▼
[완료 토스트] "Notion에 저장됐어요!"
    │
    ▼
[Today 화면으로 자동 전환]
```

##### Layer 2: Behavioral Design

```
Zero-Effort Integration:
├─ 사용자 행동: 체크박스 선택 + 확정 클릭
├─ 시스템 행동: 모든 통합 백그라운드 처리
└─ 결과: "아무것도 안 했는데 다 됐네"

Trust Building:
├─ 투명성: 무엇이 저장되는지 미리 표시
├─ 제어권: 각 통합 ON/OFF 선택
├─ 확인: 저장 완료 후 "Notion에서 보기" 링크
└─ 복구: 잘못됐으면 Notion에서 직접 수정

Default Effect 활용:
├─ Notion 저장: 기본 ON (연결 시)
├─ 체크박스 위치: 눈에 잘 띄는 곳
└─ 연결 안 됨: "30초면 연결 완료!" 넛지
```

##### Layer 3: Notion 통합 상세 플로우

```
Notion 저장 옵션 UI:

┌─────────────────────────────────────────┐
│ 💾 저장 옵션                             │
│                                          │
│ ┌────────────────────────────────────┐  │
│ │ ☑ Notion에 저장하기                 │  │
│ │                                     │  │
│ │ [연결됨 상태]                       │  │
│ │ ✅ Notion 연결됨                     │  │
│ │ 📁 민수의 워크스페이스 > Onno 회의록 │  │
│ │                                     │  │
│ │ [미연결 상태]                       │  │
│ │ [🔗 Notion 연결하기]                │  │
│ │ "30초면 연결 완료!"                 │  │
│ └────────────────────────────────────┘  │
└─────────────────────────────────────────┘

Notion 연결 플로우:

[Notion 연결하기 클릭]
       │
       ▼
[OAuth 팝업] ← 새 창
├─ Notion 로그인 (필요시)
├─ 워크스페이스 선택
└─ 권한 승인 (페이지 읽기/쓰기)
       │
       ▼
[팝업 자동 닫힘]
       │
       ▼
[연결 성공 UI]
├─ ✅ 체크 아이콘 + 초록색
├─ 워크스페이스 이름 표시
└─ 저장 위치 자동 설정
```

##### Layer 4: 완료 화면 & 전환

```
저장 완료 시퀀스:

[확정 완료 클릭]
       │
       ▼
[저장 중 로딩] (1-2초)
├─ 버튼: "저장 중..." + 스피너
├─ 프로그레스 바 (선택적)
└─ 배경: 클릭 불가
       │
       ▼
[완료 애니메이션]
├─ 체크마크 팝 애니메이션
├─ Confetti (선택적)
└─ 햅틱 피드백 (모바일)
       │
       ▼
[완료 메시지] (2초)
┌─────────────────────────────────────────┐
│  🎉 저장 완료!                           │
│                                          │
│  ✅ 결정/액션 확정됨 (3건)               │
│  ✅ Notion에 저장됨                       │
│     → "A사 2차 미팅" 페이지 생성          │
│                                          │
│  [Notion에서 보기]  [오늘 화면으로]       │
│                                          │
└─────────────────────────────────────────┘
       │
       ▼ [3초 후 또는 버튼 클릭]
[Today 화면으로 자동 전환]
├─ 확정된 미팅: "완료" 배지 추가
└─ 다음 미팅 카드 하이라이트
```

#### Part 4 전체 상태 머신

```
┌─────────────────────────────────────────────────────────────┐
│                    Part 4: 미팅 후                          │
└─────────────────────────────────────────────────────────────┘

[Part 3 미팅 종료]
       │
       ▼
┌──────────────┐
│ 4.1 자동 전환 │──────────────────────────────┐
└──────┬───────┘                               │
       │                                       │
       ▼                                       │
┌──────────────┐     [X 클릭]     ┌──────────────┐
│ 4.2 확정 모달 │────────────────→│ 나가기 확인   │
└──────┬───────┘                 └──────┬───────┘
       │                                │
       │ [확정 완료]                    │ [나중에 정리]
       ▼                                ▼
┌──────────────┐                 ┌──────────────┐
│ 4.3 저장 중   │                │ Today 긴급   │
└──────┬───────┘                 └──────────────┘
       │
       ▼
┌──────────────┐
│ 4.4 완료     │
└──────┬───────┘
       │
       ▼
[Today 화면 복귀]
```

#### Part 4 이벤트 로깅

```typescript
// Part 4.1: 자동 전환 이벤트
type TransitionEventType =
  | 'meeting_ended'              // 미팅 종료 감지
  | 'confirmation_modal_shown'   // 확정 모달 표시
  | 'confirmation_modal_skipped' // 확정 모달 건너뜀 (짧은 미팅)
  | 'modal_auto_transition'      // 자동 전환 완료
  | 'transition_cancelled';      // 전환 취소 (X 클릭)

interface TransitionMetadata {
  meetingId: string;
  meetingDuration: number;      // 초 단위
  platform: 'zoom' | 'meet' | 'teams';
  insightCount: number;         // AI 추출 인사이트 수
  transitionDelay: number;      // 전환까지 딜레이 (ms)
}

// Part 4.2: 확정 모달 이벤트
type ConfirmationEventType =
  | 'modal_viewed'              // 모달 조회
  | 'decision_reviewed'         // 결정 사항 확인
  | 'gap_field_focused'         // 빈칸 입력 시작
  | 'gap_field_filled'          // 빈칸 입력 완료
  | 'gap_field_skipped'         // 빈칸 건너뜀
  | 'insight_expanded'          // 인사이트 더보기
  | 'insight_edited'            // 인사이트 수정
  | 'confirm_clicked'           // 확정 버튼 클릭
  | 'modal_abandoned'           // 모달 이탈 (확정 없이)
  | 'later_clicked';            // 나중에 정리 선택

interface ConfirmationMetadata {
  meetingId: string;
  totalDecisions: number;       // 결정 사항 수
  totalActions: number;         // 액션 수
  totalGaps: number;            // 빈칸 수
  gapsFilled: number;           // 채운 빈칸 수
  timeToConfirm: number;        // 모달 표시 → 확정까지 시간 (초)
  editsMade: number;            // AI 추출 내용 수정 횟수
}

// Part 4.3: 통합 저장 이벤트
type IntegrationEventType =
  | 'notion_checkbox_checked'   // Notion 체크박스 선택
  | 'notion_checkbox_unchecked' // Notion 체크박스 해제
  | 'notion_connect_clicked'    // Notion 연결하기 클릭
  | 'notion_oauth_started'      // OAuth 시작
  | 'notion_oauth_completed'    // OAuth 완료
  | 'notion_oauth_denied'       // OAuth 거부
  | 'notion_save_started'       // 저장 시작
  | 'notion_save_completed'     // 저장 완료
  | 'notion_save_failed'        // 저장 실패
  | 'notion_view_clicked'       // Notion에서 보기 클릭
  | 'completion_screen_shown'   // 완료 화면 표시
  | 'today_screen_returned';    // Today 화면 복귀

interface IntegrationMetadata {
  meetingId: string;
  notionConnected: boolean;     // Notion 연결 여부
  notionWorkspace?: string;     // 워크스페이스 이름
  saveLocation?: string;        // 저장 위치
  itemsSaved: {
    decisions: number;
    actions: number;
    insights: number;
  };
  saveDuration: number;         // 저장 소요 시간 (ms)
  retryCount: number;           // 재시도 횟수
}
```

#### Part 4 핵심 성과 지표

```typescript
const part4Metrics = {
  // 확정 완료율
  confirmationRate: count(confirm_clicked) / count(meeting_ended WHERE duration > 300),
  // 목표: > 85%

  // 평균 확정 시간
  avgConfirmationTime: avg(timeToConfirm WHERE confirm_clicked),
  // 목표: < 180초 (3분)

  // 빈칸 완료율
  gapFillRate: sum(gapsFilled) / sum(totalGaps),
  // 목표: > 90%

  // 이탈률
  abandonRate: count(modal_abandoned) / count(modal_viewed),
  // 목표: < 15%

  // Notion 저장률
  notionSaveRate: count(notion_save_completed) / count(confirm_clicked WHERE notion_connected),
  // 목표: > 95%

  // Notion 연결 전환율
  notionConnectRate: count(notion_oauth_completed) / count(notion_connect_clicked),
  // 목표: > 80%

  // AI 정확도 (수정 빈도 기반)
  aiAccuracyProxy: 1 - (avg(editsMade) / avg(totalDecisions + totalActions)),
  // 목표: > 85%

  // 완료 후 Notion 조회율
  notionViewRate: count(notion_view_clicked) / count(notion_save_completed),
  // 목표: > 30%

  // 나중에 정리 비율
  deferRate: count(later_clicked) / count(modal_abandoned + later_clicked),
  // 목표: > 70% (이탈보다 나중에 선택이 많아야)

  // 연속 미팅 빠른 확정률
  quickConfirmRate: count(confirm_clicked WHERE timeToConfirm < 60) / count(confirm_clicked WHERE nextMeetingIn < 300),
  // 목표: > 60%
};
```

---

### 6.7 Part 5: 검색 (5-Layer Framework)

> **사용자 여정**: 부가 기능 > 검색
> **핵심 가치**: "3개월 전 A사 CAC 얘기"를 5초 내에 찾기

#### Part 5 개요

검색은 Onno의 핵심 부가 기능으로, 사용자가 과거 미팅에서 논의된 내용을 빠르고 정확하게 찾을 수 있도록 합니다. 시맨틱 검색을 통해 자연어 쿼리를 이해하고, 결정 8요소 기반 구조화된 검색을 제공합니다.

```
┌─────────────────────────────────────────────────────────────────┐
│                    Part 5: 검색 플로우                           │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  ┌─────────────┐    ┌─────────────┐    ┌─────────────┐          │
│  │ 5.1 검색    │ →  │ 5.2 결과    │ →  │ 5.3 상세    │          │
│  │   진입      │    │   탐색      │    │   조회      │          │
│  └─────────────┘    └─────────────┘    └─────────────┘          │
│       │                  │                  │                   │
│       ↓                  ↓                  ↓                   │
│   검색어 입력      결과 스캔/필터     미팅 상세로 이동           │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

---

#### Part 5.1: 검색 진입 (Search Entry)

**화면**: 메인 콘솔 > 검색 탭

##### Layer 1: 전략 계층 (Strategy Layer)

```yaml
JTBD (Jobs to Be Done):
  primary: "과거 미팅에서 특정 내용을 빠르게 찾고 싶다"
  trigger: "김대표가 뭐라고 했더라?", "3개월 전 예산 얘기가..."
  outcome: "5초 내에 원하는 정보 발견"

Success_Metrics:
  - 검색 시작 → 결과 클릭: < 10초
  - 첫 검색 성공률: > 75%
  - 재검색 비율: < 30%
```

##### Layer 2: 행동 설계 계층 (Behavioral Design Layer)

```yaml
Fogg_Model_Analysis:
  motivation:
    current: "과거 정보가 필요한 상황"
    target: "Onno에서 검색하면 바로 찾을 수 있다는 확신"
    design:
      - 검색창 placeholder: "무엇이든 물어보세요 (예: 'A사 예산 얘기')"
      - 최근 검색어 표시로 진입 장벽 낮춤
      - 검색 성공 경험 학습 → 재사용률 증가

  ability:
    barriers:
      - "정확한 키워드를 모르겠다"
      - "언제 미팅이었는지 기억 안 남"
      - "검색 방법을 모르겠다"
    simplification:
      - 시맨틱 검색: 자연어 그대로 입력 가능
      - 시간 표현 이해: "지난달", "3개월 전"
      - 발화자 검색: "김대표가 말한"
      - 오타 허용: fuzzy matching

  trigger:
    internal:
      - "이거 전에 얘기한 적 있는데..."
      - "고객이 뭐라고 했더라?"
    external:
      - 다른 사람이 물어볼 때
      - 팔로업 미팅 준비 중
    design:
      - 빈 검색 화면에 추천 검색어 제공
      - "최근 언급된 키워드" 태그 표시
```

##### Layer 3: 구조/로직 계층 (Structure Layer)

```
검색 화면 구조:

┌──────────────────────────────────────────────────────────────┐
│  🔍 검색                                                      │
├──────────────────────────────────────────────────────────────┤
│                                                              │
│  ┌──────────────────────────────────────────────────────┐    │
│  │ 🔍 무엇이든 물어보세요 (예: "A사 예산", "지난주 리스크") │    │
│  └──────────────────────────────────────────────────────┘    │
│                                                              │
│  ───────────────────────────────────────────────────────    │
│                                                              │
│  💡 추천 검색                                                 │
│  ┌──────────┐ ┌──────────┐ ┌──────────┐ ┌──────────┐        │
│  │ A사 예산  │ │ 리스크   │ │ 이번주   │ │ 미확인   │        │
│  └──────────┘ └──────────┘ └──────────┘ └──────────┘        │
│                                                              │
│  🕐 최근 검색                                                 │
│  ├─ "CAC 논의" - 2일 전                                      │
│  ├─ "B사 계약 조건" - 1주일 전                               │
│  └─ "김대표 약속" - 2주일 전                                 │
│                                                              │
│  📊 자주 검색되는 주제                                        │
│  ├─ 예산/가격: 23회                                          │
│  ├─ 일정/타임라인: 18회                                       │
│  └─ 리스크/우려: 15회                                        │
│                                                              │
└──────────────────────────────────────────────────────────────┘
```

**검색어 입력 상태 머신:**

```
┌─────────┐  focus   ┌──────────┐  type   ┌──────────┐
│  Idle   │ ───────→ │ Focused  │ ──────→ │ Typing   │
└─────────┘          └──────────┘         └──────────┘
                          │                    │
                          │ blur               │ submit/debounce
                          ↓                    ↓
                     ┌──────────┐        ┌──────────┐
                     │ Idle     │        │ Searching│
                     └──────────┘        └──────────┘
```

##### Layer 4: 엣지 케이스 계층 (Edge Cases Layer)

```yaml
Edge_Cases:
  empty_state:
    trigger: "아직 검색 기록이 없음"
    response: "검색 예시와 추천 쿼리 제공"
    ui: "💡 이렇게 검색해보세요: 'A사 예산', '지난달 결정사항'"

  very_short_query:
    trigger: "검색어 1글자"
    response: "최소 2글자 이상 입력 안내"
    ui: "2글자 이상 입력해주세요"

  no_results:
    trigger: "검색 결과 0건"
    response: "유사 검색어 제안 + 필터 완화 제안"
    ui: "'A사 예산' 결과가 없습니다. 'A사' 또는 '예산'으로 검색해볼까요?"

  typo_detected:
    trigger: "오타로 추정되는 검색어"
    response: "자동 수정 + 원래 검색어 옵션"
    ui: "'A사 예싼' → 'A사 예산' 검색 결과 표시"

  ambiguous_time:
    trigger: "'얼마 전', '최근' 등 모호한 시간"
    response: "기본 30일로 검색 + 범위 조정 옵션"
    ui: "최근 30일 결과 표시 [기간 변경]"
```

##### Layer 5: 메트릭 계층 (Metrics Layer)

```typescript
// Part 5.1: 검색 진입 이벤트
interface SearchEntryEvent {
  event: 'search_tab_clicked' | 'search_focused' | 'search_submitted';
  properties: {
    queryLength: number;
    queryType: 'keyword' | 'natural_language' | 'time_based' | 'person_based';
    fromRecentSearch: boolean;
    fromSuggestion: boolean;
    timestamp: Date;
  };
}
```

---

#### Part 5.2: 검색 결과 (Search Results)

**화면**: 검색 결과 리스트

##### Layer 1: 전략 계층 (Strategy Layer)

```yaml
JTBD (Jobs to Be Done):
  primary: "검색 결과에서 원하는 정보를 빠르게 식별하고 싶다"
  trigger: "검색했는데 결과가 여러 개네"
  outcome: "3개 이내 결과 스캔으로 원하는 정보 발견"

Success_Metrics:
  - 결과 → 클릭: < 5초
  - 첫 번째 결과 클릭률: > 50%
  - 결과 내 재검색률: < 20%
```

##### Layer 2: 행동 설계 계층 (Behavioral Design Layer)

```yaml
Fogg_Model_Analysis:
  motivation:
    current: "검색 결과 중 맞는 것 찾기"
    target: "첫 번째 결과가 내가 찾던 것"
    design:
      - 관련도 순 정렬 (시간순 옵션)
      - 검색어 하이라이트로 빠른 스캔
      - 문맥 표시 (전후 1-2문장)

  ability:
    barriers:
      - "결과가 너무 많다"
      - "어떤 게 내가 찾는 건지 모르겠다"
      - "다 비슷해 보인다"
    simplification:
      - 결과 수 제한: 기본 10개
      - 스니펫 표시: 핵심 문장만
      - 메타 정보: 날짜, 참석자, 회사
      - 그룹핑: 미팅별 묶음

  trigger:
    internal: "이게 맞는 것 같은데..."
    external: 하이라이트된 키워드
    design:
      - 볼드 + 노란 배경 하이라이트
      - 결과 카드 호버 시 미리보기
```

##### Layer 3: 구조/로직 계층 (Structure Layer)

```
검색 결과 화면:

┌──────────────────────────────────────────────────────────────┐
│  🔍 검색                                                      │
├──────────────────────────────────────────────────────────────┤
│  ┌──────────────────────────────────────────────────────┐    │
│  │ A사 예산                                              │ ✕ │
│  └──────────────────────────────────────────────────────┘    │
│                                                              │
│  결과 3건 (0.2초)                    [관련도순 ▼] [필터 ▼]   │
│                                                              │
├──────────────────────────────────────────────────────────────┤
│  ┌────────────────────────────────────────────────────────┐  │
│  │ 📋 A사 2차 미팅                                         │  │
│  │ 2025.12.29 (일) 14:00 • 김대표, 이과장                  │  │
│  │ ─────────────────────────────────────────────────────  │  │
│  │ 김대표: "**예산**은 Q1에 $50만 정도 생각하고 있어요.     │  │
│  │        다만 **예산** 확정은 내부 승인 후..."            │  │
│  │ ─────────────────────────────────────────────────────  │  │
│  │ 💡 결정: Q1 예산 $50만 (내부 승인 필요)                 │  │
│  │                                           [상세 보기 →] │  │
│  └────────────────────────────────────────────────────────┘  │
│                                                              │
│  ┌────────────────────────────────────────────────────────┐  │
│  │ 📋 A사 1차 미팅                                         │  │
│  │ 2025.12.22 (일) 10:00 • 김대표                          │  │
│  │ ─────────────────────────────────────────────────────  │  │
│  │ 민수: "**예산** 범위가 어느 정도인지 여쭤봐도 될까요?"   │  │
│  │ 김대표: "아직 확정은 아니지만..."                       │  │
│  │                                           [상세 보기 →] │  │
│  └────────────────────────────────────────────────────────┘  │
│                                                              │
│  ┌────────────────────────────────────────────────────────┐  │
│  │ 📋 내부 예산 회의                                       │  │
│  │ 2025.12.20 (금) 15:00 • 지연, 수진                      │  │
│  │ ─────────────────────────────────────────────────────  │  │
│  │ 지연: "**A사** 딜 **예산**은 $30-50만 사이로 잡고..."    │  │
│  │                                           [상세 보기 →] │  │
│  └────────────────────────────────────────────────────────┘  │
│                                                              │
│  ─ 그게 전부입니다 ─                                         │
│                                                              │
└──────────────────────────────────────────────────────────────┘
```

**필터 확장 (고급 검색):**

```
┌──────────────────────────────────────────────────────────────┐
│  [필터 ▼]                                                    │
│  ┌────────────────────────────────────────────────────────┐  │
│  │ 기간                                                   │  │
│  │ ○ 전체  ● 최근 1주  ○ 최근 1개월  ○ 최근 3개월  ○ 직접선택 │
│  │                                                        │  │
│  │ 회사/딜                                                │  │
│  │ [A사 ▼]                                                │  │
│  │                                                        │  │
│  │ 참석자                                                 │  │
│  │ [김대표 ▼] [+ 추가]                                    │  │
│  │                                                        │  │
│  │ 결정 요소                                               │  │
│  │ □ 결정  □ 액션  □ 리스크  □ 미확인                     │  │
│  │                                                        │  │
│  │ [적용]  [초기화]                                        │  │
│  └────────────────────────────────────────────────────────┘  │
└──────────────────────────────────────────────────────────────┘
```

##### Layer 4: 엣지 케이스 계층 (Edge Cases Layer)

```yaml
Edge_Cases:
  too_many_results:
    trigger: "결과 100건 이상"
    response: "상위 20개만 표시 + 필터 권장"
    ui: "결과가 많습니다. 필터로 범위를 좁혀보세요"

  single_result:
    trigger: "결과 1건"
    response: "바로 상세 보기 제안"
    ui: "결과 1건 [바로 보기]"

  partial_match:
    trigger: "검색어 일부만 매칭"
    response: "매칭된 부분 표시 + 전체 매칭 없음 안내"
    ui: "'A사'는 찾았으나 '예산' 언급 없음"

  old_results_only:
    trigger: "모든 결과가 3개월 이상 오래됨"
    response: "최신 정보 없음 알림"
    ui: "최근 3개월 내 결과 없음. 전체 기간 결과 표시 중"

  cross_meeting_context:
    trigger: "같은 주제가 여러 미팅에 분산"
    response: "타임라인 뷰 제안"
    ui: "'예산' 주제가 3개 미팅에서 논의됨 [타임라인 보기]"
```

##### Layer 5: 메트릭 계층 (Metrics Layer)

```typescript
// Part 5.2: 검색 결과 이벤트
interface SearchResultEvent {
  event: 'search_completed' | 'result_clicked' | 'filter_applied' | 'result_hovered';
  properties: {
    query: string;
    resultCount: number;
    clickedIndex: number | null;
    timeToClick: number;      // 결과 표시 → 클릭 시간
    filterUsed: boolean;
    sortBy: 'relevance' | 'date';
    timestamp: Date;
  };
}

// 시맨틱 검색 분석
interface SemanticSearchEvent {
  event: 'semantic_parse_success' | 'semantic_parse_partial' | 'fallback_to_keyword';
  properties: {
    originalQuery: string;
    parsedIntent: {
      timeRange?: { start: Date; end: Date };
      person?: string;
      company?: string;
      topic?: string;
      decisionElement?: string;
    };
    confidence: number;
  };
}
```

---

#### Part 5.3: 검색 상세 조회 (Detail View)

**화면**: 미팅 상세 > 검색 결과 하이라이트

##### Layer 1: 전략 계층 (Strategy Layer)

```yaml
JTBD (Jobs to Be Done):
  primary: "검색한 내용의 전체 맥락을 파악하고 싶다"
  trigger: "이 부분 전후로 뭐라고 했지?"
  outcome: "필요한 정보와 맥락을 함께 확인"

Success_Metrics:
  - 상세 조회 후 만족 이탈: > 70%
  - 상세에서 다시 검색: < 20%
  - 관련 미팅 탐색률: > 25%
```

##### Layer 2: 행동 설계 계층 (Behavioral Design Layer)

```yaml
Fogg_Model_Analysis:
  motivation:
    current: "검색 결과의 상세 내용 확인"
    target: "전체 맥락 이해 + 관련 정보 발견"
    design:
      - 검색어 위치로 자동 스크롤
      - 검색어 하이라이트 유지
      - "이 미팅의 다른 결정사항" 표시

  ability:
    barriers:
      - "어디에 검색어가 있는지 모르겠다"
      - "전후 맥락을 보고 싶다"
    simplification:
      - 자동 스크롤 to 검색어 위치
      - 하이라이트 네비게이션 (▲▼)
      - 확장된 문맥 표시

  trigger:
    internal: "더 자세히 보고 싶다"
    external: 하이라이트된 검색어
    design:
      - 검색어 위치 점프 버튼
      - 관련 항목 연결 링크
```

##### Layer 3: 구조/로직 계층 (Structure Layer)

```
검색 상세 화면 (미팅 상세 + 검색 하이라이트):

┌──────────────────────────────────────────────────────────────┐
│  ← 검색 결과                    A사 2차 미팅                  │
├──────────────────────────────────────────────────────────────┤
│                                                              │
│  🔍 "A사 예산" 검색 결과 위치 (2/3)         [◀ 이전] [다음 ▶] │
│                                                              │
├──────────────────────────────────────────────────────────────┤
│  📅 2025.12.29 (일) 14:00-15:30                              │
│  👥 김대표, 이과장 (A사) / 민수 (Onno)                        │
│  🏢 A사 | 딜 스테이지: 협상                                   │
│                                                              │
├──────────────────────────────────────────────────────────────┤
│                                                              │
│  ▼ 대화 내용                                                 │
│  ─────────────────────────────────────────────────────────   │
│  ...                                                         │
│                                                              │
│  ┌─ 검색 결과 ─────────────────────────────────────────────┐ │
│  │ 민수: "**예산** 관련해서 진행 상황이 어떻게 되셨나요?"   │ │
│  │                                                         │ │
│  │ 김대표: "**예산**은 Q1에 $50만 정도 생각하고 있어요.     │ │
│  │        다만 **예산** 확정은 내부 승인 후에 알려드릴게요" │ │
│  │                                                         │ │
│  │ 민수: "네, 내부 프로세스가 어떻게 되시나요?"            │ │
│  └─────────────────────────────────────────────────────────┘ │
│                                                              │
│  ...                                                         │
│                                                              │
├──────────────────────────────────────────────────────────────┤
│  💡 이 미팅의 결정사항                                        │
│  ┌────────────────────────────────────────────────────────┐  │
│  │ ✓ Q1 **예산** $50만 (내부 승인 필요)                    │  │
│  │ ✓ 다음 미팅: 1월 2주차                                  │  │
│  │ ⚠ 리스크: 내부 승인 지연 가능성                         │  │
│  └────────────────────────────────────────────────────────┘  │
│                                                              │
│  🔗 관련 미팅                                                 │
│  ├─ A사 1차 미팅 (12.22) - "예산" 첫 논의                    │
│  └─ A사 3차 미팅 (예정) - 예산 확정 예정                     │
│                                                              │
└──────────────────────────────────────────────────────────────┘
```

##### Layer 4: 엣지 케이스 계층 (Edge Cases Layer)

```yaml
Edge_Cases:
  multiple_highlights:
    trigger: "같은 미팅에서 검색어 10회 이상 등장"
    response: "네비게이션 제공 + 주요 위치만 표시"
    ui: "10개 위치 중 1번째 [▲▼]"

  context_too_short:
    trigger: "검색어가 미팅 시작/끝 부분"
    response: "가능한 문맥만 표시"
    ui: "(미팅 시작 부분)"

  meeting_deleted:
    trigger: "검색 결과 미팅이 삭제됨"
    response: "삭제 안내 + 다른 결과 제안"
    ui: "이 미팅은 삭제되었습니다. 다른 결과 보기"

  no_decision_extracted:
    trigger: "미팅에서 결정 추출 안 됨"
    response: "전사 내용만 표시"
    ui: "결정사항 없음 (전체 대화 보기)"
```

##### Layer 5: 메트릭 계층 (Metrics Layer)

```typescript
// Part 5.3: 상세 조회 이벤트
interface DetailViewEvent {
  event: 'detail_opened' | 'highlight_navigated' | 'related_meeting_clicked' | 'detail_closed';
  properties: {
    meetingId: string;
    query: string;
    highlightCount: number;
    viewDuration: number;
    scrollDepth: number;       // 0-100%
    exitAction: 'back' | 'related' | 'new_search' | 'close';
    timestamp: Date;
  };
}
```

---

#### Part 5 전체 상태 머신

```
┌─────────────────────────────────────────────────────────────────┐
│                    Part 5: 검색 상태 머신                        │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  ┌─────────────┐                                                │
│  │    Idle     │ ← 검색 탭 진입                                  │
│  │ (검색 대기)  │                                                │
│  └──────┬──────┘                                                │
│         │ input                                                 │
│         ↓                                                       │
│  ┌─────────────┐                                                │
│  │   Typing    │                                                │
│  │ (입력 중)   │                                                │
│  └──────┬──────┘                                                │
│         │ submit/debounce (300ms)                               │
│         ↓                                                       │
│  ┌─────────────┐                                                │
│  │  Searching  │ ─── timeout ───→ ┌─────────────┐               │
│  │ (검색 중)   │                  │   Error     │               │
│  └──────┬──────┘ ←── retry ────── │ (오류)      │               │
│         │ results                  └─────────────┘               │
│         ↓                                                       │
│  ┌─────────────┐                                                │
│  │  Results    │                                                │
│  │ (결과 표시) │                                                │
│  └──────┬──────┘                                                │
│         │ click result                                          │
│         ↓                                                       │
│  ┌─────────────┐                                                │
│  │   Detail    │ ─── back ───→ Results                          │
│  │ (상세 조회) │                                                │
│  └─────────────┘                                                │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

---

#### Part 5 이벤트 로깅

```typescript
// Part 5: 검색 전체 이벤트 타입
type Part5Event =
  // 5.1 검색 진입
  | { event: 'search_tab_opened'; properties: { source: 'nav' | 'shortcut' | 'deep_link' } }
  | { event: 'search_focused'; properties: { hasRecentSearches: boolean } }
  | { event: 'recent_search_clicked'; properties: { query: string; age: number } }
  | { event: 'suggestion_clicked'; properties: { suggestion: string; position: number } }
  | { event: 'search_submitted'; properties: {
      query: string;
      queryLength: number;
      queryType: 'keyword' | 'natural' | 'time' | 'person' | 'decision_element';
    }}

  // 5.2 검색 결과
  | { event: 'search_completed'; properties: {
      query: string;
      resultCount: number;
      searchTime: number;
      semanticSuccess: boolean;
    }}
  | { event: 'result_clicked'; properties: {
      query: string;
      resultIndex: number;
      meetingId: string;
      timeToClick: number;
    }}
  | { event: 'filter_opened'; properties: { query: string } }
  | { event: 'filter_applied'; properties: {
      filterType: 'date' | 'company' | 'person' | 'decision_element';
      filterValue: string;
    }}
  | { event: 'sort_changed'; properties: { from: string; to: string } }
  | { event: 'no_results_shown'; properties: {
      query: string;
      suggestionShown: boolean;
    }}

  // 5.3 상세 조회
  | { event: 'detail_viewed'; properties: {
      meetingId: string;
      query: string;
      highlightCount: number;
    }}
  | { event: 'highlight_navigated'; properties: { direction: 'prev' | 'next'; position: number } }
  | { event: 'related_meeting_clicked'; properties: { fromMeetingId: string; toMeetingId: string } }
  | { event: 'detail_exited'; properties: {
      exitType: 'back' | 'new_search' | 'close';
      viewDuration: number;
    }};
```

---

#### Part 5 핵심 성과 지표

```typescript
const part5Metrics = {
  // 검색 사용률
  searchUsageRate: count(search_tab_opened) / count(dau),
  // 목표: > 20% (일간 활성 사용자 중 검색 사용)

  // 검색 성공률 (결과 클릭률)
  searchSuccessRate: count(result_clicked) / count(search_submitted),
  // 목표: > 70%

  // 평균 검색 시간
  avgSearchTime: avg(timeToClick WHERE result_clicked),
  // 목표: < 10초

  // 첫 결과 클릭률
  firstResultClickRate: count(result_clicked WHERE resultIndex === 0) / count(result_clicked),
  // 목표: > 50%

  // 시맨틱 검색 성공률
  semanticSuccessRate: count(search_completed WHERE semanticSuccess) / count(search_submitted),
  // 목표: > 80%

  // 재검색 비율 (검색 품질 지표)
  reSearchRate: count(search_submitted WHERE previousSearchWithin5min) / count(search_submitted),
  // 목표: < 25%

  // 필터 사용률
  filterUsageRate: count(filter_applied) / count(search_completed),
  // 목표: < 30% (시맨틱이 잘 되면 필터 불필요)

  // 검색 → 상세 전환율
  detailConversionRate: count(detail_viewed) / count(result_clicked),
  // 목표: > 90%

  // 관련 미팅 탐색률
  relatedExplorationRate: count(related_meeting_clicked) / count(detail_viewed),
  // 목표: > 25%

  // 검색 만족도 (상세 조회 후 바로 종료 비율)
  searchSatisfactionProxy: count(detail_exited WHERE exitType === 'close') / count(detail_exited),
  // 목표: > 60%
};
```

### 6.8 Part 5.2: 설정 (5-Layer Framework)

설정 화면의 핵심은 **"필요할 때만 찾고, 변경은 최소화"** 입니다. 사용자가 설정에 자주 들어가는 것은 오히려 UX 실패 신호입니다.

#### Part 5.2.1: 설정 진입 (Settings Entry)

**Layer 1: Strategy/JTBD**
```yaml
핵심_JTBD:
  상황: "알림이 너무 많아서 / 통합 연결을 변경하고 싶어서 / 계정 정보를 확인하고 싶어서"
  하고_싶은_것: "빠르게 원하는 설정을 찾아서 변경"
  기대_결과: "변경 후 즉시 반영, 설정에서 빨리 벗어남"

설정_진입_동기:
  1순위_통합_관리: "40% - Notion 연결/해제, 캘린더 변경"
  2순위_알림_조정: "30% - 알림 빈도 조절, 시간 설정"
  3순위_프로필: "15% - 이름, 이메일, 프로필 사진 변경"
  4순위_구독: "10% - 플랜 확인, 결제 정보"
  5순위_기타: "5% - 데이터 관리, 로그아웃"
```

**Layer 2: Behavioral Design (Fogg Model)**
```yaml
Motivation:
  접근성: "설정 아이콘은 항상 같은 위치에"
  예측성: "설정 변경 결과를 미리 보여줌"
  안심: "위험한 설정은 경고 표시"

Ability:
  검색_지원: "설정 내 검색으로 빠른 접근"
  분류_명확: "카테고리별 명확한 구분"
  한_화면_완결: "스크롤 없이 주요 설정 보임"

Trigger:
  문제_발생_시: "알림 과다 → '설정에서 조절' 링크"
  온보딩_미완료: "'통합 연결' 배지 표시"
  결제_임박: "'구독' 섹션 하이라이트"
```

**Layer 3: Structure/Logic**
```
┌─────────────────────────────────────────────────┐
│  [←] 설정                             [검색 🔍]  │
├─────────────────────────────────────────────────┤
│                                                 │
│  ┌─────────────────────────────────────────┐   │
│  │ 👤 민수님                               │   │
│  │    minsu@company.com                    │   │
│  │    [프로필 편집]                         │   │
│  └─────────────────────────────────────────┘   │
│                                                 │
│  📊 요약                                        │
│  ├─ 총 미팅 127건                              │
│  ├─ 이번 달 15건                               │
│  └─ 저장된 인사이트 342개                       │
│                                                 │
├─────────────────────────────────────────────────┤
│  🔗 통합                                   [>]  │
│  🔔 알림                                   [>]  │
│  🎨 HUD 설정                               [>]  │
│  💳 구독                                   [>]  │
│  🔒 개인정보 및 보안                        [>]  │
│  📁 데이터 관리                            [>]  │
│  ❓ 도움말                                 [>]  │
├─────────────────────────────────────────────────┤
│  🚪 로그아웃                                    │
│                                                 │
│  Onno v1.0.0                                    │
└─────────────────────────────────────────────────┘

설정_카테고리:
├─ 🔗 통합
│   ├─ Notion (연결됨 ✓ / 연결하기)
│   ├─ Google Calendar (연결됨 ✓ / 연결하기)
│   ├─ Outlook Calendar (연결하기)
│   ├─ Slack (Coming Soon)
│   └─ Salesforce (Coming Soon)
│
├─ 🔔 알림
│   ├─ 미팅 전 알림
│   │   ├─ 알림 시점: [10분 전 ▼] (5분/10분/30분/1시간/끄기)
│   │   └─ 준비 리마인더: [ON/OFF]
│   ├─ 미팅 중 알림
│   │   ├─ AI 인사이트: [ON/OFF]
│   │   ├─ 갭 감지: [ON/OFF]
│   │   └─ 알림 빈도: [적음/보통/많음]
│   └─ 미팅 후 알림
│       ├─ 확정 리마인더: [ON/OFF]
│       └─ 액션 아이템 리마인더: [ON/OFF]
│
├─ 🎨 HUD 설정
│   ├─ HUD 위치: [우측/좌측]
│   ├─ 자동 시작: [ON/OFF] (미팅 앱 감지 시)
│   ├─ 투명도: [───●───] 75%
│   └─ 기본 상태: [최소화/확장]
│
├─ 💳 구독
│   ├─ 현재 플랜: Pro ($29/월)
│   ├─ 다음 결제일: 2025-01-15
│   ├─ [플랜 변경] [결제 정보 관리]
│   └─ 청구서 내역
│
├─ 🔒 개인정보 및 보안
│   ├─ 비밀번호 변경
│   ├─ 2단계 인증: [ON/OFF]
│   ├─ 세션 관리 (로그인된 기기)
│   └─ 개인정보처리방침
│
├─ 📁 데이터 관리
│   ├─ 미팅 데이터 내보내기
│   ├─ 데이터 삭제 요청
│   └─ 저장 용량: 2.1GB / 5GB 사용 중
│
└─ ❓ 도움말
    ├─ 사용 가이드
    ├─ FAQ
    ├─ 고객 지원
    └─ 피드백 보내기
```

**Layer 4: Edge Cases**
```yaml
통합_연결_실패:
  조건: "OAuth 인증 실패 또는 권한 거부"
  화면: "연결 실패 - [다시 시도] [문제 해결 가이드]"
  로깅: "integration_failed 이벤트"

통합_연결_해제:
  조건: "사용자가 연결 해제 요청"
  화면: "연결을 해제하면 자동 저장이 중단됩니다. [취소] [해제]"
  후처리: "기존 연동 데이터는 유지, 새 데이터만 저장 안됨"

알림_완전_끄기:
  조건: "모든 알림 OFF"
  화면: "⚠️ 모든 알림을 끄면 중요한 인사이트를 놓칠 수 있어요"
  허용: "사용자 선택 존중"

계정_삭제_요청:
  조건: "사용자가 데이터 삭제 요청"
  화면: "정말 모든 데이터를 삭제하시겠어요? 이 작업은 되돌릴 수 없습니다."
  확인: "이메일 확인 후 72시간 내 완료"
  법적: "GDPR/CCPA 준수"

무료_사용자_Pro_설정:
  조건: "무료 플랜에서 Pro 전용 설정 접근"
  화면: "Pro 플랜에서 사용 가능 [업그레이드]"
  디자인: "설정은 보이되 비활성화 상태"
```

**Layer 5: Metrics**
```typescript
// Part 5.2 설정 메트릭스
const SettingsMetrics = {
  // 설정 진입률 (낮을수록 좋음 - 기본값이 적절하다는 의미)
  settingsEntryRate: count(settings_opened) / count(dau),
  // 목표: < 10%

  // 설정 완료율 (설정 변경 시도 → 성공)
  settingsCompletionRate: count(settings_saved) / count(settings_changed),
  // 목표: > 95%

  // 평균 설정 체류 시간 (짧을수록 좋음)
  avgSettingsTime: avg(timeSpent WHERE screen === 'settings'),
  // 목표: < 60초

  // 통합 연결률
  integrationConnectionRate: count(integration_connected) / count(users),
  // 목표: > 70% (Notion), > 50% (Calendar)

  // 알림 ON 유지율
  notificationRetentionRate: count(notification_on) / count(users),
  // 목표: > 80%

  // 설정 검색 사용률
  settingsSearchRate: count(settings_search) / count(settings_opened),
  // 목표: < 20% (카테고리가 명확하면 검색 불필요)
};
```

#### Part 5.2.2: 통합 관리 (Integration Management)

**Layer 1: Strategy/JTBD**
```yaml
핵심_JTBD:
  Notion_연결: "미팅 내용이 자동으로 Notion에 저장되길 원함"
  Calendar_연결: "캘린더에서 미팅 일정을 자동으로 가져오길 원함"
  연결_해제: "더 이상 사용하지 않는 통합을 정리하고 싶음"

MVP_통합:
  필수: ["Notion", "Google Calendar"]
  선택: ["Outlook Calendar"]
  예정: ["Slack", "Salesforce", "HubSpot"]
```

**Layer 2: Behavioral Design (Fogg Model)**
```yaml
Motivation:
  가치_명시: "Notion 연결 시 자동 저장으로 5분 절약"
  소셜_증명: "87%의 사용자가 Notion을 연결했어요"
  즉시_확인: "연결 성공 → 테스트 페이지 자동 생성"

Ability:
  원클릭_연결: "OAuth로 2클릭 완료"
  권한_최소화: "필요한 권한만 요청"
  쉬운_해제: "연결 해제도 1클릭"

Trigger:
  확정_모달: "미팅 종료 시 Notion 연결 유도"
  빈_상태: "연결된 통합이 없으면 안내"
  사용_중단: "2주 미사용 통합 리마인더"
```

**Layer 3: Structure/Logic**
```
┌─────────────────────────────────────────────────┐
│  [←] 통합                                        │
├─────────────────────────────────────────────────┤
│                                                 │
│  연결됨                                          │
│  ┌─────────────────────────────────────────┐   │
│  │ 📓 Notion                               │   │
│  │    워크스페이스: Onno Team               │   │
│  │    저장 위치: /Meetings                  │   │
│  │    마지막 동기화: 2분 전                  │   │
│  │    [설정 변경] [연결 해제]                │   │
│  └─────────────────────────────────────────┘   │
│                                                 │
│  ┌─────────────────────────────────────────┐   │
│  │ 📅 Google Calendar                       │   │
│  │    계정: minsu@gmail.com                 │   │
│  │    동기화: 양방향                         │   │
│  │    [설정 변경] [연결 해제]                │   │
│  └─────────────────────────────────────────┘   │
│                                                 │
│  연결 가능                                       │
│  ┌─────────────────────────────────────────┐   │
│  │ 📅 Outlook Calendar          [연결하기]  │   │
│  │    Microsoft 캘린더와 연동               │   │
│  └─────────────────────────────────────────┘   │
│                                                 │
│  ┌─────────────────────────────────────────┐   │
│  │ 💬 Slack                    [Coming Soon]│   │
│  │    미팅 요약을 채널에 자동 공유           │   │
│  └─────────────────────────────────────────┘   │
│                                                 │
│  ┌─────────────────────────────────────────┐   │
│  │ 📊 Salesforce               [Coming Soon]│   │
│  │    CRM과 미팅 데이터 자동 연동            │   │
│  └─────────────────────────────────────────┘   │
│                                                 │
└─────────────────────────────────────────────────┘

Notion_설정_변경_모달:
┌─────────────────────────────────────────────────┐
│  Notion 설정                              [×]   │
├─────────────────────────────────────────────────┤
│                                                 │
│  저장 위치                                       │
│  ┌─────────────────────────────────────────┐   │
│  │ 📁 /Meetings                        [▼] │   │
│  └─────────────────────────────────────────┘   │
│  미팅 기록이 저장될 Notion 페이지               │
│                                                 │
│  저장 옵션                                       │
│  ☑ 미팅 종료 시 자동 저장                       │
│  ☑ 전사 내용 포함                               │
│  ☐ 참석자 정보 포함                             │
│                                                 │
│  템플릿                                          │
│  ┌─────────────────────────────────────────┐   │
│  │ 기본 미팅 템플릿                    [▼] │   │
│  └─────────────────────────────────────────┘   │
│                                                 │
│        [취소]              [저장]               │
└─────────────────────────────────────────────────┘
```

**Layer 4: Edge Cases**
```yaml
Notion_워크스페이스_변경:
  조건: "사용자가 다른 워크스페이스로 변경"
  화면: "새 워크스페이스로 변경하면 이전 저장 위치 설정이 초기화됩니다"
  동작: "기존 데이터는 유지, 새 저장 위치 선택 필요"

Calendar_권한_취소:
  조건: "Google 계정에서 Onno 권한 직접 취소"
  화면: "캘린더 연결이 해제되었어요. [다시 연결]"
  감지: "API 호출 실패 시 자동 감지"

다중_Calendar:
  조건: "여러 캘린더 계정 연결 시도"
  MVP: "1개만 허용"
  화면: "기존 캘린더를 해제하고 새로 연결하시겠어요?"

Coming_Soon_클릭:
  조건: "예정된 통합 클릭"
  화면: "출시 알림 받기 [이메일 등록]"
  목적: "수요 측정 + 베타 테스터 모집"
```

#### Part 5.2.3: 알림 설정 (Notification Settings)

**Layer 1: Strategy/JTBD**
```yaml
핵심_JTBD:
  알림_조절: "알림이 방해되지 않게 적절히 조절하고 싶음"
  중요한_것만: "정말 중요한 것만 알림 받고 싶음"
  시간_설정: "업무 시간에만 알림 받고 싶음"
```

**Layer 2: Behavioral Design (Fogg Model)**
```yaml
Motivation:
  맞춤_경험: "나에게 맞는 알림 빈도 찾기"
  방해_최소: "집중 모드 시 알림 차단"

Ability:
  미리보기: "알림 예시 표시"
  일괄_조절: "알림 빈도 슬라이더 (적음/보통/많음)"
  빠른_ON_OFF: "카테고리별 원터치 토글"

Trigger:
  과다_알림_감지: "알림 무시율 > 50% → 조절 제안"
  사용자_피드백: "알림 후 '너무 많아요' 옵션"
```

**Layer 3: Structure/Logic**
```
┌─────────────────────────────────────────────────┐
│  [←] 알림                                        │
├─────────────────────────────────────────────────┤
│                                                 │
│  알림 빈도                                       │
│  ┌─────────────────────────────────────────┐   │
│  │ 적음      ●─────────────────○─────○ 많음  │   │
│  │           ↑                              │   │
│  │        현재 설정                          │   │
│  └─────────────────────────────────────────┘   │
│  하루 평균 3-5개 알림 예상                       │
│                                                 │
├─────────────────────────────────────────────────┤
│  미팅 전                                    ⌄   │
├─────────────────────────────────────────────────┤
│  │                                              │
│  │  준비 리마인더                    [ON ●]     │
│  │  ├─ 알림 시점: [10분 전 ▼]                   │
│  │  └─ 예시: "A사 미팅 10분 후, 준비하세요"      │
│  │                                              │
│  │  일정 변경 알림                   [ON ●]     │
│  │  └─ 미팅 시간/참석자 변경 시                 │
│  │                                              │
├─────────────────────────────────────────────────┤
│  미팅 중                                    ⌄   │
├─────────────────────────────────────────────────┤
│  │                                              │
│  │  AI 인사이트                      [ON ●]     │
│  │  └─ 중요 수치, 결정 사항 감지 시              │
│  │                                              │
│  │  갭 감지 알림                     [ON ●]     │
│  │  └─ 놓친 질문, 미확인 사항 감지 시            │
│  │                                              │
│  │  위험 신호 알림                   [ON ●]     │
│  │  └─ 부정적 신호, 리스크 감지 시              │
│  │                                              │
├─────────────────────────────────────────────────┤
│  미팅 후                                    ⌄   │
├─────────────────────────────────────────────────┤
│  │                                              │
│  │  확정 리마인더                    [ON ●]     │
│  │  ├─ 알림 시점: [1시간 후 ▼]                  │
│  │  └─ 미확정 미팅 리마인더                     │
│  │                                              │
│  │  액션 아이템 리마인더             [ON ●]     │
│  │  └─ 기한 임박 액션 아이템                    │
│  │                                              │
├─────────────────────────────────────────────────┤
│  방해 금지 시간                                  │
│  ┌─────────────────────────────────────────┐   │
│  │ 🌙 [OFF ○]  22:00 - 08:00               │   │
│  └─────────────────────────────────────────┘   │
│  이 시간에는 알림을 보내지 않아요                │
│                                                 │
└─────────────────────────────────────────────────┘
```

**Layer 4: Edge Cases**
```yaml
모든_알림_OFF:
  조건: "사용자가 모든 알림 끄기"
  경고: "⚠️ 중요한 인사이트를 놓칠 수 있어요"
  허용: "OK, 알겠어요" 버튼으로 확인 후 적용

알림_빈도_변경:
  조건: "빈도 슬라이더 변경"
  즉시_적용: "다음 알림부터 적용"
  예시_업데이트: "예상 알림 개수 실시간 업데이트"

알림_과다_감지:
  조건: "알림 무시율 > 50%"
  제안: "알림이 많은 것 같아요. 줄여볼까요? [조절하기]"
  설정_제안: "보통 → 적음으로 자동 제안"
```

#### Part 5.2.4: 설정 상태 머신

```typescript
// 설정 화면 상태 머신
type SettingsState =
  | 'main'          // 메인 설정 화면
  | 'category'      // 카테고리 상세 (통합, 알림 등)
  | 'editing'       // 설정 변경 중
  | 'saving'        // 저장 중
  | 'oauth'         // OAuth 진행 중
  | 'confirming';   // 위험 작업 확인 중

// 상태 전이
const settingsTransitions = {
  main: {
    CATEGORY_TAP: 'category',
    PROFILE_TAP: 'editing',
    LOGOUT: 'confirming',
    SEARCH: 'main',  // 검색 결과로 스크롤
  },
  category: {
    BACK: 'main',
    EDIT: 'editing',
    CONNECT: 'oauth',
    DISCONNECT: 'confirming',
  },
  editing: {
    SAVE: 'saving',
    CANCEL: 'category',
    VALIDATE_ERROR: 'editing',
  },
  saving: {
    SUCCESS: 'category',
    ERROR: 'editing',
  },
  oauth: {
    SUCCESS: 'category',
    CANCEL: 'category',
    ERROR: 'category',
  },
  confirming: {
    CONFIRM: 'saving',  // 또는 바로 적용
    CANCEL: 'category',
  },
};
```

#### Part 5.2.5: 설정 이벤트 로깅

```typescript
// 설정 관련 이벤트
type SettingsEvent =
  // 진입/탐색
  | 'settings_opened'
  | 'settings_closed'
  | 'settings_category_viewed'
  | 'settings_searched'

  // 변경
  | 'settings_changed'
  | 'settings_saved'
  | 'settings_save_failed'
  | 'settings_reset'

  // 통합
  | 'integration_connect_started'
  | 'integration_connected'
  | 'integration_connect_failed'
  | 'integration_disconnected'
  | 'integration_settings_changed'

  // 알림
  | 'notification_toggled'
  | 'notification_frequency_changed'
  | 'dnd_enabled'
  | 'dnd_disabled'

  // 계정
  | 'profile_updated'
  | 'password_changed'
  | '2fa_enabled'
  | '2fa_disabled'
  | 'logout'
  | 'account_delete_requested';

interface SettingsEventPayload {
  category: 'integration' | 'notification' | 'hud' | 'subscription' | 'privacy' | 'data' | 'help';
  setting?: string;
  oldValue?: any;
  newValue?: any;
  integrationType?: 'notion' | 'google_calendar' | 'outlook' | 'slack' | 'salesforce';
  error?: string;
}
```

#### Part 5.2.6: 설정 메트릭스 종합

```typescript
// Part 5.2 설정 종합 메트릭스
const SettingsComprehensiveMetrics = {
  // === 사용 패턴 ===
  // 설정 진입률 (낮을수록 좋음)
  settingsEntryRate: count(settings_opened) / count(dau),
  // 목표: < 10%

  // 평균 설정 체류 시간 (짧을수록 좋음)
  avgSettingsTime: avg(timeSpent WHERE screen === 'settings'),
  // 목표: < 60초

  // 설정 검색 사용률 (낮을수록 좋음)
  settingsSearchRate: count(settings_searched) / count(settings_opened),
  // 목표: < 20%

  // === 통합 ===
  // Notion 연결률
  notionConnectionRate: count(notion_connected) / count(users),
  // 목표: > 70%

  // Calendar 연결률
  calendarConnectionRate: count(calendar_connected) / count(users),
  // 목표: > 50%

  // 통합 연결 성공률
  integrationSuccessRate: count(integration_connected) / count(integration_connect_started),
  // 목표: > 90%

  // 통합 해제율 (낮을수록 좋음)
  integrationChurnRate: count(integration_disconnected) / count(integration_connected),
  // 목표: < 5%

  // === 알림 ===
  // 알림 ON 유지율
  notificationOnRate: count(notification_on) / count(users),
  // 목표: > 80%

  // 알림 빈도 변경률 (적당히 낮아야 기본값이 적절)
  notificationFrequencyChangeRate: count(notification_frequency_changed) / count(users),
  // 목표: < 30%

  // 방해 금지 사용률
  dndUsageRate: count(dnd_enabled) / count(users),
  // 목표: 측정만 (높아도 OK)

  // === 계정 ===
  // 2FA 활성화율
  twoFactorRate: count(2fa_enabled) / count(users),
  // 목표: > 20%

  // 계정 삭제 요청률 (낮을수록 좋음)
  accountDeleteRate: count(account_delete_requested) / count(users),
  // 목표: < 1%
};
```

---

### 6.9 Part 6.1: 에러 처리 (5-Layer Framework)

에러 처리는 **횡단 관심사(Cross-Cutting Concern)**로, 모든 Part에 걸쳐 일관되게 적용됩니다.
핵심 철학: **"에러는 막다른 길이 아니라 우회로"** - 사용자가 항상 다음 행동을 알 수 있어야 합니다.

#### Part 6.1.1: 에러 분류 체계

```
에러 심각도 (Severity):
├─ Critical (치명적): 서비스 이용 불가
│   └─ 예: 인증 만료, 서버 다운
├─ Major (주요): 핵심 기능 이용 불가
│   └─ 예: STT 실패, Notion 저장 실패
├─ Minor (경미): 부분 기능 제한
│   └─ 예: AI 질문 생성 실패, 검색 느림
└─ Info (정보): 사용자 알림만 필요
    └─ 예: 오프라인 모드 진입, 동기화 대기

에러 도메인 (Domain):
├─ Network: 네트워크 연결 문제
├─ Auth: 인증/인가 문제
├─ Integration: 외부 서비스 연동 문제
├─ AI: AI 처리 실패
├─ Media: 마이크/오디오 문제
├─ Storage: 저장/동기화 문제
└─ Validation: 입력 유효성 문제
```

#### Part 6.1.2: 에러 처리 5-Layer Framework

**Layer 1: Strategy (전략적 목표)**

| 전략 | 설명 | 측정 지표 |
|------|------|----------|
| 복구 우선 | 가능하면 자동 복구, 불가능하면 명확한 대안 제시 | 자동 복구율 > 70% |
| 투명성 | 무엇이 잘못됐는지 이해 가능한 언어로 설명 | 에러 이해도 > 80% |
| 행동 유도 | 항상 "다음에 뭘 하면 되는지" 명확히 | CTA 클릭률 > 60% |
| 데이터 보호 | 에러 발생해도 사용자 데이터 손실 없음 | 데이터 손실 0건 |

**JTBD (Jobs-To-Be-Done):**
```
"에러가 발생했을 때, 나는 당황하지 않고
 무엇이 잘못됐는지 이해하고, 어떻게 해결할 수 있는지 알고 싶다.
 그래야 내 작업을 계속 이어갈 수 있다."
```

**Layer 2: Behavioral Design (행동 설계)**

```
Fogg Behavior Model 적용:

Motivation (동기):
├─ "이 문제는 해결할 수 있다"는 희망 전달
├─ 데이터가 안전하다는 안심 제공
└─ 곧 정상화될 것이라는 신뢰 형성

Ability (능력):
├─ 한 번 클릭으로 해결 가능한 CTA
├─ 복잡한 기술 용어 대신 일상 언어
└─ 단계별 가이드 (필요시)

Trigger (트리거):
├─ 에러 토스트/모달로 즉시 인지
├─ 명확한 CTA 버튼 ("다시 시도", "설정 확인")
└─ 긴급도에 따른 시각적 차별화
```

**Layer 3: Structure & Logic (구조 설계)**

```typescript
// 에러 상태 머신
type ErrorState =
  | 'none'           // 정상
  | 'detecting'      // 감지 중
  | 'displaying'     // 표시 중
  | 'recovering'     // 복구 시도 중
  | 'recovered'      // 복구 완료
  | 'failed'         // 복구 실패
  | 'dismissed';     // 사용자가 닫음

// 상태 전이
none → detecting (에러 발생)
detecting → displaying (에러 분류 완료)
displaying → recovering (자동 재시도 또는 사용자 액션)
recovering → recovered (성공) | failed (실패)
recovered → none (정상 복귀)
failed → displaying (재시도 안내)
displaying → dismissed (사용자가 닫음)
```

**Layer 4: Edge Cases (예외 상황)**

```
Case 1: 네트워크 오류
├─ 조건: fetch 실패 또는 timeout
├─ 자동 복구: 3초 후 자동 재시도 (최대 3회)
├─ 표시: "연결 중..." 스피너
├─ 3회 실패 시:
│   └─ 토스트: "네트워크 연결을 확인해주세요 [다시 시도]"
└─ 오프라인 지속 시:
    └─ 상태바: "오프라인 모드 - 연결되면 자동 동기화"

Case 2: OAuth 토큰 만료
├─ 조건: 401 Unauthorized
├─ 자동 복구: 리프레시 토큰으로 갱신 시도
├─ 갱신 성공: 원래 요청 자동 재시도
├─ 갱신 실패:
│   └─ 모달: "세션이 만료되었습니다 [다시 로그인]"
└─ 필수 통합 만료 시:
    └─ 배너: "⚠️ Notion 연결이 끊어졌습니다 [재연결]"

Case 3: STT/마이크 오류
├─ 조건: 마이크 권한 거부 또는 장치 없음
├─ 권한 거부:
│   └─ 모달: "마이크 권한이 필요합니다"
│            + OS별 권한 설정 가이드 링크
├─ 장치 없음:
│   └─ 모달: "마이크를 찾을 수 없습니다"
│            + "다른 장치 선택" 버튼
└─ 녹음 중 끊김:
    └─ 토스트: "녹음 중단됨 - 마이크 연결 확인 [재시작]"

Case 4: Notion 저장 실패
├─ 조건: Notion API 오류 또는 권한 문제
├─ 자동 복구: 로컬 저장 후 백그라운드 재시도
├─ 화면: "저장 중..." → "저장됨 ✓" (성공 시)
├─ 1분 후 실패 시:
│   └─ 토스트: "Notion 저장 지연 중 - 곧 재시도"
├─ 3회 실패 시:
│   └─ 토스트: "Notion 저장 실패 [다시 시도] [설정 확인]"
└─ 데이터베이스 접근 불가:
    └─ 모달: "Notion 데이터베이스 접근 권한을 확인해주세요"
            + [Notion에서 확인] 버튼

Case 5: AI 처리 실패
├─ 조건: GPT API 오류 또는 토큰 한도 초과
├─ 질문 생성 실패:
│   └─ 폴백: 기본 질문 세트 표시
│   └─ 배지: "AI 일시 중단"
├─ 요약 생성 실패:
│   └─ 표시: "요약 생성 중 문제 발생 [다시 생성]"
│   └─ 폴백: 원본 전사 텍스트 표시
└─ 인사이트 추출 실패:
    └─ 표시: "인사이트 분석 중 [완료 시 알림]"

Case 6: 검색 실패
├─ 조건: Pinecone 오류 또는 임베딩 실패
├─ 자동 폴백: PostgreSQL 전문 검색으로 대체
├─ 전문 검색도 실패:
│   └─ 표시: "검색 서비스 일시 중단 [잠시 후 다시 시도]"
└─ 부분 성공:
    └─ 표시: 결과 + "일부 결과만 표시됨"

Case 7: 실시간 연결 끊김 (WebSocket)
├─ 조건: Socket.IO disconnect
├─ 자동 복구: 지수 백오프 재연결 (1s, 2s, 4s, 8s, 16s)
├─ 재연결 중:
│   └─ HUD 상태바: "🔄 재연결 중..."
├─ 30초 후 실패:
│   └─ HUD 상태바: "❌ 연결 끊김 - 데이터는 저장됨 [재연결]"
└─ 재연결 성공:
    └─ HUD 상태바: "🟢 연결됨" (2초 후 자동 숨김)
```

**Layer 5: Metrics (측정 지표)**

```typescript
// Part 6.1 에러 처리 메트릭스
const errorMetrics = {
  // === 발생률 ===
  // 전체 에러 발생률 (낮을수록 좋음)
  errorRate: count(error_occurred) / count(api_calls),
  // 목표: < 1%

  // 도메인별 에러 발생률
  errorRateByDomain: {
    network: count(network_error) / count(api_calls),
    auth: count(auth_error) / count(api_calls),
    integration: count(integration_error) / count(integration_calls),
    ai: count(ai_error) / count(ai_calls),
    media: count(media_error) / count(media_operations),
  },

  // === 복구율 ===
  // 자동 복구 성공률
  autoRecoveryRate: count(auto_recovered) / count(error_occurred),
  // 목표: > 70%

  // 사용자 액션 복구 성공률
  userRecoveryRate: count(user_recovered) / count(recovery_action_shown),
  // 목표: > 60%

  // 평균 복구 시간 (자동)
  avgAutoRecoveryTime: avg(recovered_at - error_at WHERE auto_recovered),
  // 목표: < 5초

  // === 사용자 경험 ===
  // 에러 후 이탈률 (낮을수록 좋음)
  errorChurnRate: count(session_end_after_error) / count(error_displayed),
  // 목표: < 10%

  // CTA 클릭률
  errorCtaClickRate: count(error_cta_clicked) / count(error_displayed),
  // 목표: > 60%

  // 에러 무시율 (dismiss)
  errorDismissRate: count(error_dismissed) / count(error_displayed),
  // 지표: 높으면 에러가 덜 심각하다는 의미

  // === 품질 ===
  // 동일 에러 재발률 (세션 내)
  errorRecurrenceRate: count(same_error_twice_in_session) / count(sessions_with_error),
  // 목표: < 5%

  // 데이터 손실 건수
  dataLossCount: count(data_loss_events),
  // 목표: 0
};
```

#### Part 6.1.3: 에러 UI 컴포넌트

```
에러 표시 방식 (심각도별):

Critical (치명적):
┌─────────────────────────────────────────┐
│  ⛔ 전체 화면 모달                       │
│                                         │
│       세션이 만료되었습니다               │
│    다시 로그인하여 계속 사용하세요         │
│                                         │
│            [다시 로그인]                 │
└─────────────────────────────────────────┘

Major (주요):
┌─────────────────────────────────────────┐
│  ⚠️ 상단 배너 (고정)                     │
│  Notion 연결이 끊어졌습니다 [재연결]      │
└─────────────────────────────────────────┘

Minor (경미):
┌─────────────────────────┐
│ 💡 토스트 (5초 후 자동 사라짐)
│ AI 질문 생성 지연 중...  │
└─────────────────────────┘

Info (정보):
┌─────────────────────────┐
│ ℹ️ 인라인 메시지        │
│ 오프라인 모드입니다      │
└─────────────────────────┘
```

**에러 토스트 구조:**
```
┌──────────────────────────────────────────┐
│ [아이콘] [메시지]                [CTA] [×]│
└──────────────────────────────────────────┘

예시:
┌──────────────────────────────────────────┐
│ ⚠️ 네트워크 연결 실패         [다시 시도] ×│
└──────────────────────────────────────────┘

┌──────────────────────────────────────────┐
│ ❌ Notion 저장 실패    [다시 시도] [설정] ×│
└──────────────────────────────────────────┘

┌──────────────────────────────────────────┐
│ ✅ 연결 복구됨                           ×│
└──────────────────────────────────────────┘
```

#### Part 6.1.4: 에러 복구 전략

```typescript
// 에러 복구 전략 매트릭스
const recoveryStrategies = {
  network: {
    strategy: 'retry_with_backoff',
    maxRetries: 3,
    backoffMs: [1000, 2000, 4000],
    fallback: 'offline_mode',
    userAction: '네트워크 확인',
  },

  auth_expired: {
    strategy: 'refresh_token',
    maxRetries: 1,
    fallback: 'redirect_login',
    userAction: '다시 로그인',
  },

  integration_oauth: {
    strategy: 'refresh_oauth',
    maxRetries: 1,
    fallback: 'reconnect_prompt',
    userAction: '재연결',
  },

  integration_api: {
    strategy: 'retry_with_backoff',
    maxRetries: 3,
    backoffMs: [2000, 5000, 10000],
    fallback: 'local_queue',
    userAction: '설정 확인',
  },

  ai_generation: {
    strategy: 'retry_once',
    maxRetries: 1,
    fallback: 'default_content',
    userAction: '다시 생성',
  },

  media_permission: {
    strategy: 'none',
    fallback: 'permission_guide',
    userAction: '권한 설정',
  },

  websocket: {
    strategy: 'exponential_backoff',
    maxRetries: 10,
    backoffMs: 'exponential', // 1s, 2s, 4s, 8s, 16s, 30s, 30s...
    fallback: 'polling',
    userAction: '재연결',
  },
};
```

#### Part 6.1.5: 에러 이벤트 로깅

```typescript
// Part 6.1 에러 이벤트 타입
type ErrorEventType =
  // 발생
  | 'error_occurred'        // 에러 발생
  | 'error_displayed'       // 사용자에게 표시

  // 복구 시도
  | 'auto_retry_started'    // 자동 재시도 시작
  | 'auto_retry_success'    // 자동 재시도 성공
  | 'auto_retry_failed'     // 자동 재시도 실패

  // 사용자 액션
  | 'error_cta_clicked'     // CTA 버튼 클릭
  | 'error_dismissed'       // 사용자가 닫음
  | 'user_recovery_success' // 사용자 액션으로 복구

  // 폴백
  | 'fallback_activated'    // 폴백 모드 활성화
  | 'offline_mode_entered'  // 오프라인 모드 진입
  | 'offline_mode_exited';  // 오프라인 모드 해제

interface ErrorEvent {
  eventType: ErrorEventType;
  errorCode: string;           // 'NETWORK_TIMEOUT', 'AUTH_EXPIRED', etc.
  errorDomain: string;         // 'network', 'auth', 'integration', etc.
  severity: 'critical' | 'major' | 'minor' | 'info';
  context: {
    screen: string;            // 발생 화면
    action: string;            // 발생 시점 액션
    retryCount?: number;       // 재시도 횟수
    recoveryTime?: number;     // 복구까지 시간 (ms)
  };
  timestamp: string;
}
```

### 6.10 Part 6.2: 로딩 상태 (5-Layer Framework)

> **Cross-Cutting Concern**: 로딩 상태는 모든 Part에 걸쳐 일관되게 적용되는 시스템 전반의 관심사입니다.
> "기다림을 가치로 전환" - 사용자가 로딩을 기다리는 것이 아니라 결과를 향해 나아가고 있음을 느끼게 합니다.

#### Part 6.2.1: 로딩 상태 분류 체계

```typescript
// 로딩 상태 심각도
type LoadingSeverity =
  | 'blocking'     // 전체 화면 차단 (인증, 초기 로드)
  | 'partial'      // 일부 영역 로딩 (데이터 페칭)
  | 'background'   // 백그라운드 처리 (동기화, 저장)
  | 'inline';      // 인라인 표시 (버튼 클릭)

// 로딩 표시 유형
type LoadingDisplayType =
  | 'skeleton'     // 콘텐츠 형태 유지 (리스트, 카드)
  | 'spinner'      // 회전 인디케이터 (액션 버튼)
  | 'progress'     // 진행률 표시 (파일 업로드, 분석)
  | 'shimmer'      // 반짝임 효과 (텍스트 로딩)
  | 'pulse'        // 맥박 효과 (연결 대기)
  | 'streaming';   // 스트리밍 표시 (AI 응답)

// 로딩 컨텍스트
type LoadingContext =
  | 'navigation'   // 페이지 전환
  | 'data_fetch'   // 데이터 조회
  | 'action'       // 사용자 액션
  | 'ai_process'   // AI 처리
  | 'sync'         // 동기화
  | 'media';       // 미디어 처리

// 로딩 상태 인터페이스
interface LoadingState {
  id: string;
  severity: LoadingSeverity;
  displayType: LoadingDisplayType;
  context: LoadingContext;
  estimatedDuration?: number;      // 예상 시간 (ms)
  progress?: number;               // 0-100 (progress 타입만)
  message?: string;                // 사용자 메시지
  cancellable?: boolean;           // 취소 가능 여부
  streamingContent?: string;       // 스트리밍 콘텐츠
}
```

#### Part 6.2.2: 로딩 상태 5-Layer Framework

**Layer 1: Strategy (전략/JTBD)**

```
사용자의 핵심 목표:
├─ "기다리는 동안 시간이 낭비되는 느낌이 없도록"
├─ "얼마나 더 기다려야 하는지 알고 싶다"
├─ "지금 무슨 일이 일어나고 있는지 이해하고 싶다"
└─ "기다리다가 갑자기 끝나면 당황스럽지 않게"

Onno 로딩 철학:
├─ 체감 시간 최소화: 실제 시간보다 짧게 느끼게
├─ 진행감 제공: 무언가 일어나고 있음을 시각화
├─ 예측 가능성: 언제 끝날지 힌트 제공
├─ 점진적 결과: 전체가 아닌 부분부터 표시
└─ 낙관적 UI: 성공 가정하고 먼저 표시
```

**Layer 2: Behavioral Design (Fogg Model)**

```
동기(Motivation): "결과가 곧 나온다"
├─ 희망: 진행률 표시로 완료 예상
├─ 기대: 스트리밍으로 결과 미리보기
└─ 성취감: 부분 완료 알림

능력(Ability): "기다리기 쉽다"
├─ 시간 인지 감소: 애니메이션으로 주의 분산
├─ 취소 가능: 불안감 감소 (원하면 중단 가능)
├─ 다른 작업 가능: 백그라운드 처리 알림
└─ 콘텐츠 표시: Skeleton으로 레이아웃 유지

트리거(Trigger): "완료 시 바로 안내"
├─ 완료 알림: 토스트, 사운드, 햅틱
├─ 자동 전환: 로딩 완료 시 결과 화면 전환
└─ 실패 즉시 알림: 기다림 최소화
```

**Layer 3: Structure/Logic (로딩 상태 머신)**

```typescript
// 로딩 상태 머신
type LoadingPhase =
  | 'idle'           // 대기 상태
  | 'pending'        // 요청 시작됨
  | 'loading'        // 로딩 중
  | 'streaming'      // 스트리밍 중
  | 'completing'     // 완료 중 (애니메이션)
  | 'completed'      // 완료됨
  | 'cancelled'      // 취소됨
  | 'error';         // 에러 발생

// 상태 전이
const loadingTransitions = {
  idle: {
    START: 'pending',
  },
  pending: {
    SHOW_LOADING: 'loading',      // 100ms 지연 후
    COMPLETE_FAST: 'completed',   // 100ms 내 완료 시
    ERROR: 'error',
  },
  loading: {
    START_STREAM: 'streaming',
    COMPLETE: 'completing',
    CANCEL: 'cancelled',
    ERROR: 'error',
  },
  streaming: {
    STREAM_CHUNK: 'streaming',    // 계속 스트리밍
    COMPLETE: 'completing',
    ERROR: 'error',
  },
  completing: {
    ANIMATION_DONE: 'completed',  // 완료 애니메이션 후
  },
  completed: {
    RESET: 'idle',
  },
  cancelled: {
    RESET: 'idle',
  },
  error: {
    RETRY: 'pending',
    RESET: 'idle',
  },
};
```

**로딩 표시 타이밍 규칙:**

```typescript
const loadingTimingRules = {
  // 100ms 미만: 로딩 표시 없음 (즉시 완료 느낌)
  instant: {
    maxDuration: 100,
    showLoading: false,
    transitionAnimation: 'none',
  },

  // 100ms-500ms: 미세한 피드백만
  brief: {
    minDuration: 100,
    maxDuration: 500,
    showLoading: true,
    displayType: 'spinner',
    size: 'small',
    delay: 100,          // 100ms 후 표시 시작
  },

  // 500ms-2s: 표준 로딩 표시
  standard: {
    minDuration: 500,
    maxDuration: 2000,
    showLoading: true,
    displayType: 'skeleton' | 'spinner',
    showMessage: false,
  },

  // 2s-10s: 진행률 또는 메시지 표시
  extended: {
    minDuration: 2000,
    maxDuration: 10000,
    showLoading: true,
    displayType: 'progress' | 'skeleton',
    showMessage: true,
    showEstimate: true,
  },

  // 10s+: 단계 표시 및 취소 옵션
  long: {
    minDuration: 10000,
    showLoading: true,
    displayType: 'progress',
    showMessage: true,
    showSteps: true,
    cancellable: true,
    backgroundOption: true,
  },
};
```

**Layer 4: Edge Cases (예외 처리)**

```
// Part별 로딩 시나리오

Part 1: 로그인/온보딩
├─ Google OAuth: 팝업 로딩 → Spinner + "로그인 중..."
├─ 초기 데이터 로드: 전체 화면 Skeleton
├─ Notion/HubSpot 연결: Progress 모달 + "연결 설정 중..."
└─ 에러 시: 100ms 딜레이 없이 즉시 에러 표시

Part 2: Today 화면
├─ 캘린더 동기화: 카드 Skeleton (3개 표시)
├─ 미팅 상세 로드: Shimmer 텍스트
├─ 과거 맥락 로드: 섹션별 Skeleton
└─ 에러 시: Skeleton 유지 + 에러 배너

Part 3: HUD
├─ HUD 실행: 미니 Spinner + "연결 중..."
├─ 실시간 STT: 타이핑 애니메이션 (점 3개)
├─ AI 분석: Pulse 효과 + 스트리밍 텍스트
├─ 질문 생성: Shimmer + 스트리밍
└─ 에러 시: 마지막 성공 상태 유지 + 토스트

Part 4: 확정 모달
├─ 모달 열기: 콘텐츠 Skeleton
├─ Notion 저장: Progress 바 + 단계 표시
├─ HubSpot 동기화: 백그라운드 토스트
└─ 에러 시: 저장된 데이터 유지 + 재시도 CTA

Part 5: 검색
├─ 검색 실행: 결과 Skeleton (5개)
├─ 결과 더 보기: 하단 Spinner
├─ 상세 로드: 인라인 Shimmer
└─ 에러 시: 부분 결과 유지 + 에러 메시지

Part 5.2: 설정
├─ 설정 로드: 섹션 Skeleton
├─ OAuth 재연결: 모달 Spinner
├─ 설정 저장: 버튼 Spinner → 체크 아이콘
└─ 에러 시: 이전 설정 유지 + 토스트
```

**Skeleton 레이아웃 규칙:**

```
Today 화면 - 미팅 카드 Skeleton:
┌─────────────────────────────────────┐
│ [━━━━━━] [━━━━]                     │  ← 시간, 상태 태그
│ [━━━━━━━━━━━━━━━━━]                 │  ← 제목
│ [━━━━━━━━━━] [━━━━━━]               │  ← 참석자, 회사
│                                     │
│ [━━━━━━━━━]                         │  ← 버튼
└─────────────────────────────────────┘

HUD - AI 응답 Skeleton:
┌─────────────────────────────────────┐
│ ● ● ●                               │  ← 타이핑 인디케이터
│ [━━━━━━━━━━━━━━━━━]                 │
│ [━━━━━━━━━━━━]                      │
│ [━━━━━━━━━━━━━━━]                   │
└─────────────────────────────────────┘

검색 결과 Skeleton:
┌─────────────────────────────────────┐
│ [●] [━━━━━━━━━━━━━━━━]              │
│     [━━━━━━━━━] [━━━━]              │
│     [━━━━━━━━━━━━━━━━━━━━━]         │
├─────────────────────────────────────┤
│ [●] [━━━━━━━━━━━━]                  │
│     [━━━━━━] [━━━━━━]               │
│     [━━━━━━━━━━━━━━━]               │
└─────────────────────────────────────┘
```

**Layer 5: Metrics (측정 지표)**

```typescript
// Part 6.2 로딩 상태 메트릭스
const loadingMetrics = {
  // === 체감 시간 ===
  // 실제 로딩 시간
  actualLoadingTime: avg(loading_end - loading_start),
  // 목표: 페이지 로드 < 2초, API 호출 < 500ms

  // 체감 로딩 시간 (설문/세션 종료 후 회고)
  perceivedLoadingTime: userSurvey('loading_felt_slow'),
  // 목표: < 30% 느림 응답

  // === 표시 품질 ===
  // Skeleton 표시율 (적절한 상황에서 표시되었는지)
  skeletonDisplayRate: count(skeleton_shown) / count(loading_needed),
  // 목표: > 95%

  // 로딩 표시 지연 (100ms 규칙 준수)
  loadingDisplayDelay: avg(loading_indicator_shown - loading_start),
  // 목표: < 100ms (빠른 완료 시 표시 안 함 확인)

  // === 사용자 경험 ===
  // 로딩 중 이탈률
  loadingAbandonRate: count(session_end_during_loading) / count(loading_started),
  // 목표: < 5%

  // 로딩 취소율 (취소 가능한 경우)
  loadingCancelRate: count(loading_cancelled) / count(cancellable_loading),
  // 목표: < 10%

  // 로딩 후 즉시 이탈률 (결과에 실망)
  postLoadingBounceRate: count(exit_within_3s_after_load) / count(loading_completed),
  // 목표: < 15%

  // === 기술 성능 ===
  // 첫 콘텐츠 표시 시간 (FCP)
  firstContentfulPaint: webVitals.FCP,
  // 목표: < 1.8초

  // 최대 콘텐츠 표시 시간 (LCP)
  largestContentfulPaint: webVitals.LCP,
  // 목표: < 2.5초

  // 누적 레이아웃 이동 (CLS)
  cumulativeLayoutShift: webVitals.CLS,
  // 목표: < 0.1

  // === 낙관적 UI ===
  // 낙관적 업데이트 롤백률
  optimisticRollbackRate: count(optimistic_reverted) / count(optimistic_applied),
  // 목표: < 2%

  // 스트리밍 완료율
  streamingCompletionRate: count(streaming_completed) / count(streaming_started),
  // 목표: > 98%
};
```

#### Part 6.2.3: 로딩 UI 컴포넌트

```
로딩 표시 유형별 사용 가이드:

1. Skeleton (콘텐츠 형태 유지)
   ├─ 용도: 리스트, 카드, 긴 콘텐츠
   ├─ 장점: 레이아웃 시프트 방지, 기대감 조성
   ├─ 단점: 복잡한 UI 필요
   └─ 적용: Today 카드, 검색 결과, 상세 페이지

   스타일:
   ├─ 배경: #E5E7EB (Gray 200)
   ├─ 애니메이션: Shimmer (좌→우, 1.5초 주기)
   ├─ 라운드: 4px (텍스트), 8px (카드)
   └─ 높이: 텍스트 크기에 맞춤

2. Spinner (회전 인디케이터)
   ├─ 용도: 버튼 클릭, 짧은 로딩
   ├─ 장점: 공간 효율, 인지 빠름
   ├─ 단점: 진행률 표시 불가
   └─ 적용: CTA 버튼, 인라인 액션

   사이즈:
   ├─ Small: 16×16px (버튼 내부)
   ├─ Medium: 24×24px (인라인)
   ├─ Large: 40×40px (영역 로딩)
   └─ XL: 64×64px (전체 화면)

   색상:
   ├─ Primary: #2563EB (Blue 600)
   ├─ Secondary: #6B7280 (Gray 500)
   └─ On Primary: #FFFFFF

3. Progress (진행률 표시)
   ├─ 용도: 긴 작업, 단계 작업
   ├─ 장점: 완료 예측 가능
   ├─ 단점: 정확한 진행률 필요
   └─ 적용: 파일 업로드, AI 분석, 저장

   유형:
   ├─ Linear: 가로 막대 (높이 4px)
   ├─ Circular: 원형 (HUD에서 사용)
   └─ Steps: 단계 표시 (Notion 저장)

4. Streaming (스트리밍 표시)
   ├─ 용도: AI 응답, 실시간 생성
   ├─ 장점: 즉각적 피드백, 몰입감
   ├─ 단점: 최종 결과 모름
   └─ 적용: HUD 질문 생성, AI 분석 결과

   스타일:
   ├─ 커서: 깜빡이는 | (500ms 주기)
   ├─ 타이핑: 자연스러운 속도 (50-100ms/문자)
   └─ 완료: 커서 사라짐 (200ms fade)

5. Pulse (맥박 효과)
   ├─ 용도: 연결 대기, 실시간 상태
   ├─ 장점: 생동감, 낮은 주의 요구
   ├─ 단점: 진행률 표시 불가
   └─ 적용: HUD 연결, 실시간 뱃지

   애니메이션:
   ├─ 크기: 1x → 1.5x → 1x
   ├─ 불투명도: 100% → 40% → 100%
   └─ 주기: 1.5초
```

**낙관적 UI 패턴:**

```typescript
// 낙관적 업데이트 전략
const optimisticPatterns = {
  // 토글 설정
  toggle: {
    pattern: 'instant_reflect',
    description: '클릭 즉시 상태 변경, 백그라운드 저장',
    rollbackTrigger: 'api_error',
    rollbackUI: 'revert_with_toast',
  },

  // 텍스트 저장
  textSave: {
    pattern: 'debounced_save',
    description: '입력 중 자동 저장, 저장 표시',
    delay: 1000,
    indicator: 'subtle_check_icon',
  },

  // 결정 사항 수정
  decisionEdit: {
    pattern: 'optimistic_update',
    description: '즉시 반영, 백그라운드 저장',
    rollbackTrigger: 'api_error',
    rollbackUI: 'inline_error',
  },

  // 통합 저장 (Notion/HubSpot)
  integrationSave: {
    pattern: 'progress_feedback',
    description: '진행률 표시, 완료 후 확인',
    showProgress: true,
    confirmOnComplete: true,
  },
};
```

#### Part 6.2.4: 로딩 이벤트 로깅

```typescript
// Part 6.2 로딩 이벤트 타입
type LoadingEventType =
  // 시작/완료
  | 'loading_started'        // 로딩 시작
  | 'loading_completed'      // 로딩 완료
  | 'loading_error'          // 로딩 실패

  // 사용자 행동
  | 'loading_cancelled'      // 사용자가 취소
  | 'loading_abandoned'      // 로딩 중 이탈

  // 표시
  | 'skeleton_shown'         // Skeleton 표시
  | 'spinner_shown'          // Spinner 표시
  | 'progress_shown'         // Progress 표시
  | 'streaming_started'      // 스트리밍 시작

  // 낙관적 UI
  | 'optimistic_applied'     // 낙관적 업데이트 적용
  | 'optimistic_confirmed'   // 서버 확인 완료
  | 'optimistic_reverted';   // 롤백 발생

interface LoadingEvent {
  eventType: LoadingEventType;
  context: LoadingContext;
  displayType?: LoadingDisplayType;
  duration?: number;           // ms
  expectedDuration?: number;   // 예상 시간
  progress?: number;           // 최종 진행률
  cancelled?: boolean;
  error?: string;
  timestamp: string;
}
```

### 6.11 Part 6.3: 빈 상태 (5-Layer Framework)

**횡단 관심사**: 빈 상태는 모든 Part에 걸쳐 일관되게 적용되는 UX 패턴입니다.

#### 6.11.1 Layer 1: Strategy (JTBD)

```
사용자 목표: 데이터가 없는 상황에서도 서비스의 가치를 이해하고 다음 행동을 취할 수 있다

Job Stories:
- "처음 가입했을 때, 빈 화면이 아닌 서비스 가치를 이해할 수 있는 안내를 보고 싶다"
- "검색 결과가 없을 때, 왜 없는지와 대안을 알고 싶다"
- "미팅이 없는 날, 불안하지 않고 다음 미팅을 기다리거나 과거를 탐색하고 싶다"
- "필터링 결과가 없을 때, 필터 조건을 쉽게 조정하고 싶다"

핵심 원칙:
┌─────────────────────────────────────────────────────────────────┐
│  "빈 상태는 기회다" - 온보딩, 교육, 행동 유도의 기회            │
│  1. 설명하라 (Explain): 왜 비어있는지 명확히                    │
│  2. 안내하라 (Guide): 다음 행동을 제시                          │
│  3. 격려하라 (Encourage): 긍정적 톤 유지                        │
│  4. 가치 전달 (Value): 서비스가 할 수 있는 것을 보여줌          │
└─────────────────────────────────────────────────────────────────┘
```

#### 6.11.2 Layer 2: Behavioral Design (Fogg Model)

```
빈 상태에서의 행동 유도:

B = MAT (Behavior = Motivation × Ability × Trigger)

┌─────────────────────────────────────────────────────────────────┐
│ Motivation (동기 부여)                                          │
├─────────────────────────────────────────────────────────────────┤
│ • 서비스 가치 Preview: "이런 것들을 할 수 있어요"               │
│ • 사회적 증거: "1,234명이 이미 사용 중"                         │
│ • 미래 비전: "첫 미팅이 끝나면 이렇게 보여요" (예시 화면)       │
│ • 긍정적 메시지: "준비 완료! 미팅을 기다리고 있어요"            │
└─────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────┐
│ Ability (쉬움)                                                   │
├─────────────────────────────────────────────────────────────────┤
│ • 원클릭 CTA: "캘린더 연동하기", "첫 미팅 추가"                 │
│ • 빠른 탐색: "검색 조건 초기화", "다른 기간 보기"               │
│ • 컨텍스트 유지: 필터 상태 기억, 이전 검색어 제안               │
└─────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────┐
│ Trigger (행동 유발)                                              │
├─────────────────────────────────────────────────────────────────┤
│ • Primary CTA 버튼: 눈에 띄는 색상, 명확한 액션                 │
│ • Secondary 링크: 대안 행동 제시                                │
│ • 일러스트/아이콘: 시각적 관심 유도                             │
└─────────────────────────────────────────────────────────────────┘
```

#### 6.11.3 Layer 3: Structure/Logic (빈 상태 분류 체계)

```typescript
// 빈 상태 원인 분류
type EmptyStateReason =
  | 'first_time'         // 첫 사용 - 데이터 생성 전
  | 'no_data'            // 조건 만족 데이터 없음
  | 'filtered_out'       // 필터링으로 인한 빈 결과
  | 'search_no_match'    // 검색 결과 없음
  | 'completed_all'      // 모든 항목 완료
  | 'temporal_gap'       // 특정 기간에 데이터 없음
  | 'permission_limited' // 권한 부족으로 접근 불가
  | 'feature_not_setup'; // 기능 미설정

// 빈 상태 컨텍스트
type EmptyStateContext =
  | 'today_meetings'       // Today 화면 - 오늘 미팅 없음
  | 'past_meetings'        // 지난 미팅 리스트 빈 상태
  | 'search_results'       // 검색 결과 없음
  | 'decisions_list'       // 결정 사항 없음
  | 'actions_list'         // 액션 아이템 없음
  | 'insights_list'        // 인사이트 없음
  | 'notifications'        // 알림 없음
  | 'integrations'         // 연동 서비스 없음
  | 'hud_idle'             // HUD 대기 상태
  | 'filter_results';      // 필터 결과 없음

// 빈 상태 콘텐츠 구조
interface EmptyStateContent {
  reason: EmptyStateReason;
  context: EmptyStateContext;

  // 시각적 요소
  illustration: {
    type: 'icon' | 'illustration' | 'animation';
    name: string;            // 에셋 이름
    size: 'sm' | 'md' | 'lg'; // 48 | 80 | 120px
  };

  // 텍스트 콘텐츠
  title: string;             // 주요 메시지 (bold)
  description?: string;      // 부가 설명
  tone: 'neutral' | 'positive' | 'encouraging' | 'helpful';

  // 행동 유도
  primaryAction?: {
    label: string;
    action: string;          // 이벤트 이름 또는 URL
    variant: 'primary' | 'secondary';
  };
  secondaryAction?: {
    label: string;
    action: string;
  };

  // 대안 제시
  suggestions?: string[];    // "이런 것도 해보세요"
  relatedLinks?: Array<{ label: string; href: string }>;
}
```

**빈 상태 컨텐츠 매핑**:

```typescript
const EMPTY_STATE_CONTENT: Record<string, EmptyStateContent> = {
  // ============================================
  // Part 2: Today 화면
  // ============================================
  'today_first_time': {
    reason: 'first_time',
    context: 'today_meetings',
    illustration: { type: 'illustration', name: 'welcome-calendar', size: 'lg' },
    title: '첫 미팅을 기다리고 있어요',
    description: '캘린더를 연동하면 오늘 예정된 미팅이 여기에 표시됩니다.',
    tone: 'encouraging',
    primaryAction: {
      label: '캘린더 연동하기',
      action: 'navigate:/settings/integrations',
      variant: 'primary',
    },
    secondaryAction: {
      label: '수동으로 미팅 추가',
      action: 'open:add-meeting-modal',
    },
  },

  'today_no_meetings': {
    reason: 'no_data',
    context: 'today_meetings',
    illustration: { type: 'illustration', name: 'relax-coffee', size: 'md' },
    title: '오늘은 미팅이 없어요',
    description: '여유로운 하루 보내세요! 지난 미팅을 돌아보거나 검색해보세요.',
    tone: 'positive',
    primaryAction: {
      label: '지난 미팅 보기',
      action: 'navigate:/search?filter=past',
      variant: 'secondary',
    },
    suggestions: ['지난 주 미팅 복습하기', '결정 사항 확인하기'],
  },

  'today_all_completed': {
    reason: 'completed_all',
    context: 'today_meetings',
    illustration: { type: 'icon', name: 'check-circle', size: 'lg' },
    title: '오늘 미팅 완료! 🎉',
    description: '모든 미팅을 마쳤습니다. 수고하셨어요!',
    tone: 'positive',
    primaryAction: {
      label: '오늘의 결정 사항 보기',
      action: 'navigate:/decisions?date=today',
      variant: 'primary',
    },
  },

  // ============================================
  // Part 3: HUD
  // ============================================
  'hud_waiting': {
    reason: 'temporal_gap',
    context: 'hud_idle',
    illustration: { type: 'animation', name: 'pulse-dot', size: 'sm' },
    title: '대기 중',
    description: '다음 미팅까지 45분 남았습니다',
    tone: 'neutral',
  },

  'hud_no_active_meeting': {
    reason: 'no_data',
    context: 'hud_idle',
    illustration: { type: 'icon', name: 'calendar-clock', size: 'sm' },
    title: '진행 중인 미팅 없음',
    description: '미팅이 시작되면 자동으로 활성화됩니다',
    tone: 'neutral',
  },

  // ============================================
  // Part 5: 검색
  // ============================================
  'search_initial': {
    reason: 'first_time',
    context: 'search_results',
    illustration: { type: 'icon', name: 'search', size: 'lg' },
    title: '무엇을 찾으시나요?',
    description: '미팅, 결정, 인사이트를 자연어로 검색하세요',
    tone: 'helpful',
    suggestions: [
      '"지난 달 예산 관련 결정"',
      '"김철수와의 미팅"',
      '"Q4 전략 논의"',
    ],
  },

  'search_no_results': {
    reason: 'search_no_match',
    context: 'search_results',
    illustration: { type: 'illustration', name: 'no-results', size: 'md' },
    title: '검색 결과가 없습니다',
    description: '다른 키워드로 검색하거나 필터를 조정해보세요',
    tone: 'helpful',
    primaryAction: {
      label: '필터 초기화',
      action: 'reset:search-filters',
      variant: 'secondary',
    },
    suggestions: ['더 짧은 키워드 사용', '날짜 범위 확대', '필터 조건 완화'],
  },

  'search_filtered_empty': {
    reason: 'filtered_out',
    context: 'filter_results',
    illustration: { type: 'icon', name: 'filter-x', size: 'md' },
    title: '필터 조건에 맞는 결과가 없습니다',
    description: '현재 필터: {activeFilters}',
    tone: 'neutral',
    primaryAction: {
      label: '필터 수정',
      action: 'open:filter-panel',
      variant: 'secondary',
    },
    secondaryAction: {
      label: '모든 필터 해제',
      action: 'reset:all-filters',
    },
  },

  // ============================================
  // Part 4: 결정/액션
  // ============================================
  'decisions_empty': {
    reason: 'no_data',
    context: 'decisions_list',
    illustration: { type: 'illustration', name: 'lightbulb', size: 'md' },
    title: '아직 결정 사항이 없습니다',
    description: '미팅 중 발생한 결정 사항이 여기에 정리됩니다',
    tone: 'neutral',
  },

  'actions_empty': {
    reason: 'no_data',
    context: 'actions_list',
    illustration: { type: 'icon', name: 'clipboard-list', size: 'md' },
    title: '할 일이 없습니다',
    description: '미팅에서 도출된 액션 아이템이 여기에 표시됩니다',
    tone: 'positive',
  },

  'actions_all_completed': {
    reason: 'completed_all',
    context: 'actions_list',
    illustration: { type: 'animation', name: 'confetti', size: 'md' },
    title: '모든 할 일 완료! 👏',
    description: '훌륭해요! 모든 액션 아이템을 처리했습니다',
    tone: 'positive',
  },

  // ============================================
  // Part 5.2: 설정
  // ============================================
  'integrations_empty': {
    reason: 'feature_not_setup',
    context: 'integrations',
    illustration: { type: 'illustration', name: 'connect-apps', size: 'lg' },
    title: '연동된 서비스가 없습니다',
    description: 'Notion, Salesforce, Slack과 연동하여 업무 효율을 높이세요',
    tone: 'encouraging',
    primaryAction: {
      label: 'Notion 연동하기',
      action: 'oauth:notion',
      variant: 'primary',
    },
    suggestions: ['캘린더 연동으로 미팅 자동 감지', 'Slack 연동으로 알림 받기'],
  },

  'notifications_empty': {
    reason: 'no_data',
    context: 'notifications',
    illustration: { type: 'icon', name: 'bell-off', size: 'md' },
    title: '새로운 알림이 없습니다',
    description: '미팅 관련 소식이 있으면 알려드릴게요',
    tone: 'neutral',
  },
};
```

#### 6.11.4 Layer 4: Edge Cases

```
빈 상태 Edge Cases:

┌─────────────────────────────────────────────────────────────────┐
│ Case 1: 로딩 후 빈 상태                                         │
├─────────────────────────────────────────────────────────────────┤
│ 상황: Skeleton → 빈 상태 전환                                   │
│ 처리:                                                           │
│ • 로딩 완료 후 자연스러운 페이드 전환                           │
│ • 빈 상태 진입 시 콘텐츠 팝인 애니메이션 (scale 0.95 → 1)       │
│ • 최소 200ms 동안 Skeleton 표시 (깜빡임 방지)                   │
└─────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────┐
│ Case 2: 에러 후 빈 상태 복구                                    │
├─────────────────────────────────────────────────────────────────┤
│ 상황: 네트워크 에러 → 재시도 → 데이터 없음                      │
│ 처리:                                                           │
│ • 에러 메시지 dismiss 후 빈 상태로 전환                         │
│ • "데이터를 불러왔지만 결과가 없습니다" 메시지                  │
│ • 재시도 버튼 유지 (혹시 캐시 문제일 수 있음)                   │
└─────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────┐
│ Case 3: 부분 빈 상태                                            │
├─────────────────────────────────────────────────────────────────┤
│ 상황: 일부 섹션만 비어있음 (예: 결정은 있지만 액션 없음)        │
│ 처리:                                                           │
│ • 섹션별 인라인 빈 상태 (작은 사이즈)                          │
│ • 전체 페이지 빈 상태가 아닌 섹션 단위 처리                     │
│ • "아직 없음" 정도의 간결한 메시지                              │
└─────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────┐
│ Case 4: 오프라인 + 빈 상태                                      │
├─────────────────────────────────────────────────────────────────┤
│ 상황: 오프라인 상태에서 캐시된 데이터도 없음                    │
│ 처리:                                                           │
│ • 오프라인 배지 + 빈 상태 조합                                  │
│ • "오프라인 상태입니다. 연결되면 데이터를 불러옵니다"           │
│ • 자동 재시도 설정 (온라인 복구 시)                             │
└─────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────┐
│ Case 5: 권한 부족으로 인한 빈 상태                              │
├─────────────────────────────────────────────────────────────────┤
│ 상황: 데이터는 있지만 사용자가 볼 권한 없음                     │
│ 처리:                                                           │
│ • 일반 빈 상태와 구분                                           │
│ • "이 콘텐츠를 볼 수 있는 권한이 없습니다"                      │
│ • 권한 요청 또는 관리자 연락 안내                               │
└─────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────┐
│ Case 6: 검색 중 빈 상태 전환                                    │
├─────────────────────────────────────────────────────────────────┤
│ 상황: 검색어 입력 → 결과 있음 → 수정 → 결과 없음               │
│ 처리:                                                           │
│ • debounce 적용 (300ms) 후 빈 상태 표시                        │
│ • 이전 검색어 제안: "'{이전검색어}'(으)로 다시 검색"           │
│ • 점진적 전환 (기존 결과 fade out → 빈 상태 fade in)           │
└─────────────────────────────────────────────────────────────────┘
```

#### 6.11.5 Layer 5: Metrics (성과 지표)

```typescript
// 빈 상태 성과 지표

const EMPTY_STATE_METRICS = {
  // 전환율 (빈 상태에서 CTA 클릭)
  conversionRate: {
    target: 0.30,    // 30% 이상
    warning: 0.15,   // 15% 미만 경고
    critical: 0.05,  // 5% 미만 심각
  },

  // 이탈율 (빈 상태 진입 후 앱 종료)
  bounceRate: {
    target: 0.20,    // 20% 미만
    warning: 0.40,   // 40% 경고
    critical: 0.60,  // 60% 심각
  },

  // 탐색율 (빈 상태에서 다른 화면 이동)
  explorationRate: {
    target: 0.50,    // 50% 이상
    warning: 0.30,   // 30% 미만 경고
    critical: 0.15,  // 15% 미만 심각
  },

  // 재방문율 (빈 상태 경험 후 재방문)
  returnRate: {
    target: 0.70,    // 70% 이상
    warning: 0.50,   // 50% 미만 경고
    critical: 0.30,  // 30% 미만 심각
  },

  // 온보딩 완료율 (first_time 빈 상태 → 첫 데이터 생성)
  onboardingCompletionRate: {
    target: 0.60,    // 60% 이상
    warning: 0.40,   // 40% 미만 경고
    critical: 0.20,  // 20% 미만 심각
  },
};

// 빈 상태 이벤트 타입
type EmptyStateEventType =
  | 'empty_state_shown'       // 빈 상태 표시
  | 'empty_state_cta_clicked' // CTA 클릭
  | 'empty_state_dismissed'   // 빈 상태 해소 (데이터 생성됨)
  | 'empty_state_navigated'   // 다른 화면으로 이동
  | 'empty_state_bounced';    // 빈 상태에서 앱 종료

interface EmptyStateEvent {
  eventType: EmptyStateEventType;
  reason: EmptyStateReason;
  context: EmptyStateContext;
  ctaClicked?: string;              // 클릭한 CTA
  timeSpentMs?: number;             // 빈 상태 체류 시간
  navigatedTo?: string;             // 이동한 화면
  previousScreen?: string;          // 이전 화면
  timestamp: string;
}
```

**Part별 빈 상태 시나리오**:

```
Part 1.4/1.5 (온보딩/첫 미팅 준비):
├─ 첫 가입 후 빈 화면 → 캘린더 연동 유도
├─ Notion 미연동 → 연동 혜택 설명 + CTA
└─ 미팅 준비 항목 없음 → 기본 체크리스트 제안

Part 2 (Today 화면):
├─ 오늘 미팅 0개 → 여유 메시지 + 과거 탐색 유도
├─ 모든 미팅 완료 → 축하 + 결정 사항 리뷰 유도
└─ 특정 섹션만 빈 상태 → 인라인 작은 메시지

Part 3 (HUD):
├─ 대기 중 → 다음 미팅까지 시간 표시
├─ 진행 중 미팅 없음 → 간결한 대기 상태
└─ AI 제안 없음 → "분석 중" 또는 "대화를 듣고 있어요"

Part 4 (확정 모달):
├─ 결정 사항 없음 → "이 미팅에서 결정된 사항이 없습니다"
├─ 액션 아이템 없음 → 긍정적 메시지 + 수동 추가 옵션
└─ 인사이트 없음 → "분석 중" 또는 간략 설명

Part 5 (검색):
├─ 초기 상태 → 검색 방법 안내 + 예시 제안
├─ 검색 결과 없음 → 대안 키워드 + 필터 조정 안내
└─ 필터 결과 없음 → 필터 수정/초기화 옵션

Part 5.2 (설정):
├─ 연동 서비스 없음 → 연동 혜택 + Notion 우선 유도
├─ 알림 기록 없음 → 간결한 "새 알림 없음"
└─ 데이터 없음 (내보내기) → 미팅 데이터 필요 안내
```

### 6.12 Part 6.4: 접근성 (5-Layer Framework)

**횡단 관심사 (Cross-Cutting Concern)**: 접근성은 모든 Part에 균일하게 적용되는 기반 요소입니다.

#### Layer 1: 전략 (Strategy) - JTBD 관점

```
접근성이 해결하는 Job To Be Done:
├─ "화면을 볼 수 없어도 미팅 정보를 확인하고 싶다" (스크린 리더)
├─ "마우스 없이도 모든 기능을 사용하고 싶다" (키보드 네비게이션)
├─ "색상만으로 정보를 구분하지 않았으면 좋겠다" (색각 이상)
├─ "움직이는 요소가 불편하다" (모션 민감)
├─ "작은 텍스트를 읽기 어렵다" (시력 저하)
└─ "터치 영역이 너무 작다" (운동 기능 제한)

WCAG 2.1 AA 준수 목표:
├─ Perceivable (인식 가능): 모든 정보를 다양한 방식으로 인식
├─ Operable (조작 가능): 다양한 입력 방식으로 조작
├─ Understandable (이해 가능): 예측 가능하고 일관된 동작
└─ Robust (견고함): 다양한 보조 기술과 호환
```

**접근성 사용자 페르소나**:

```typescript
interface AccessibilityPersona {
  id: string;
  name: string;
  assistiveTech: string[];
  challenges: string[];
  needs: string[];
}

const ACCESSIBILITY_PERSONAS: AccessibilityPersona[] = [
  {
    id: 'screen_reader_user',
    name: '스크린 리더 사용자',
    assistiveTech: ['NVDA', 'JAWS', 'VoiceOver', 'TalkBack'],
    challenges: [
      '시각적 레이아웃 인식 불가',
      '이미지/아이콘 의미 파악',
      '동적 콘텐츠 변화 인지',
    ],
    needs: [
      '모든 요소에 의미있는 레이블',
      'ARIA live region으로 변화 알림',
      '논리적인 탭 순서',
    ],
  },
  {
    id: 'keyboard_only_user',
    name: '키보드 전용 사용자',
    assistiveTech: ['키보드', '스위치 장치'],
    challenges: [
      '마우스 호버 상호작용 불가',
      '드래그 앤 드롭 사용 불가',
      '작은 클릭 영역 접근 어려움',
    ],
    needs: [
      '모든 기능 키보드 접근',
      '명확한 포커스 표시',
      '논리적 탭 순서',
    ],
  },
  {
    id: 'low_vision_user',
    name: '저시력 사용자',
    assistiveTech: ['화면 확대기', '고대비 모드'],
    challenges: [
      '작은 텍스트 읽기 어려움',
      '낮은 대비의 색상 구분',
      '움직이는 요소 추적 어려움',
    ],
    needs: [
      '최소 4.5:1 색상 대비',
      '텍스트 크기 조절 가능',
      '확대해도 레이아웃 유지',
    ],
  },
  {
    id: 'color_blind_user',
    name: '색각 이상 사용자',
    assistiveTech: ['색맹 필터'],
    challenges: [
      '빨강-녹색 구분 어려움',
      '색상만으로 상태 구분 불가',
    ],
    needs: [
      '색상 외 추가 정보 제공 (아이콘, 텍스트)',
      '패턴이나 모양으로 구분',
    ],
  },
  {
    id: 'motion_sensitive_user',
    name: '모션 민감 사용자',
    assistiveTech: ['reduced-motion 설정'],
    challenges: [
      '애니메이션으로 인한 어지러움',
      '자동 재생 콘텐츠',
    ],
    needs: [
      'prefers-reduced-motion 존중',
      '애니메이션 끄기 옵션',
    ],
  },
];
```

#### Layer 2: 행동 설계 (Behavioral Design) - Fogg Model (B = MAT)

```
접근성에서의 Fogg Model:

Motivation (동기):
├─ 접근성 사용자도 동일한 목표 달성 욕구
├─ 배제되지 않고 독립적으로 사용하고 싶음
└─ 비장애인과 동일한 효율성 기대

Ability (능력) - 접근성이 향상시키는 것:
├─ 스크린 리더: 음성으로 정보 접근 가능
├─ 키보드 네비게이션: 마우스 없이 조작 가능
├─ 고대비 모드: 낮은 시력에서도 인식 가능
├─ 확대 기능: 작은 요소도 명확히 볼 수 있음
└─ 모션 감소: 어지러움 없이 사용 가능

Trigger (촉발) - 접근성 친화적 트리거:
├─ 포커스 표시: 현재 위치 명확히 인지
├─ 스킵 링크: 핵심 콘텐츠로 빠른 이동
├─ ARIA 알림: 동적 변화 자동 안내
└─ 키보드 단축키: 빠른 작업 수행
```

#### Layer 3: 구조 및 논리 (Structure & Logic)

```typescript
// ============================================
// 접근성 타입 정의
// ============================================

type AccessibilityFeature =
  | 'screen_reader'      // 스크린 리더 지원
  | 'keyboard_nav'       // 키보드 네비게이션
  | 'focus_management'   // 포커스 관리
  | 'color_contrast'     // 색상 대비
  | 'reduced_motion'     // 모션 감소
  | 'text_scaling'       // 텍스트 크기 조절
  | 'touch_target'       // 터치 영역
  | 'alt_text'           // 대체 텍스트
  | 'aria_labels'        // ARIA 레이블
  | 'live_regions';      // 라이브 영역

type AriaRole =
  | 'button' | 'link' | 'checkbox' | 'radio'
  | 'tab' | 'tabpanel' | 'tablist'
  | 'menu' | 'menuitem' | 'menubar'
  | 'dialog' | 'alertdialog' | 'alert'
  | 'navigation' | 'main' | 'banner' | 'contentinfo'
  | 'list' | 'listitem' | 'listbox' | 'option'
  | 'region' | 'status' | 'timer' | 'log'
  | 'progressbar' | 'slider' | 'spinbutton'
  | 'tooltip' | 'tree' | 'treeitem';

type AriaLive = 'off' | 'polite' | 'assertive';

// ============================================
// 접근성 설정 인터페이스
// ============================================

interface AccessibilitySettings {
  // 모션 설정
  reduceMotion: boolean;          // 모션 줄이기
  reduceTransparency: boolean;    // 투명도 줄이기

  // 시각적 설정
  highContrast: boolean;          // 고대비 모드
  largeText: boolean;             // 큰 텍스트
  textScaleFactor: number;        // 텍스트 배율 (1.0 - 2.0)

  // 포커스 설정
  showFocusOutline: boolean;      // 포커스 윤곽선 항상 표시
  focusOutlineWidth: 'normal' | 'thick'; // 포커스 선 두께

  // 스크린 리더 최적화
  verboseMode: boolean;           // 상세 안내 모드
  announceStatusChanges: boolean; // 상태 변화 알림

  // 키보드 설정
  keyboardShortcutsEnabled: boolean; // 키보드 단축키
  stickyKeys: boolean;            // 고정 키
}

const DEFAULT_ACCESSIBILITY_SETTINGS: AccessibilitySettings = {
  reduceMotion: false, // prefers-reduced-motion 따름
  reduceTransparency: false,
  highContrast: false,
  largeText: false,
  textScaleFactor: 1.0,
  showFocusOutline: true,
  focusOutlineWidth: 'normal',
  verboseMode: false,
  announceStatusChanges: true,
  keyboardShortcutsEnabled: true,
  stickyKeys: false,
};

// ============================================
// 키보드 네비게이션 맵
// ============================================

interface KeyboardShortcut {
  key: string;
  modifiers?: ('ctrl' | 'alt' | 'shift' | 'meta')[];
  action: string;
  description: string;
  scope: 'global' | 'today' | 'hud' | 'search' | 'modal' | 'settings';
}

const KEYBOARD_SHORTCUTS: KeyboardShortcut[] = [
  // 전역 단축키
  { key: '/', modifiers: [], action: 'focusSearch', description: '검색으로 이동', scope: 'global' },
  { key: 'Escape', modifiers: [], action: 'closeModal', description: '모달 닫기', scope: 'global' },
  { key: '?', modifiers: ['shift'], action: 'showShortcuts', description: '단축키 안내', scope: 'global' },

  // Today 화면
  { key: 'j', modifiers: [], action: 'nextMeeting', description: '다음 미팅', scope: 'today' },
  { key: 'k', modifiers: [], action: 'prevMeeting', description: '이전 미팅', scope: 'today' },
  { key: 'Enter', modifiers: [], action: 'openMeeting', description: '미팅 열기', scope: 'today' },
  { key: 'p', modifiers: [], action: 'prepareMeeting', description: '미팅 준비', scope: 'today' },

  // HUD
  { key: 'Space', modifiers: [], action: 'toggleRecording', description: '녹음 토글', scope: 'hud' },
  { key: 'c', modifiers: [], action: 'confirmDecision', description: '결정 확정', scope: 'hud' },
  { key: 'd', modifiers: [], action: 'dismissSuggestion', description: '제안 무시', scope: 'hud' },

  // 검색
  { key: 'Enter', modifiers: [], action: 'search', description: '검색 실행', scope: 'search' },
  { key: 'ArrowDown', modifiers: [], action: 'nextResult', description: '다음 결과', scope: 'search' },
  { key: 'ArrowUp', modifiers: [], action: 'prevResult', description: '이전 결과', scope: 'search' },

  // 모달
  { key: 'Tab', modifiers: [], action: 'nextField', description: '다음 필드', scope: 'modal' },
  { key: 'Tab', modifiers: ['shift'], action: 'prevField', description: '이전 필드', scope: 'modal' },
  { key: 'Enter', modifiers: ['ctrl'], action: 'submit', description: '제출', scope: 'modal' },
];

// ============================================
// 포커스 관리 타입
// ============================================

interface FocusTrap {
  containerId: string;
  firstFocusableSelector: string;
  lastFocusableSelector: string;
  returnFocusTo: string | null;
}

interface FocusContext {
  currentFocus: string | null;
  focusHistory: string[];
  activeTrap: FocusTrap | null;
  skipLinkTarget: string | null;
}

// ============================================
// ARIA 레이블 맵
// ============================================

const ARIA_LABELS = {
  // 네비게이션
  mainNav: '메인 네비게이션',
  tabBar: '탭 바',
  skipLink: '본문으로 바로 가기',

  // Today 화면
  meetingList: '오늘의 미팅 목록',
  meetingCard: (title: string, time: string) => `${title}, ${time} 미팅`,
  prepareButton: (title: string) => `${title} 미팅 준비하기`,

  // HUD
  hudPanel: 'HUD 패널',
  suggestionCard: (type: string) => `AI 제안: ${type}`,
  confirmButton: '결정 확정하기',
  dismissButton: '제안 무시하기',

  // 검색
  searchInput: '미팅 검색',
  searchResults: (count: number) => `검색 결과 ${count}개`,
  filterPanel: '검색 필터',

  // 설정
  settingsMenu: '설정 메뉴',
  integrationItem: (name: string, status: string) => `${name} 연동, ${status}`,
  toggleSwitch: (label: string, state: boolean) => `${label}, ${state ? '켜짐' : '꺼짐'}`,

  // 공통
  closeButton: '닫기',
  loadingSpinner: '로딩 중',
  errorMessage: (message: string) => `오류: ${message}`,
  successMessage: (message: string) => `성공: ${message}`,
};

// ============================================
// 색상 대비 검증 함수
// ============================================

interface ColorContrastResult {
  ratio: number;
  passAA: boolean;        // 4.5:1 이상
  passAALarge: boolean;   // 3:1 이상 (큰 텍스트)
  passAAA: boolean;       // 7:1 이상
}

function checkColorContrast(foreground: string, background: string): ColorContrastResult {
  // 색상 대비 계산 로직
  const ratio = calculateContrastRatio(foreground, background);
  return {
    ratio,
    passAA: ratio >= 4.5,
    passAALarge: ratio >= 3.0,
    passAAA: ratio >= 7.0,
  };
}

// Onno 색상 시스템 대비 검증
const COLOR_CONTRAST_CHECKS = {
  textOnWhite: { fg: '#1E293B', bg: '#FFFFFF', expected: '14.8:1' }, // ✓ AAA
  textOnGray100: { fg: '#1E293B', bg: '#F8FAFC', expected: '13.5:1' }, // ✓ AAA
  blueOnWhite: { fg: '#3B82F6', bg: '#FFFFFF', expected: '4.5:1' }, // ✓ AA
  errorOnWhite: { fg: '#EF4444', bg: '#FFFFFF', expected: '4.6:1' }, // ✓ AA
  successOnWhite: { fg: '#22C55E', bg: '#FFFFFF', expected: '3.2:1' }, // ⚠️ Large only
  grayOnWhite: { fg: '#64748B', bg: '#FFFFFF', expected: '5.0:1' }, // ✓ AA
};
```

#### Layer 4: 엣지 케이스 및 예외 처리

```typescript
// ============================================
// 접근성 엣지 케이스 처리
// ============================================

interface AccessibilityEdgeCases {
  scenario: string;
  challenge: string;
  solution: string;
  implementation: string;
}

const ACCESSIBILITY_EDGE_CASES: AccessibilityEdgeCases[] = [
  // 동적 콘텐츠
  {
    scenario: 'HUD 실시간 업데이트',
    challenge: '스크린 리더가 새 콘텐츠를 인지하지 못함',
    solution: 'ARIA live region으로 변화 알림',
    implementation: `
      <div aria-live="polite" aria-atomic="false">
        {newSuggestions.map(s => <SuggestionCard key={s.id} />)}
      </div>
      // assertive는 중요한 알림에만 사용
      <div role="alert" aria-live="assertive">
        {criticalError && <ErrorBanner />}
      </div>
    `,
  },

  // 모달 포커스 트랩
  {
    scenario: '모달 열릴 때 포커스 관리',
    challenge: '포커스가 모달 외부로 나감',
    solution: '포커스 트랩 + 닫힐 때 원래 위치 복원',
    implementation: `
      // 모달 열릴 때
      1. 현재 포커스 위치 저장
      2. 모달 내 첫 포커스 가능 요소로 이동
      3. Tab 키로 순환 (첫↔마지막)

      // 모달 닫힐 때
      4. 저장된 위치로 포커스 복원
    `,
  },

  // 드래그 앤 드롭 대안
  {
    scenario: '카드 순서 변경 (드래그)',
    challenge: '키보드로 드래그 불가',
    solution: '키보드 전용 순서 변경 인터페이스',
    implementation: `
      // 키보드 대안 제공
      - Space: 아이템 선택
      - Arrow Up/Down: 위치 이동
      - Enter: 확정
      - Escape: 취소

      // 스크린 리더 안내
      "항목을 선택하려면 Space를 누르세요.
       이동하려면 화살표 키를 사용하세요."
    `,
  },

  // 타이머/자동 진행
  {
    scenario: 'HUD 세션 자동 전환',
    challenge: '자동 전환이 사용자를 혼란스럽게 함',
    solution: '자동 전환 전 안내 + 일시정지 옵션',
    implementation: `
      // 전환 5초 전 알림
      <div role="timer" aria-live="polite">
        미팅 완료 화면으로 5초 후 이동합니다.
        <button onClick={pauseTransition}>머무르기</button>
      </div>
    `,
  },

  // 색상만으로 상태 표시
  {
    scenario: '미팅 카드 상태 표시',
    challenge: '빨강=긴급, 초록=완료를 색맹 사용자가 구분 불가',
    solution: '아이콘 + 텍스트 레이블 추가',
    implementation: `
      // 색상 + 아이콘 + 텍스트 조합
      <Badge color="red" icon={<AlertIcon />}>
        긴급
      </Badge>
      <Badge color="green" icon={<CheckIcon />}>
        완료
      </Badge>
    `,
  },

  // 복잡한 데이터 테이블
  {
    scenario: '검색 결과 테이블',
    challenge: '스크린 리더가 행/열 관계 파악 어려움',
    solution: '적절한 테이블 마크업 + 요약',
    implementation: `
      <table aria-label="검색 결과">
        <caption className="sr-only">
          총 {total}개의 검색 결과. 제목, 날짜, 참석자 순으로 표시됩니다.
        </caption>
        <thead>
          <tr>
            <th scope="col">제목</th>
            <th scope="col">날짜</th>
            <th scope="col">참석자</th>
          </tr>
        </thead>
        ...
      </table>
    `,
  },

  // 복잡한 폼 검증
  {
    scenario: '폼 에러 표시',
    challenge: '에러 메시지와 입력 필드 연결',
    solution: 'aria-describedby + aria-invalid',
    implementation: `
      <label htmlFor="email">이메일</label>
      <input
        id="email"
        aria-invalid={!!error}
        aria-describedby={error ? "email-error" : undefined}
      />
      {error && (
        <span id="email-error" role="alert">
          {error}
        </span>
      )}
    `,
  },

  // 모션 민감 사용자
  {
    scenario: '페이지 전환 애니메이션',
    challenge: '모션이 어지러움 유발',
    solution: 'prefers-reduced-motion 미디어 쿼리',
    implementation: `
      const prefersReducedMotion =
        window.matchMedia('(prefers-reduced-motion: reduce)').matches;

      const transition = prefersReducedMotion
        ? { duration: 0 }
        : { duration: 0.3, ease: 'easeOut' };
    `,
  },
];

// ============================================
// Part별 접근성 요구사항
// ============================================

const PART_ACCESSIBILITY_REQUIREMENTS = {
  'Part 1.4/1.5': {
    name: '온보딩/미팅 준비',
    requirements: [
      '온보딩 단계 안내: "1/5 단계" 스크린 리더 읽기',
      '목표 모드 선택: 라디오 그룹으로 구현',
      '체크리스트: 체크박스 상태 명확히',
      'OAuth 버튼: 명확한 레이블 "Google로 연결"',
    ],
  },

  'Part 2': {
    name: 'Today 화면',
    requirements: [
      '미팅 목록: 키보드로 탐색 가능 (j/k)',
      '미팅 카드: 상태 + 시간 + 제목 읽기',
      '필터: 활성 필터 상태 안내',
      '섹션 점프: 스킵 링크 제공',
    ],
  },

  'Part 3': {
    name: 'HUD',
    requirements: [
      '실시간 업데이트: aria-live="polite"',
      '제안 카드: 역할/상태 명확히',
      '타이머: role="timer" 사용',
      '확정/무시: 빠른 키보드 접근 (c/d)',
      'Always-on-Top: 포커스 관리 주의',
    ],
  },

  'Part 4': {
    name: '확정 모달',
    requirements: [
      '모달: 포커스 트랩 구현',
      '결정 사항 편집: 인라인 편집 접근성',
      '진행률: aria-valuenow 업데이트',
      'Notion 저장: 비동기 상태 알림',
    ],
  },

  'Part 5': {
    name: '검색',
    requirements: [
      '검색창: 자동완성 접근성 (combobox)',
      '결과 목록: 개수 안내 + 탐색',
      '필터 패널: 열림/닫힘 상태',
      '무한 스크롤: 로드 더보기 안내',
    ],
  },

  'Part 5.2': {
    name: '설정',
    requirements: [
      '토글 스위치: 상태 명확히 읽기',
      '연동 관리: 연결 상태 안내',
      'OAuth: 새 창 열림 안내',
      '위험 작업: 확인 대화상자',
    ],
  },
};
```

#### Layer 5: 메트릭 및 성공 지표

```typescript
// ============================================
// 접근성 메트릭 정의
// ============================================

interface AccessibilityMetrics {
  // WCAG 준수율
  wcagCompliance: {
    perceivable: number;      // 인식 가능 준수율 (%)
    operable: number;         // 조작 가능 준수율 (%)
    understandable: number;   // 이해 가능 준수율 (%)
    robust: number;           // 견고함 준수율 (%)
    overall: number;          // 전체 준수율 (%)
  };

  // 키보드 접근성
  keyboardAccessibility: {
    allInteractiveReachable: boolean;  // 모든 상호작용 요소 도달 가능
    logicalTabOrder: boolean;          // 논리적 탭 순서
    noKeyboardTraps: boolean;          // 키보드 트랩 없음
    visibleFocusIndicator: boolean;    // 포커스 표시 명확
    shortcutsWorking: number;          // 단축키 작동률 (%)
  };

  // 스크린 리더 호환성
  screenReaderCompatibility: {
    allElementsLabeled: boolean;       // 모든 요소 레이블 있음
    dynamicContentAnnounced: boolean;  // 동적 콘텐츠 알림
    errorMessagesLinked: boolean;      // 에러 메시지 연결
    formFieldsDescribed: boolean;      // 폼 필드 설명
    imagesHaveAlt: boolean;            // 이미지 대체 텍스트
  };

  // 시각적 접근성
  visualAccessibility: {
    colorContrastPassing: number;      // 색상 대비 통과율 (%)
    textScalableWithoutBreaking: boolean; // 200% 확대 가능
    noColorOnlyInfo: boolean;          // 색상만으로 정보 전달 안함
    motionRespected: boolean;          // reduced-motion 존중
  };

  // 사용자 테스트 피드백
  userFeedback: {
    screenReaderUserSatisfaction: number; // 1-5
    keyboardUserSatisfaction: number;     // 1-5
    accessibilityIssuesReported: number;  // 보고된 이슈 수
  };
}

// 접근성 목표
const ACCESSIBILITY_TARGETS: AccessibilityMetrics = {
  wcagCompliance: {
    perceivable: 100,
    operable: 100,
    understandable: 100,
    robust: 100,
    overall: 100,
  },
  keyboardAccessibility: {
    allInteractiveReachable: true,
    logicalTabOrder: true,
    noKeyboardTraps: true,
    visibleFocusIndicator: true,
    shortcutsWorking: 100,
  },
  screenReaderCompatibility: {
    allElementsLabeled: true,
    dynamicContentAnnounced: true,
    errorMessagesLinked: true,
    formFieldsDescribed: true,
    imagesHaveAlt: true,
  },
  visualAccessibility: {
    colorContrastPassing: 100,
    textScalableWithoutBreaking: true,
    noColorOnlyInfo: true,
    motionRespected: true,
  },
  userFeedback: {
    screenReaderUserSatisfaction: 4.0,
    keyboardUserSatisfaction: 4.0,
    accessibilityIssuesReported: 0,
  },
};

// ============================================
// 접근성 이벤트 타입
// ============================================

type AccessibilityEventType =
  | 'keyboard_shortcut_used'        // 키보드 단축키 사용
  | 'screen_reader_detected'        // 스크린 리더 감지
  | 'reduced_motion_enabled'        // 모션 감소 활성화
  | 'high_contrast_enabled'         // 고대비 모드 활성화
  | 'focus_trap_entered'            // 포커스 트랩 진입
  | 'focus_trap_exited'             // 포커스 트랩 탈출
  | 'skip_link_used'                // 스킵 링크 사용
  | 'accessibility_setting_changed' // 접근성 설정 변경
  | 'accessibility_issue_reported'; // 접근성 이슈 보고

interface AccessibilityEvent {
  eventType: AccessibilityEventType;
  feature: AccessibilityFeature;
  details: Record<string, unknown>;
  timestamp: string;
  userAgent: string;
}
```

---

## 7. 전체 사용자 플로우

### 7.1 5단계 회의 생애주기

```
┌──────────┐   ┌──────────┐   ┌──────────┐   ┌──────────┐   ┌──────────┐
│ 1. 준비  │ → │ 2. 진행  │ → │ 3. 확정  │ → │ 4. 반영  │ → │ 5. 후속  │
└──────────┘   └──────────┘   └──────────┘   └──────────┘   └──────────┘
   콘솔          HUD           콘솔          콘솔          콘솔
```

### 7.2 단계별 상세 플로우

#### 단계 1: 회의 준비 (Before Meeting) - **메인 콘솔**

**목적**: 회의 목표 설정, 맥락 확인, 질문 준비

**화면**: 메인 콘솔 > 오늘 > 미팅 카드 > [준비하기] 클릭

**플로우**:
```
1. 미팅 정보 확인
   • 제목, 참석자, 시간
   • 연결된 딜/프로젝트

2. 목표 모드 선택
   • 검증/리스크
   • 결정/합의
   • 탐색/발견
   • 설득/협상
   • 후속/계기
   • 관계/톤

3. 지난 미팅 맥락 리뷰
   • 미확인 항목 (자동 추출)
   • 이전 결정 사항
   • 리스크 항목

4. Playbook 적용 (MVP: 템플릿)
   • 시나리오 자동 매칭
   • ON/OFF 토글
   • 필수 항목 확인

5. 핵심 확인 포인트 정리
   • AI 자동 생성 질문 리뷰
   • 직접 질문 추가 (선택)

6. 준비 완료
   [회의 시작] 버튼 클릭
   → 실시간 HUD 자동 실행
```

**소요 시간**: 2-3분 (간소화)

#### 단계 2: 회의 진행 (During Meeting) - **Always-on-Top HUD**

**목적**: 실시간 어시스턴트로 대화 품질 향상

**화면**: Always-on-Top HUD (Chrome Side Panel)

**플로우**:
```
1. HUD 자동 실행
   • 화면 우측에 Side Panel 표시
   • 🟢 LIVE 표시 + 회의 제목 + 타이머

2. 실시간 청취 및 분석 (백그라운드)
   • STT로 전사
   • 결정 구조 8요소 실시간 추적
   • 인사이트 자동 추출

3. 필요 시 HUD 확장
   • 클릭 or Ctrl+H로 확장 (375×525px)
   • 대화 진행, 결정 품질 확인
   • 제안 질문, 인사이트 확인

4. 질문 제안 활용
   • AI 적절한 타이밍 제안
   • [복사] 클릭 → 클립보드
   • 자연스럽게 삽입

5. 인사이트 캡처
   • 숫자/지표 자동 하이라이트
   • [메모] 클릭으로 추가

6. 전문용어 설명
   • 모르는 용어 실시간 설명

7. 실시간 리서치 (더미)
   • 더미 데이터 표시
   • "더미 데이터" 워터마크

8. 갭 감지 시 개입
   • 중요 항목 누락 → 카드 팝업
   • [쓰겠다] [나중에] [무시]

9. 회의 말미 (종료 15분 전)
   • Closure Card 자동 표시
   • 미확인, 결정, 액션 정리

10. 회의 종료
    [종료] → 콘솔 확정 화면
```

#### 단계 3: 회의 확정 (After Meeting) - **메인 콘솔**

**목적**: 회의 내용 최종 확정

**화면**: 메인 콘솔 > 확정 화면

**플로우**:
```
1. 자동 생성 회의록 리뷰
2. 각 항목 확정 (체크박스)
3. 누락 정보 채우기
4. [확정 완료] 클릭
   → 반영/공유 화면
```

**소요 시간**: 5-10분

#### 단계 4: 시스템 반영 (Writeback) - **메인 콘솔**

**목적**: CRM, 태스크 도구 반영

**플로우**:
```
1. 연동 도구 확인 (Notion, Salesforce, Slack)
2. 반영 항목 선택
3. [지금 반영] 클릭
4. 공유 옵션 설정
5. [완료]
```

**소요 시간**: 2-3분

#### 단계 5: 후속 조치 (Follow-up) - **메인 콘솔**

**목적**: 액션 추적, 다음 미팅 준비

**플로우**:
```
1. 오늘 화면에서 추적
2. Decision Library 검색
3. 다음 미팅 준비
```

---

## 8. 인터랙션 패턴 정의

### 8.1 HUD 핵심 인터랙션

#### 패턴 1: 최소화 ↔ 확장 토글
```
[최소화 상태]
┌─────────────────────────┐
│ 🟢 LIVE │ A사 2차 미팅   │  [▼]
│ 00:23:45                │
│ 💬 인사이트 2개 대기     │
└─────────────────────────┘
         │ 클릭 or Ctrl+H
         ▼
[확장 상태]
┌────────────────────────────────────┐
│ 🟢 LIVE │ A사 시리즈A 2차 미팅      │  [─][×]
│ 00:23:45 │ 목표: 검증/리스크        │
│────────────────────────────────────│
│ [전체 내용...]                      │
└────────────────────────────────────┘
```

#### 패턴 2: 질문 복사 → 사용
```
💡 지금 제안할 질문:
"CAC는 채널별로 어떻게 되시나요?"  [복사]
                                  │ 클릭
                                  ▼
                       클립보드에 복사됨 ✓
                       (2초 후 자동 사라짐)
```

#### 패턴 3: 개입 카드 대응
```
┌────────────────────────────────────┐
│ ⚠️ 안전 카드 │ 신뢰도 85%           │
│ "CAC는 채널별로 어떻게 되시나요?"   │
│                                    │
│ [쓰겠다]  [나중에]  [무시]          │
└────────────────────────────────────┘
         │         │        │
         ▼         ▼        ▼
    클립보드 복사  대기 목록  카드 숨김
    회의록 기록   추가됨     (다시 안 나타남)
```

---

## 9. 디자인 토큰 및 컴포넌트

### 9.1 HUD 디자인 토큰

```css
/* HUD Sizes (최적화) */
--hud-collapsed-width: 300px;
--hud-collapsed-height: 80px;
--hud-expanded-width: 375px;
--hud-expanded-height: 525px;

/* HUD Colors */
--hud-background: rgba(255, 255, 255, 0.95);
--hud-border: rgba(0, 0, 0, 0.1);
--hud-shadow: 0 8px 32px rgba(0, 0, 0, 0.12);

/* Status Colors */
--status-live: rgb(239, 68, 68);      /* 🔴 Live */
--status-offline: rgb(107, 114, 128); /* 🔴 Offline */
--status-private: rgb(99, 102, 241);  /* 🔒 Private */
--status-good: rgb(34, 197, 94);      /* ✅ Good */
--status-warning: rgb(234, 179, 8);   /* ⚠️ Warning */
--status-error: rgb(239, 68, 68);     /* ❌ Error */
--status-neutral: rgb(156, 163, 175); /* ⚪ Neutral */

/* Typography */
--hud-font-xs: 0.625rem;   /* 10px */
--hud-font-sm: 0.75rem;    /* 12px */
--hud-font-base: 0.875rem; /* 14px */
--hud-font-lg: 1rem;       /* 16px */

/* Spacing */
--hud-space-xs: 0.25rem;   /* 4px */
--hud-space-sm: 0.5rem;    /* 8px */
--hud-space-md: 1rem;      /* 16px */
--hud-space-lg: 1.5rem;    /* 24px */

/* Z-Index */
--z-hud: 9999;
--z-intervention: 10000;

/* Animation */
--hud-transition: 250ms cubic-bezier(0.4, 0, 0.2, 1);
```

### 9.2 반응형 동작

```css
/* 대형 화면 (>1920px) */
@media (min-width: 1920px) {
  .hud-container[data-state="expanded"] {
    width: 400px;
    height: 550px;
  }
}

/* 표준 화면 (1366-1920px) - 기본 */
.hud-container[data-state="expanded"] {
  width: 375px;
  height: 525px;
}

/* 소형 화면 (<1366px) */
@media (max-width: 1366px) {
  .hud-container[data-state="expanded"] {
    width: 350px;
    height: 480px;
  }
}

/* 세로 모드 태블릿 */
@media (max-width: 768px) {
  .hud-container {
    width: 100%;
    height: 60vh;
  }
}
```

---

## 10. MVP 개발 로드맵

### 10.1 Phase 1: MVP (0-3개월)

**목표**: 핵심 가치 검증 + 10명 파일럿

#### Week 1-4: 브라우저 확장 기본 구조
```
개발:
├─ Chrome Extension Manifest V3 셋업
├─ HUD 최소화/확장 상태 구현 (375×525px)
├─ Side Panel API 통합
├─ 드래그, 투명도 조절
└─ 핫키 지원 (Ctrl+H, Ctrl+C)

테스트:
└─ 5명 내부 테스트 (UI/UX 피드백)
```

#### Week 5-8: 실시간 기능 (사후 분석 먼저)
```
개발:
├─ STT 연동 (Deepgram or Whisper)
├─ 회의 후 전사 생성
├─ 결정 8요소 추출 (GPT-4)
├─ 간단한 회의록 생성
└─ 인사이트 자동 추출

테스트:
└─ 정확도 측정 (결정 요소 >70%)
```

#### Week 9-10: 콘솔 개발 (오늘 + Library)
```
개발:
├─ 오늘 화면 (미팅 목록, 처리 항목)
├─ Decision Library (검색, 필터)
├─ Playbook 템플릿 3개 (투자/세일즈/채용)
└─ 온보딩 플로우 (5단계)

테스트:
└─ 사용자 플로우 완주율 측정
```

#### Week 11-12: 통합 및 파일럿
```
개발:
├─ HUD ↔ 콘솔 데이터 동기화
├─ Notion 연동 (기본)
├─ 오프라인 모드
├─ 프라이버시 모드
└─ 실시간 리서치 (더미 데이터)

파일럿:
├─ 10명 유저 리크루팅
├─ 실제 미팅 30건 수집
├─ NPS 측정 (목표 >40)
└─ 피드백 수집
```

### 10.2 Phase 2: V2 (3-6개월)

**목표**: 실시간 기능 + 100명 사용자

```
추가 기능:
├─ 실시간 갭 감지 (질문 제안)
├─ Playbook Studio (커스텀 생성)
├─ Context Manager (용어집)
├─ Analytics (기본 KPI)
├─ 웹앱 (PWA) 출시
└─ 실시간 리서치 (내부 데이터 연동)

목표:
├─ DAU 100명
├─ NPS >50
├─ 갭 감지 정확도 >75%
└─ 오탐률 <20%
```

### 10.3 Phase 3: V3 (6-12개월)

**목표**: 엔터프라이즈 + 1,000명 사용자

```
추가 기능:
├─ Context Manager (풀 기능)
├─ Governance (엔터프라이즈)
├─ Analytics (고급 분석)
├─ Electron 앱 (온프레미스)
├─ 실시간 리서치 (외부 API)
└─ 멀티모달 (화면 + 음성)

목표:
├─ DAU 1,000명
├─ NPS >60
├─ ARR $500K
└─ 엔터프라이즈 5개사
```

---

## 11. 행동심리 설계 원칙

### 11.1 Fogg Behavior Model (B=MAT)

**B (Behavior) = M (Motivation) × A (Ability) × T (Trigger)**

| 요소 | 설계 방법 | 구체적 예시 |
|------|----------|------------|
| **Motivation (동기)** | Hope + Fear 균형 | "35분 후, 완벽하게 준비된 당신", "카드등록 불필요" |
| **Ability (능력)** | Zero Input + Clear CTA | "구글 계정으로 1초 만에 시작하기" |
| **Trigger (트리거)** | Hot + Contextual | 긍정 감정 최고조 시점에 가입 모달 표시 |

### 11.2 Flow Theory (몰입 이론)

**난이도 밸런스 - 3단계 점진적 복잡도:**

```
1단계 (Low Skill, Low Challenge):
   - "오늘" 화면 도착 → 이미 미팅이 3건 있음
   - 사용자는 그냥 보기만 하면 됨

2단계 (Medium Skill, Medium Challenge):
   - [준비하기] 클릭 → 체크박스 2개 클릭
   - 간단한 인터랙션, 명확한 피드백

3단계 (High Skill, High Challenge):
   - 실시간 전사 읽기 + 알림 판단 + "물어보기" 선택
   - 능동적 참여, 실제 업무와 유사
```

### 11.3 Nudge Techniques (넛지 기법)

1. **Default Effect**: 구글 로그인 버튼이 가장 크고 눈에 띔
2. **Scarcity**: "14일 무료 체험", "7일 후 데이터 삭제"
3. **Social Proof**: "3,500명의 투자심사역이 Onno와 함께합니다"
4. **Endowment Effect**: 데모 데이터가 "내 것"처럼 느껴지게

### 11.4 Investment (이탈 방지)

| 투자 유형 | 구현 방법 | 효과 |
|----------|----------|------|
| **Data Investment** | 체험 데이터 7일 보관 → 가입 시 복원 | 다시 돌아올 이유 제공 |
| **Learning Investment** | "왜 이 질문이 중요한지" 1줄 설명 | 학습한 내용을 잃고 싶지 않음 |
| **Identity Investment** | "민수님의 미팅 스타일: 분석형" 진단 | 자아 정체성 형성 |

### 11.5 KPI 목표

**핵심 전환 지표:**
- 체험 완료율: 데모 시작 → 미팅 시뮬레이션 종료 **> 65%**
- Aha Moment 도달률: Level 2 알림 클릭 **> 70%**
- 가입 전환율: 체험 완료 → 14일 무료 가입 클릭 **> 42%**
- Time to Value: 랜딩 → Aha Moment까지 **< 3분**

---

## 12. 몰입형 웹 프로토타입 설계 (Immersive Prototype)

### 12.1 설계 목적

웹 기반이지만 **실제 데스크톱 환경에서 Onno를 사용하는 것처럼** 느껴지는 몰입형 프로토타입을 제작합니다.

**목표:**
- 투자자/고객에게 실제 사용 경험 시연
- 2-Screen 아키텍처의 가치를 직관적으로 전달
- 개발 전 UX 검증 및 피드백 수집

### 12.2 두 가지 체험 모드

프로토타입은 **모드 전환 버튼**을 통해 두 가지 환경을 체험할 수 있습니다:

```
┌─────────────────────────────────────────────────────────────────┐
│                                                                 │
│   [🖥️ HUD 모드]  ←─ 전환 버튼 ─→  [📊 콘솔 모드]                 │
│                                                                 │
│   회의 중 Always-on-Top           회의 전후 Decision OS         │
│   플로팅 HUD 체험                 풀스크린 콘솔 체험             │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

### 12.3 HUD 모드: 가상 데스크톱 환경

#### 12.3.1 화면 구성

```
┌─────────────────────────────────────────────────────────────────┐
│  ■ ■ ■  가상 macOS 데스크톱                    🔋 100%  11:30   │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  ┌─────────────────────────────────┐  ┌───────────────────┐    │
│  │  ● ● ●  Zoom Meeting            │  │  ● ● ●  Slack     │    │
│  │  ┌───────────────────────────┐  │  │                   │    │
│  │  │  ┌─────┐ ┌─────┐         │  │  │  #investment      │    │
│  │  │  │ 👤  │ │ 👤  │         │  │  │  김팀장: 미팅 중? │    │
│  │  │  │김대표│ │이CTO│         │  │  │  [타이핑 중...]   │    │
│  │  │  └─────┘ └─────┘         │  │  │                   │    │
│  │  │  ┌─────┐ ┌─────┐         │  │  └───────────────────┘    │
│  │  │  │ 👤  │ │ 👤  │ 🔊      │  │                          │
│  │  │  │박CFO│ │ 나  │         │  │         ┌────────────┐   │
│  │  │  └─────┘ └─────┘         │  │         │ ████████   │   │
│  │  └───────────────────────────┘  │         │ Onno HUD   │   │
│  │  [🔇 Mute] [📹 Video] [📤 Share]│         │ 🟢 LIVE    │   │
│  └─────────────────────────────────┘         │ 00:23:45   │   │
│                                              │            │   │
│  ┌─────────────────────────────────┐         │ 💡 질문 2  │   │
│  │  ● ● ●  Chrome - IR 자료.pdf    │         │ 📝 메모 4  │   │
│  │  [탭1] [탭2] [탭3]              │         │            │   │
│  │  ┌───────────────────────────┐  │         │ [확장 ▼]   │   │
│  │  │   A사 투자제안서            │  │         └────────────┘   │
│  │  │   Series A: $5M            │  │              ↑            │
│  │  │   ...                      │  │         드래그 가능       │
│  │  └───────────────────────────┘  │                          │
│  └─────────────────────────────────┘                          │
│                                                                 │
│  [📁 Finder] [🌐 Chrome] [📹 Zoom] [💬 Slack] [⭕ Onno]          │
└─────────────────────────────────────────────────────────────────┘
```

#### 12.3.2 가상 앱 컴포넌트 사양

| 컴포넌트 | 기능 | 인터랙션 |
|---------|------|----------|
| **VirtualDesktop** | macOS/Windows 데스크톱 시뮬레이션 | 테마 전환 |
| **VirtualWindow** | 드래그/리사이즈 가능한 윈도우 | 이동, 최소화, 최대화, 닫기 |
| **ZoomSimulator** | 4인 화상회의 시뮬레이션 | 발화자 하이라이트, 음성 파형 |
| **BrowserSimulator** | Chrome 브라우저 시뮬레이션 | 탭 전환, 스크롤 |
| **SlackSimulator** | Slack 메신저 시뮬레이션 | 실시간 메시지, 알림 |
| **OnnoHUD** | Always-on-Top HUD | 드래그, 3단계 상태, 개입 카드 |

#### 12.3.3 HUD 상세 구현

```
┌────────────────────────────────────┐
│ ████████████████████████████████   │ ← 상태 표시줄 (녹음 중)
│ 🟢 LIVE │ A사 시리즈A 2차 미팅      │
│ 00:23:45 │ 목표: 검증/리스크        │
│────────────────────────────────────│
│                                    │
│ 📊 결정 품질 체크                   │ ← 실시간 분석
│ ▓▓▓▓▓▓▓▓░░░░░░░ 60%                │
│                                    │
│ • 목표: 명확 ✓                      │
│ • 근거: 보통 ⚠️                     │
│ • 리스크: 누락 ❌                   │
│                                    │
│ 💡 제안 질문 (2)                    │ ← 실시간 제안
│ ┌────────────────────────────────┐ │
│ │ "CAC는 채널별로 어떻게..."     │ │
│ │                    [복사] [×]  │ │
│ └────────────────────────────────┘ │
│                                    │
│ 📝 캡처된 메모 (4)                  │ ← 자동 추출
│ • MAU 10만                         │
│ • 월 성장률 15%                    │
│ • 유료 전환율 8%                   │
│                                    │
│ [최소화] ─────────────── [설정]    │
└────────────────────────────────────┘

크기: 375px × 525px (확장)
     300px × 80px (최소화)
```

#### 12.3.4 개입 카드 (Intervention Card) 팝업

```
┌────────────────────────────────────┐
│ ⚠️ 안전 카드 │ 신뢰도 85%           │  [×]
│────────────────────────────────────│
│                                    │
│ 📍 상황:                            │
│ CAC 확인 기회 - 유닛이코노믹스 검증 │
│                                    │
│ 💬 제안:                            │
│ "CAC는 채널별로 어떻게 되시나요?"   │
│                                    │
│ 💡 왜 지금?                         │
│ • 지난 미팅에서 미확인 항목         │
│ • 투자 의사결정 핵심 지표           │
│ • 대화 흐름상 자연스러운 타이밍     │
│                                    │
│ ┌──────┐ ┌──────┐ ┌──────┐        │
│ │쓰겠다│ │나중에│ │ 무시 │        │
│ └──────┘ └──────┘ └──────┘        │
└────────────────────────────────────┘
```

### 12.4 콘솔 모드: Decision OS 풀스크린

#### 12.4.1 화면 구성

```
┌─────────────────────────────────────────────────────────────────┐
│  ⭕ Onno                                    [🔍] [🔔 3] [👤 지윤] │
├─────────┬───────────────────────────────────────────────────────┤
│         │                                                       │
│  📅 오늘 │  좋은 아침이에요, 지윤님 👋                            │
│  ────── │  2025년 12월 30일 월요일                              │
│         │                                                       │
│  📚 Lib │  ┌─────────────────────────────────────────────────┐ │
│         │  │ 📅 오늘 미팅 (3)                                 │ │
│  📖 Play│  │                                                  │ │
│         │  │ 🔴 10:00 │ A사 시리즈A 2차 미팅                  │ │
│  🗂️ Ctx │  │ ⚠️ 지난번 미확인: 유닛이코노믹스                  │ │
│         │  │ [준비하기] [HUD 모드로 시작 →]                   │ │
│  ⚙️ Gov │  │                                                  │ │
│         │  │ 🟡 14:00 │ B사 파트너십 논의                     │ │
│  📊 Ana │  │ 🟢 16:00 │ 팀 주간 스탠드업                      │ │
│         │  └─────────────────────────────────────────────────┘ │
│         │                                                       │
│  ────── │  ┌─────────────────────────────────────────────────┐ │
│         │  │ 📋 오늘 처리할 것 (5)                            │ │
│  [HUD   │  │                                                  │ │
│   모드] │  │ 🔴 확정 대기 (2)                                 │ │
│         │  │ • 어제 C사 미팅 - 결정 3개 미확정                │ │
│         │  │                                                  │ │
│         │  │ 🟡 반영 대기 (2)                                 │ │
│         │  │ • A사 - CRM 단계 업데이트 필요                   │ │
│         │  │                                                  │ │
│         │  │ ⚪ 후속 대기 (1)                                 │ │
│         │  │ • F사 - 자료 요청 응답 대기 (D+2)                │ │
│         │  └─────────────────────────────────────────────────┘ │
│         │                                                       │
└─────────┴───────────────────────────────────────────────────────┘
```

#### 12.4.2 콘솔 모듈 구현 범위 (MVP)

| 모듈 | 구현 수준 | 주요 기능 |
|------|----------|----------|
| **오늘** | ✅ 풀 구현 | 미팅 목록, 처리 항목, 리스크 알림 |
| **Library** | ✅ 풀 구현 | 결정 검색, 필터, 상세 보기 |
| **Playbook** | ⚠️ 읽기만 | 템플릿 목록, 미리보기 |
| **Context** | ⚠️ 용어집만 | 용어 검색, 설명 보기 |
| **Governance** | ❌ 비활성 | "Coming Soon" 표시 |
| **Analytics** | ❌ 비활성 | "Coming Soon" 표시 |

### 12.5 시나리오 오케스트레이션 시스템

#### 12.5.1 데모 시나리오 구조

```typescript
interface DemoScenario {
  id: string;
  title: string;           // "시리즈A 투자 미팅"
  description: string;
  duration: number;        // 초 단위 (480 = 8분)
  playbackSpeed: number;   // 10 = 10배속
  events: DemoEvent[];
}

interface DemoEvent {
  timestamp: number;       // 발생 시점 (초)
  type: EventType;
  payload: any;
  duration?: number;       // 이벤트 지속 시간
}

type EventType =
  // Zoom 이벤트
  | 'zoom_speaker_change'      // 발화자 변경
  | 'zoom_audio_level'         // 음성 레벨 변경
  | 'zoom_screen_share'        // 화면 공유 시작/종료

  // Slack 이벤트
  | 'slack_message'            // 메시지 수신
  | 'slack_typing'             // 타이핑 표시
  | 'slack_notification'       // 알림

  // HUD 이벤트
  | 'hud_insight'              // 인사이트 캡처
  | 'hud_question'             // 질문 제안
  | 'hud_intervention'         // 개입 카드 팝업
  | 'hud_quality_update'       // 결정 품질 업데이트
  | 'hud_progress_update'      // 진행률 업데이트

  // 전사 이벤트
  | 'transcript_update'        // 대화 내용 추가
  | 'transcript_highlight';    // 하이라이트
```

#### 12.5.2 샘플 시나리오: 시리즈A 투자 미팅

```typescript
const seriesAMeetingScenario: DemoScenario = {
  id: 'series-a-meeting',
  title: '시리즈A 투자 미팅',
  description: 'A사 대표와의 2차 투자 검토 미팅',
  duration: 480,
  playbackSpeed: 10,
  events: [
    // 0-30초: 인사 및 시작
    { timestamp: 0, type: 'zoom_speaker_change', payload: { speaker: '김대표', avatar: '👨‍💼' } },
    { timestamp: 5, type: 'transcript_update', payload: { speaker: '김대표', text: '안녕하세요, 지난번에 이어서 오늘 구체적인 숫자들을 말씀드리겠습니다.' } },
    { timestamp: 15, type: 'hud_progress_update', payload: { progress: 5 } },

    // 30-90초: 핵심 지표 언급
    { timestamp: 30, type: 'zoom_speaker_change', payload: { speaker: '김대표' } },
    { timestamp: 35, type: 'transcript_update', payload: { speaker: '김대표', text: '현재 저희 MAU가 10만 정도 되고, 월 성장률이 15%입니다.' } },
    { timestamp: 38, type: 'hud_insight', payload: { text: 'MAU 10만', category: 'metric', confidence: 95 } },
    { timestamp: 40, type: 'hud_insight', payload: { text: '월 성장률 15%', category: 'metric', confidence: 95 } },
    { timestamp: 45, type: 'hud_quality_update', payload: { evidence: 'good' } },

    // 90-150초: 질문 제안 타이밍
    { timestamp: 90, type: 'hud_question', payload: {
      question: 'CAC는 채널별로 어떻게 되시나요?',
      reason: '지난 미팅 미확인 항목',
      priority: 'high'
    }},
    { timestamp: 95, type: 'slack_message', payload: { from: '이기획', message: '미팅 잘 진행되고 있어요?' } },

    // 150-210초: 개입 카드
    { timestamp: 150, type: 'hud_intervention', payload: {
      type: 'safety',
      title: '유닛이코노믹스 확인 필요',
      content: 'CAC/LTV 관련 질문이 아직 나오지 않았습니다.',
      suggestion: 'CAC는 채널별로 어떻게 되시나요?',
      confidence: 85
    }},

    // ... 계속

    // 420-480초: 마무리
    { timestamp: 420, type: 'hud_intervention', payload: {
      type: 'summary',
      title: '미팅 요약',
      content: '결정 3개, 액션 아이템 5개가 도출되었습니다.',
      items: ['DD 진행 합의', '재무자료 요청', '다음 미팅 일정']
    }},
    { timestamp: 450, type: 'hud_progress_update', payload: { progress: 95 } },
    { timestamp: 480, type: 'meeting_end', payload: { redirect: '/console/meeting/1/confirm' } }
  ]
};
```

### 12.6 인터랙션 상세

#### 12.6.1 HUD 모드 인터랙션

| 인터랙션 | 트리거 | 반응 | 피드백 |
|---------|--------|------|--------|
| HUD 드래그 | 헤더 드래그 | 위치 이동 | 위치 저장 |
| 최소화/확장 | 버튼 클릭 | 상태 전환 | 애니메이션 |
| 질문 복사 | [복사] 클릭 | 클립보드 저장 | 토스트 "복사됨" |
| 인사이트 저장 | [메모] 클릭 | 메모 목록 추가 | 하이라이트 |
| 개입 응답 | 버튼 클릭 | 카드 닫힘 | 상태 업데이트 |
| 앱 전환 | Dock 클릭 | z-index 변경 | 윈도우 포커스 |
| 윈도우 이동 | 타이틀바 드래그 | 위치 이동 | - |

#### 12.6.2 콘솔 모드 인터랙션

| 인터랙션 | 트리거 | 반응 | 피드백 |
|---------|--------|------|--------|
| 모듈 전환 | 사이드바 클릭 | 페이지 전환 | URL 변경 |
| 미팅 시작 | [HUD 모드로 시작] | HUD 모드 전환 | 전환 애니메이션 |
| 결정 검색 | 검색창 입력 | 결과 필터 | 실시간 필터 |
| 결정 상세 | 카드 클릭 | 모달/페이지 | 슬라이드 인 |

### 12.7 전환 애니메이션

#### 12.7.1 HUD → 콘솔 전환

```
Step 1: HUD "회의 종료" 클릭
         ↓
Step 2: 가상 데스크톱 페이드아웃 (0.5s)
         ↓
Step 3: 콘솔 확정 화면 페이드인 (0.5s)
         ↓
Step 4: "미팅이 종료되었습니다" 토스트
```

#### 12.7.2 콘솔 → HUD 전환

```
Step 1: "HUD 모드로 시작" 클릭
         ↓
Step 2: 콘솔 줌아웃 + 블러 (0.3s)
         ↓
Step 3: 가상 데스크톱 페이드인 (0.5s)
         ↓
Step 4: Zoom 시뮬레이터 활성화
         ↓
Step 5: HUD 슬라이드인 (0.3s)
```

### 12.8 기술 구현 요구사항

#### 12.8.1 필수 라이브러리

```json
{
  "dependencies": {
    "react-rnd": "^10.4.1",           // 드래그 & 리사이즈
    "framer-motion": "^10.16.0",       // 애니메이션
    "lottie-react": "^2.4.0",          // Lottie 애니메이션
    "zustand": "^4.4.0",               // 상태 관리
    "@react-hook/clipboard": "^1.0.0"  // 클립보드
  }
}
```

#### 12.8.2 컴포넌트 구조

```
src/
├── components/
│   └── demo/
│       ├── VirtualDesktop/
│       │   ├── index.tsx              // 메인 컴포넌트
│       │   ├── MenuBar.tsx            // 상단 메뉴바
│       │   ├── Dock.tsx               // 하단 독
│       │   └── Wallpaper.tsx          // 배경
│       │
│       ├── VirtualWindow/
│       │   ├── index.tsx              // 윈도우 컴포넌트
│       │   ├── TitleBar.tsx           // 타이틀바
│       │   └── WindowControls.tsx     // 버튼들
│       │
│       ├── apps/
│       │   ├── ZoomSimulator.tsx      // Zoom 시뮬레이터
│       │   ├── BrowserSimulator.tsx   // 브라우저
│       │   ├── SlackSimulator.tsx     // Slack
│       │   └── DocumentViewer.tsx     // PDF 뷰어
│       │
│       ├── hud/
│       │   ├── OnnoHUD.tsx            // HUD 메인
│       │   ├── HUDMinimized.tsx       // 최소화 상태
│       │   ├── HUDExpanded.tsx        // 확장 상태
│       │   ├── InterventionCard.tsx   // 개입 카드
│       │   └── QuestionSuggestion.tsx // 질문 제안
│       │
│       └── console/
│           ├── ConsoleLayout.tsx      // 콘솔 레이아웃
│           ├── TodayDashboard.tsx     // 오늘 대시보드
│           ├── DecisionLibrary.tsx    // Library
│           └── Playbook.tsx           // Playbook
│
├── hooks/
│   ├── useDemoScenario.ts             // 시나리오 관리
│   ├── useWindowManager.ts            // 윈도우 관리
│   └── useDemoMode.ts                 // 모드 전환
│
├── stores/
│   └── demo-store.ts                  // 데모 상태 관리
│
└── app/
    └── demo/
        ├── page.tsx                   // 데모 진입점
        ├── hud/page.tsx               // HUD 모드
        └── console/page.tsx           // 콘솔 모드
```

#### 12.8.3 상태 관리 구조

```typescript
interface DemoStore {
  // 모드 상태
  currentMode: 'hud' | 'console';
  setMode: (mode: 'hud' | 'console') => void;

  // 시나리오 상태
  scenario: DemoScenario | null;
  currentTime: number;
  isPlaying: boolean;
  playbackSpeed: number;

  // HUD 상태
  hudState: {
    mode: 'minimized' | 'expanded' | 'intervention';
    position: { x: number; y: number };
    insights: Insight[];
    questions: Question[];
    qualityScore: QualityScore;
  };

  // 윈도우 상태
  windows: VirtualWindow[];
  activeWindowId: string | null;

  // 액션
  play: () => void;
  pause: () => void;
  seek: (time: number) => void;
  switchMode: () => void;
}
```

### 12.9 성공 지표

| 지표 | 목표 | 측정 방법 |
|------|------|----------|
| 데모 완료율 | > 70% | HUD 모드 시작 → 회의 종료 |
| 모드 전환 횟수 | > 2회/세션 | 전환 버튼 클릭 |
| 인터랙션 참여 | > 5회/세션 | 복사, 메모, 응답 클릭 |
| 체류 시간 | > 5분 | 페이지 체류 |
| 가입 전환율 | > 45% | 데모 완료 → 가입 |

---

## 부록 A: 주요 변경사항 요약

| 항목 | 이전 버전 | 현재 버전 (v3.1) |
|------|-----------|------------------|
| **HUD 크기** | 400×600px | 375×525px (최적화) |
| **배포 전략** | Electron 우선 | 브라우저 확장 우선 |
| **Playbook** | Studio 전체 | 템플릿 제공 (MVP) |
| **실시간 리서치** | 외부 API | 더미 데이터 |
| **온보딩** | 없음 | 4단계 + 확정 시점 통합 |
| **오프라인 모드** | 없음 | 추가 |
| **프라이버시 모드** | 없음 | 추가 |
| **MVP 모듈** | 6개 전체 | 오늘 + Library만 |
| **행동심리 설계** | 기본 | 5-Layer Framework 통합 |
| **통합 설정 타이밍** | 온보딩 3단계 | 확정 모달 시점 (Part 1.4) |
| **MVP 통합** | Notion/Salesforce/Slack | Notion only |
| **미팅 준비 플로우** | 기본 | 5-Layer Framework 기반 고도화 (Part 1.5) |

---

**문서 끝**
