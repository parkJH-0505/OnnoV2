# Onno 서비스 기획서: 사용자 중심 설계

**버전**: 4.1 (Part 6.4 접근성 - WCAG 2.1 AA 준수, 키보드/스크린 리더 이벤트)
**작성일**: 2025-12-29 (최종 업데이트: 2025-12-30)
**문서 목적**: 사용자가 쉽고 매력적으로 사용할 수 있는 서비스 구조 정의
**Part 1.4 업데이트**: Notion 통합 타이밍을 확정 모달로 변경 (MVP: Notion only)
**Part 1.5 업데이트**: 첫 미팅 준비 플로우 5-Layer Framework 기반 고도화
**Part 2 업데이트**: Today 화면 & 미팅 카드 인터랙션 5-Layer Framework 추가
**Part 3 업데이트**: 미팅 중 HUD 인터랙션 및 AI 알림 5-Layer Framework 추가
**Part 4 업데이트**: 미팅 후 확정 모달 및 통합 자동 반영 5-Layer Framework 추가
**Part 5 업데이트**: 검색 시맨틱 검색 및 결과 탐색 5-Layer Framework 추가
**Part 5.2 업데이트**: 설정 화면 개인화, 통합 관리, 알림 설정 5-Layer Framework 추가
**Part 6.1 업데이트**: 에러 처리 - 횡단 관심사 에러 분류 및 복구 전략 추가
**Part 6.2 업데이트**: 로딩 상태 - 횡단 관심사 로딩 분류, 낙관적 UI, 스트리밍 이벤트 추가
**Part 6.3 업데이트**: 빈 상태 - 횡단 관심사 빈 상태 분류, CTA 전환, 온보딩, 검색 빈 상태 이벤트 추가
**Part 6.4 업데이트**: 접근성 - 키보드 단축키, 스크린 리더, 포커스 관리, 접근성 설정 이벤트 추가

**핵심 철학:**
> "Magic, Not Menu"
> 사용자는 기능을 배우러 온 게 아니라, 더 나은 회의를 하러 온 것

---

## 📋 목차

1. [사용자 이해: Jobs-to-be-Done](#1-사용자-이해-jobs-to-be-done)
2. [핵심 원칙: 단순함의 힘](#2-핵심-원칙-단순함의-힘)
3. [정보 아키텍처: 3개 화면 전략](#3-정보-아키텍처-3개-화면-전략)
4. [화면별 상세 설계](#4-화면별-상세-설계)
5. [자동화 전략: AI가 95%, 사용자 5%](#5-자동화-전략-ai가-95-사용자-5)
6. [인터랙션 디자인: Zero-UI](#6-인터랙션-디자인-zero-ui)
7. [사용자 플로우: 전체 여정](#7-사용자-플로우-전체-여정)
8. [기술 구현 요구사항](#8-기술-구현-요구사항)
9. [성공 지표 및 검증](#9-성공-지표-및-검증)

---

## 1. 사용자 이해: Jobs-to-be-Done

### 1.1 사용자가 말하는 것 vs 진짜 원하는 것

```
표면적 니즈 (사용자가 말하는 것):
├─ "회의록 자동으로 써줘"
├─ "중요한 거 요약해줘"
└─ "질문 제안해줘"

진짜 니즈 (사용자가 원하는 것):
├─ "회의 끝나고 '뭐 결정했더라?' 고민하기 싫어"
├─ "다음 회의 때 '지난번에 뭐 얘기했지?' 찾기 싫어"
└─ "중요한 순간 놓쳐서 딜 날리기 싫어"
```

### 1.2 Jobs-to-be-Done 분석

**Primary Job (주요 과제):**

> "나는 ___할 때, ___하기 위해 Onno를 고용한다"

**페르소나별 Job:**

```
1. 투자심사역 민수 (35세, VC)
   "중요한 투자 결정을 할 때,
    놓친 리스크 때문에 나중에 책임지는 일이 없도록"

   핵심 고통:
   ├─ 3개월 후 "왜 투자했지?" 후회
   ├─ 리스크 놓쳐서 LP에게 설명 못함
   └─ 같은 실수 반복 (과거 교훈 못 찾음)

2. 세일즈 지연 (32세, B2B 영업)
   "고객과 협상할 때,
    막판에 예상 못한 이슈로 딜이 깨지지 않도록"

   핵심 고통:
   ├─ 협상 막판 "예산 승인 누가 해요?" 놓침
   ├─ 지난번 약속 잊어서 신뢰 잃음
   └─ 경쟁사한테 딜 뺏김

3. CEO 현우 (40세, 스타트업)
   "임원 회의에서 중요한 결정을 할 때,
    3개월 뒤 '왜 그랬지?' 후회하지 않도록"

   핵심 고통:
   ├─ 결정 근거 기억 안 남
   ├─ 같은 실수 반복
   └─ 팀원들 "왜 이렇게 됐죠?" 물을 때 답 못함
```

**결론:**
→ **사용자는 "회의 도구"가 아니라 "후회 방지 시스템"을 원함**

### 1.3 사용자 여정 맵

```
┌─────────────────────────────────────────────────────────┐
│              사용자 감정 곡선 (현재 vs Onno 사용)         │
└─────────────────────────────────────────────────────────┘

감정
 ↑
😊 좋음 │         [Onno 사용 시]
       │    ●────●────●────●────●
       │   /                      \
😐 보통 │  ●                        ●───●
       │
😟 나쁨 │      ●──●──●──●──●
       │     /   [현재 - 도구 없이]
       └─────────────────────────────────→ 시간
         회의 전  회의 중  회의 후  다음 회의

현재 (도구 없이):
├─ 회의 전: 😐 "뭐 준비하지?"
├─ 회의 중: 😟 "놓친 것 같은데..."
├─ 회의 후: 😟 "뭐 결정했더라?"
└─ 다음 회의: 😟 "지난번에 뭐 했지?"

Onno 사용 시:
├─ 회의 전: 😊 "준비됐네!"
├─ 회의 중: 😊 "놓칠 뻔했는데 알려주네"
├─ 회의 후: 😊 "자동으로 정리됐네"
└─ 다음 회의: 😊 "지난번 내용 나오네"
```

---

## 2. 핵심 원칙: 단순함의 힘

### 2.1 Magic, Not Menu

**나쁜 예: 메뉴 중심 (사용자가 기능 찾음)**

```
┌─────────────────────────────┐
│ Onno 기능 목록               │
├─────────────────────────────┤
│ □ 회의록 생성                │
│ □ 질문 제안                  │
│ □ 인사이트 추출              │
│ □ 실시간 리서치              │
│ □ 결정 분석                  │
│ □ 플레이북 설정              │
│ □ 통합 도구 연결             │
│ □ 분석 리포트                │
└─────────────────────────────┘

사용자 반응:
"어... 뭐부터 해야 하지?"
"이거 다 배워야 해?"
```

**좋은 예: Magic 중심 (기능이 사용자 찾음)**

```
[회의 시작]
↓
[사용자는 회의에만 집중]
↓
[35분 시점, AI가 갭 감지]
↓
┌─────────────────────────────┐
│ 💡 놓치면 위험한 질문:       │
│                             │
│ "예산 승인 프로세스는        │
│  어떻게 되나요?"             │
│                             │
│ 왜?: 과거 3건 딜이 승인에서  │
│      막혀 무산됨             │
│                             │
│ [물어보기] [나중에]          │
└─────────────────────────────┘

사용자 반응:
"오, 이거 놓칠 뻔했네!"
```

### 2.2 설계 원칙 5가지

```
1. Invisible Until Needed (필요할 때까지 안 보임)
   ├─ 99% 시간: 화면 구석 작은 배지
   └─ 1% 시간: 중요한 순간 큰 카드

2. One Thing at a Time (한 번에 하나만)
   ├─ 동시에 여러 제안 ✗
   └─ 지금 가장 중요한 것 1개만 ✓

3. Context Over Control (컨트롤보다 맥락)
   ├─ 사용자가 설정 ✗
   └─ AI가 상황 파악 후 자동 ✓

4. Progressive Disclosure (점진적 공개)
   ├─ 처음: 핵심만
   ├─ 클릭: 상세 정보
   └─ 다시 클릭: 전체 맥락

5. Zero Data Entry (입력 제로)
   ├─ 사용자에게 물어보기 ✗
   └─ AI가 추론/추출 ✓
```

### 2.3 복잡도 관리 철학

```
┌─────────────────────────────────────────┐
│         복잡도 숨기기 전략               │
└─────────────────────────────────────────┘

표면 (사용자가 보는 것):
┌─────────────────┐
│  3개 화면        │  ← 극도로 단순
│  3개 버튼        │
└─────────────────┘

깊이 (시스템이 하는 일):
┌─────────────────────────────────┐
│  • STT 실시간 처리               │
│  • LLM 추론 (결정 8요소)         │  ← 엄청 복잡
│  • 벡터 DB 검색                  │
│  • 다중 API 통합                 │
│  • 예측 모델 실행                │
└─────────────────────────────────┘

원칙:
"복잡도는 백엔드로, 단순함은 프론트로"
```

---

## 3. 정보 아키텍처: 3개 화면 전략

### 3.1 문제: 기존 6개 모듈의 인지 부하

```
기존 (v2):
┌─────────────────────────────┐
│ 📅 오늘                      │
│ 📚 Library                  │
│ 📖 Playbook                 │
│ 🗂️ Context                  │
│ ⚙️ Governance               │
│ 📊 Analytics                │
└─────────────────────────────┘

사용자 반응:
"어디 가면 뭐가 있는지 모르겠어요"
"너무 복잡해요"
"배우기 힘들어요"

문제:
├─ 6개 메뉴 = 인지 부하 높음
├─ 각 메뉴 역할 불명확
└─ 사용자가 경로 외워야 함
```

### 3.2 해결: 3개 화면으로 단순화

```
┌──────────────────────────────────────┐
│                                      │
│      Onno는 딱 3개 화면만             │
│                                      │
│  1️⃣ 지금 (Now)    ← 회의 중          │
│  2️⃣ 오늘 (Today)  ← 오늘 할 일       │
│  3️⃣ 검색 (Search) ← 과거 찾기        │
│                                      │
│  그게 전부입니다.                     │
│                                      │
└──────────────────────────────────────┘
```

### 3.3 화면별 역할 명확화

| 화면 | 시점 | 목적 | 사용자 질문 | 소요 시간 |
|------|------|------|-------------|-----------|
| **지금** | 회의 중 | 놓치지 않기 | "지금 뭐 물어봐야 해?" | 회의 시간 |
| **오늘** | 회의 전후 | 처리하기 | "오늘 뭐 해야 해?" | 5-10분 |
| **검색** | 필요 시 | 찾기 | "과거에 뭐 했지?" | 1-2분 |

### 3.4 내비게이션 구조

```
┌────────────────────────────────────────┐
│  [🟢 지금]  [📅 오늘]  [🔍 검색]  [⚙️]  │  ← 상단 탭 (항상 표시)
├────────────────────────────────────────┤
│                                        │
│           [콘텐츠 영역]                 │
│                                        │
└────────────────────────────────────────┘

규칙:
├─ 탭 3개만 (설정 제외)
├─ 아이콘 + 텍스트 (명확)
└─ 현재 화면 강조 (색상)

금지:
├─ 드롭다운 메뉴 ✗
├─ 햄버거 메뉴 ✗
└─ 숨겨진 메뉴 ✗
```

---

## 4. 화면별 상세 설계

### 4.1 화면 1: 지금 (Now) - 회의 중 화면

#### 설계 철학
> "투명 인간처럼. 필요할 때만 나타나서 한 마디 하고 사라짐"

#### 상태 머신

```
┌─────────────────────────────────────────────┐
│            회의 중 화면 상태 전환             │
└─────────────────────────────────────────────┘

[시작]
  ↓
┌─────────────────┐
│ 상태 1: 대기     │  ← 99% 시간
│ (최소화)        │     300×60px
└─────────────────┘     화면 구석
  ↓ [AI 갭 감지]
┌─────────────────┐
│ 상태 2: 알림     │  ← 1% 시간
│ (확장)          │     375×200px
└─────────────────┘     중앙 배치
  ↓ [사용자 응답 or 10초 타임아웃]
┌─────────────────┐
│ 상태 1: 대기     │  ← 다시 대기
│ (최소화)        │
└─────────────────┘
  ↓ [회의 종료 감지]
[오늘 화면 자동 전환]
```

#### 상태 1: 대기 (Idle State)

**화면:**
```
┌─────────────────────┐
│ 🟢 23:45  [2]       │  ← 300×60px
└─────────────────────┘
  ↑      ↑    ↑
  |      |    └─ 새 인사이트 개수
  |      └────── 경과 시간
  └─────────── 청취 중 표시

위치: 화면 우측 상단 고정
투명도: 80% (배경 비침)
```

**사용자 행동:**
- 대부분 무시
- 필요 시 클릭 → 확장 상태

**시스템 동작:**
- 백그라운드 STT 실행
- 실시간 전사
- 결정 8요소 추적
- 갭 감지 알고리즘 실행

#### 상태 2: 알림 (Alert State)

**트리거 조건** (2개 이상 충족 시):
```
1. Critical Gap: 딜 브레이커급 누락
2. Recovery Cost High: 놓치면 재회의
3. Time Window: 지금 아니면 타이밍 놓침
4. Flow Match: 대화 흐름과 자연스러움
```

**화면 (3단계 강도):**

**Level 3: 긴급 (빨강, 1%)**
```
┌────────────────────────────────┐
│ 🚨 치명적 누락                  │  ← 375×250px
│                                │     중앙 배치
│ 계약 해지 조건 논의 안 됨       │     빨간 테두리
│                                │     애니메이션
│ 왜 위험?                        │
│ • 법적 분쟁 가능성              │
│ • 과거 2건 유사 사례            │
│                                │
│ [지금 확인 →]  [위험 감수]      │
└────────────────────────────────┘

효과음: "띵!" (1회)
진동: 있음 (모바일)
```

**Level 2: 주의 (노랑, 9%)**
```
┌────────────────────────────────┐
│ ⚠️ 확인 필요                     │  ← 375×180px
│                                │     우측 상단
│ 예산 승인 프로세스 미확인       │     노란 테두리
│                                │
│ 제안 질문:                      │
│ "승인은 누가 하시나요?"         │
│                                │
│ [물어보기]  [나중에]            │
└────────────────────────────────┘

효과음: 없음
진동: 없음
```

**Level 1: 정보 (회색, 90%)**
```
┌─────────────────────┐
│ 🟢 23:45  [3] ⚠️     │  ← 300×60px
└─────────────────────┘     배지만 추가

클릭 시:
┌────────────────────────────────┐
│ 💡 참고 사항 (3)                │
│                                │
│ • 유사 딜 3건 참조 가능          │
│ • 경쟁사 B사 정보 있음           │
│ • 용어 CAC 설명 준비됨           │
│                                │
│ [닫기]                          │
└────────────────────────────────┘
```

#### 회의 종료 자동 감지

**감지 로직:**
```javascript
// 종료 판단 조건
if (
  (silence > 60000) &&        // 1분 이상 침묵
  (zoomClosed === true) ||    // Zoom 종료됨
  (userClickedEnd === true)   // 사용자가 종료 클릭
) {
  endMeeting();
  openTodayScreen();          // "오늘" 화면 자동 열림
}
```

**사용자 경험:**
```
[58:45 - 회의 거의 끝]
사용자: "그럼 이만..."
Zoom: [종료]

[자동으로]
→ 새 탭 열림
→ "오늘" 화면
→ 확정 화면 표시

사용자:
"오, 알아서 정리하라고 나오네"
```

#### HUD 인터랙션 5-Layer Framework (Part 3)

> **핵심 철학**: "투명 인간처럼. 필요할 때만 나타나서 한 마디 하고 사라짐"

**Part 3.1: 자동 시작 (Zero-UI Activation)**

```
┌─────────────────────────────────────────────────────────────────┐
│  ① Trigger: Zoom/Meet/Teams 앱 실행 감지                        │
│  ② Question: "오, Onno가 자동으로 켜졌네?" (무의식적 인지)       │
│  ③ Action: 없음 (Zero-click)                                    │
│  ④ Result: HUD 우측 상단 fade-in                                │
│  ⑤ Next: Idle 상태 유지                                        │
└─────────────────────────────────────────────────────────────────┘

자동 감지 흐름:
├─ Zoom 실행 감지 (window title 패턴)
├─ 캘린더 API 조회: "10:00 A사 미팅 있음"
├─ 미팅 자동 매칭 (회사명 + 시간대)
├─ 매칭 성공 → HUD 자동 실행 + 과거 맥락 로딩
└─ 매칭 실패 → "새 미팅" 컴팩트 프롬프트

Edge Cases:
├─ 캘린더에 없는 미팅: 5초 자동입력 프롬프트 후 "미정" 처리
├─ 같은 시간 여러 미팅: 드롭다운 선택 (최근 상호작용 상단)
└─ 앱 감지 실패: Today 화면에 수동 시작 버튼 제공
```

**Part 3.2: HUD Idle 상태 (Ambient Presence)**

```
┌─────────────────────────────────────────────────────────────────┐
│  ① Trigger: 미팅 시작 후 자동 / 알림 닫힘 후 복귀               │
│  ② Question: 없음 (의식하지 않음)                               │
│  ③ Action: 없음 (시스템 백그라운드 동작)                        │
│  ④ Result:                                                      │
│     ┌─────────────────────────────────┐ 300 × 60px              │
│     │ 🟢  23:45  [2]                  │ 우측 상단               │
│     └─────────────────────────────────┘ 80% 투명도              │
│  ⑤ Next: 클릭 → 확장 / 갭 감지 → 알림 / 종료 → Part 4          │
└─────────────────────────────────────────────────────────────────┘

백그라운드 처리 (매 5초):
├─ STT: 음성 → 텍스트 (Deepgram)
├─ 화자 분리: 누가 말하는지
├─ 인사이트 추출: 숫자/결정 8요소/키워드
├─ 갭 분석: 예상 vs 실제 답변 비교
└─ 알림 판단: Level 결정 + 타이밍 최적화

디자인 원칙:
├─ 기본 80% → Hover 100% → 비활성 5분+ 60% 투명도
├─ 드래그로 위치 변경 가능 (마지막 위치 기억)
└─ 인터럽션 최소화 (소리 없음, 애니메이션 최소)
```

**Part 3.3: 알림 발생 (Intelligent Interruption)**

```
┌─────────────────────────────────────────────────────────────────┐
│  ① Trigger: AI 갭 감지 (2개+ 조건 충족)                         │
│     • Critical Gap: 딜 브레이커급 누락                          │
│     • Recovery Cost: 놓치면 재회의                              │
│     • Time Window: 지금 아니면 놓침                             │
│     • Flow Match: 대화 흐름과 자연스러움                        │
│  ② Question:                                                    │
│     • Level 3: "이거 위험한 건가?"                              │
│     • Level 2: "뭐가 빠졌다고?"                                 │
│     • Level 1: "나중에 봐야겠네"                                │
│  ③ Action: 읽기 (2-5초) → 버튼 클릭 or 무시                     │
│  ④ Result: Level별 상이 (아래 참조)                             │
│  ⑤ Next: 물어보기 → 질문 / 나중에 → Idle / 타임아웃 → Idle      │
└─────────────────────────────────────────────────────────────────┘

Level 2 알림 (9%):
┌─────────────────────────────────────┐
│ ⚠️ 확인 필요                         │ 375 × 180px
│                                     │ 노란 테두리
│ 예산 승인 프로세스 미확인            │ 효과음 없음
│                                     │ 10초 타임아웃
│ 💡 "승인은 누가 하시나요?"           │
│                                     │
│ [🎤 물어보기]      [나중에]          │
└─────────────────────────────────────┘

Level 3 긴급 알림 (1%):
┌─────────────────────────────────────┐
│ 🚨 치명적 누락                       │ 375 × 250px
│                                     │ 빨간 테두리
│ 계약 해지 조건 논의 안 됨            │ 진동 애니메이션
│                                     │ 효과음 "띵!"
│ ⚠️ 왜 위험?                          │ 타임아웃 없음
│ • 법적 분쟁 가능성                   │
│ • 과거 2건 유사 사례                 │
│                                     │
│ [🚨 지금 확인]      [위험 감수]      │
└─────────────────────────────────────┘

알림 타이밍 최적화 (Flow-Aware):
├─ 좋은 타이밍: 침묵 2초+, 화제 전환, 질문 직후, 숫자 언급 직후
└─ 나쁜 타이밍: 상대방 말하는 중, 감정적 대화, 복잡한 설명 중
```

**Part 3.4: 사용자 응답 (Action Completion)**

```
┌─────────────────────────────────────────────────────────────────┐
│                                                                 │
│  Path A: [물어보기] 클릭                                         │
│  ────────────────────────                                       │
│  • 제안 질문 표시 + 클립보드 복사                                │
│  • "질문 중..." 인디케이터 (3초)                                 │
│  • 답변 감지 시 자동 수집 + 토스트 알림                          │
│  • Idle 복귀                                                    │
│                                                                 │
│  Path B: [나중에] or 타임아웃                                    │
│  ────────────────────────                                       │
│  • 배지 숫자 +1                                                  │
│  • 연기된 항목은 회의 종료 시 재표면화                           │
│  • Idle 복귀                                                    │
│                                                                 │
│  Path C: [위험 감수] (Level 3 전용)                              │
│  ────────────────────────                                       │
│  • 경고 배지 유지 [!]                                           │
│  • 위험 감수 기록 저장 (선택적 사유 입력)                        │
│  • 회의 종료 후 다시 강조                                        │
│  • Idle 복귀                                                    │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘

질문 수행 후 피드백:
[물어보기] → [질문 중... 3초] → [Idle] → [답변 감지] → [✓ 수집됨 토스트]

연기 항목 처리:
├─ 미팅 종료 시 미해결 알림 필터링
├─ 자연스럽게 해결된 항목 제외 (전사 분석)
└─ 남은 항목 → 확정 모달에 표시
```

**Part 3 상태 머신**

```
                    ┌─────────────┐
                    │  앱 감지    │
                    └──────┬──────┘
                           ↓
                    ┌─────────────┐
                    │ 3.1 자동시작 │
                    └──────┬──────┘
                           ↓
        ┌─────────→ ┌─────────────┐ ←─────────┐
        │           │ 3.2 Idle    │            │
        │           └──────┬──────┘            │
        │                  ↓                   │
        │           [갭 감지?]                 │
        │            Yes ↓                     │
        │           ┌─────────────┐            │
        │           │ 3.3 알림    │            │
        │           └──────┬──────┘            │
        │                  ↓                   │
        │        ┌────┬────┴────┐              │
        │     물어보기 나중에 위험감수          │
        │        ↓    ↓    ↓                   │
        │        ┌─────────────┐               │
        └────────│ 3.4 응답    │───────────────┘
                 └──────┬──────┘
                        ↓
                 [회의 종료?] ───Yes──→ Part 4
```

**Part 3 핵심 성과 지표**

```typescript
const part3Metrics = {
  // 자동 시작 효과성
  autoStartRate: '> 90%',        // 자동 감지 성공률
  matchAccuracy: '> 85%',        // 캘린더 매칭 정확도

  // HUD 비간섭성
  avgIdleRatio: '> 95%',         // 미팅 중 Idle 비율
  manualExpandRate: '2-5회/미팅', // 수동 확장 빈도

  // 알림 효과성
  alertActionRate: '> 50%',      // Level 2/3 물어보기 클릭률
  alertTimeoutRate: '< 20%',     // 타임아웃 비율
  level3AcceptRate: '< 10%',     // 위험 감수 비율

  // 질문 효과성
  questionAskedRate: '> 80%',    // 클릭 후 실제 질문 비율
  answerReceivedRate: '> 90%',   // 질문 후 답변 수집률

  // 갭 해결
  gapResolutionRate: '> 70%',    // 감지된 갭 해결률
  avgResponseTime: '< 3초'        // 알림 → 응답 시간
};
```

#### 확정 및 통합 5-Layer Framework (Part 4)

> **핵심 철학**: "미팅 끝 = 정리 끝. 5초 확인, 끝."

**Part 4.1: 자동 전환 (Seamless Transition)**

```
┌─────────────────────────────────────────────────────────────────┐
│  ① Trigger: 미팅 앱 종료/통화 종료 감지                         │
│  ② Question: "오, 바로 정리해주네" (자연스러운 전환)            │
│  ③ Action: 0.5초 대기 → 자동 전환 (별도 클릭 불필요)            │
│  ④ Result: 확정 모달 페이드인                                   │
│  ⑤ Next: 확정 완료 → 완료 화면 / 나중에 → Today                │
└─────────────────────────────────────────────────────────────────┘

전환 트리거 조건:
├─ Primary: 회의 앱 종료 (Zoom/Meet/Teams 윈도우 닫힘)
├─ Secondary: 통화 종료 신호 (앱 상태 모니터링)
├─ Fallback: HUD 수동 종료 버튼 클릭
└─ Safety: 미팅 5분 미만 시 확정 모달 건너뛰기 옵션

전환 시퀀스:
1. 미팅 종료 감지 (0ms)
2. 종료 확신 대기 (500ms) - 오탐 방지
3. HUD 페이드아웃 (200ms, opacity 100% → 0%)
4. 확정 모달 페이드인 (400ms, opacity 0% → 100%)
5. AI 요약 완성 (백그라운드, 이미 준비된 상태)
```

**Part 4.2: 확정 모달 (Closure Moment)**

```
┌─────────────────────────────────────────────────────────────────┐
│  ① Trigger: Part 4.1 전환 완료                                  │
│  ② Question: "이거 맞아? 빠진 거 뭐야?"                         │
│  ③ Action: 빈칸 채우기 (30초-2분) + 확인 클릭                   │
│  ④ Result: "확정" 상태로 저장 + Notion 자동 반영                │
│  ⑤ Next: 완료 화면 (3초) → Today / Notion 페이지                │
└─────────────────────────────────────────────────────────────────┘

확정 모달 레이아웃:
┌─────────────────────────────────────────────────────────────────┐
│                       [×]                                        │
│                                                                  │
│  📋 A사 투자 검토 미팅                                           │
│  12월 30일 월요일 14:00 ~ 15:23 (1시간 23분)                     │
│                                                                  │
│  ═══════════════════════════════════════════════════════════    │
│                                                                  │
│  🎯 핵심 결정 사항 (AI 자동 추출)                                │
│  ┌─────────────────────────────────────────────────────────┐    │
│  │ 1. 시리즈A 500억 밸류 제안 → 합의                        │    │
│  │    담당: [김철수▼]  기한: [2025-01-15]                   │    │
│  │                                                         │    │
│  │ 2. 기술 실사 일정 조율 필요                              │    │
│  │    담당: [     ]   기한: [         ] ← 빈칸 강조          │    │
│  │                                                         │    │
│  │ 3. 리드 투자자 역할 A사 담당                             │    │
│  │    담당: [A사 대표]  기한: [      ]                      │    │
│  └─────────────────────────────────────────────────────────┘    │
│                                                                  │
│  💡 인사이트 요약                                                │
│  • 창업자 실행력 ⭐⭐⭐⭐⭐                                        │
│  • 시장 진입 타이밍 적절                                         │
│  • [더 보기...]                                                  │
│                                                                  │
│  ═══════════════════════════════════════════════════════════    │
│                                                                  │
│  ☑️ Notion "투자 미팅 DB"에 저장                                 │
│  (연결 안 됨? [Notion 연결하기])                                  │
│                                                                  │
│  ┌───────────────────────────────────────────────────────────┐  │
│  │                    [✓ 확정하기]                            │  │
│  └───────────────────────────────────────────────────────────┘  │
│                                                                  │
│  또는 [나중에 처리 →]                                            │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘

빈칸 채우기 UX (Zeigarnik Effect 활용):
├─ 빈칸 시각적 강조: 노란색 테두리 + 펄스 애니메이션
├─ 자동완성 제안: 이름/날짜 드롭다운 (최근 사용 우선)
├─ 진행률 표시: "2/3 완료" (완료감 제공)
└─ 모두 채움 → "확정하기" 버튼 활성화 + 녹색 강조

결정 사항 추출 8요소:
├─ WHO: 담당자/책임자
├─ WHAT: 결정 내용
├─ WHEN: 기한/일정
├─ WHY: 결정 배경
├─ HOW: 실행 방법
├─ HOW MUCH: 금액/수량
├─ IF: 조건부 합의
└─ RISK: 리스크/우려사항
```

**Part 4.3: 통합 자동 반영 (Zero-Effort Integration)**

```
┌─────────────────────────────────────────────────────────────────┐
│  ① Trigger: 확정하기 클릭                                       │
│  ② Question: 없음 (자동 처리)                                   │
│  ③ Action: 없음 (체크박스만 켜두면 됨)                          │
│  ④ Result: Notion 페이지 자동 생성 + 링크 제공                  │
│  ⑤ Next: "Notion에서 보기" 또는 Today 복귀                      │
└─────────────────────────────────────────────────────────────────┘

MVP: Notion 통합만 지원
├─ OAuth 연결 (최초 1회)
├─ 저장할 DB 선택 (최초 설정)
├─ 확정 시 자동 저장 (체크박스 ON = 기본값)
└─ 저장 후 "Notion에서 보기" 링크 제공

Notion 저장 데이터:
├─ 제목: 미팅 제목
├─ 일시: 미팅 시간
├─ 참석자: 캘린더 기반
├─ 결정사항: AI 추출 항목
├─ 인사이트: 핵심 요약
├─ 전문: 전체 녹취록 (토글)
└─ 미디어: 녹음 파일 링크

완료 화면 (3초 표시):
┌───────────────────────────────────────┐
│                                       │
│         ✓ 저장 완료                   │
│                                       │
│   Notion "투자 미팅 DB"에 저장됨      │
│                                       │
│   [Notion에서 보기]  [Today로 돌아가기] │
│                                       │
└───────────────────────────────────────┘
(3초 후 자동으로 Today 화면 이동)

Future Integrations (Post-MVP):
├─ Salesforce: 거래 기회 자동 업데이트
├─ HubSpot: 미팅 로그 + 딜 파이프라인
├─ Slack: 채널에 요약 공유
├─ Google Calendar: 후속 미팅 자동 생성
└─ Email: 참석자에게 요약 발송
```

**Part 4 Edge Cases**

```
┌──────────────────────────────────────────────────────────────────┐
│ Edge Case                    │ 처리 방식                         │
├──────────────────────────────┼───────────────────────────────────┤
│ 빈칸 없이 확정               │ 바로 확정 가능 (All fields filled)│
├──────────────────────────────┼───────────────────────────────────┤
│ 빈칸 남기고 나중에           │ Today에 "미완료" 카드 표시        │
│                              │ 빨간 뱃지 + "결정 확정 필요"       │
├──────────────────────────────┼───────────────────────────────────┤
│ X 버튼 / 모달 외부 클릭      │ "나중에 처리할까요?" 확인         │
│                              │ → "네" → Today에 카드              │
│                              │ → "아니요" → 모달 유지             │
├──────────────────────────────┼───────────────────────────────────┤
│ 저장 중 네트워크 오류        │ 로컬 저장 후 재시도               │
│                              │ "저장 실패, 재시도 중..." 표시    │
├──────────────────────────────┼───────────────────────────────────┤
│ 5분 미만 짧은 미팅           │ "짧은 미팅이었네요" + 간소화 모달 │
│                              │ 인사이트 0개면 건너뛰기 옵션      │
├──────────────────────────────┼───────────────────────────────────┤
│ AI 추출 인사이트 0개         │ "특별한 결정사항 없음" 표시       │
│                              │ 사용자가 수동 추가 가능           │
├──────────────────────────────┼───────────────────────────────────┤
│ Notion 연결 안 됨            │ 체크박스 비활성 + "연결하기" 버튼 │
│                              │ 확정 시 로컬만 저장               │
├──────────────────────────────┼───────────────────────────────────┤
│ Notion 저장 실패             │ "Notion 저장 실패" 토스트         │
│                              │ "재시도" 버튼 + 로컬에는 저장됨   │
├──────────────────────────────┼───────────────────────────────────┤
│ 연속 미팅 (5분 이내 다음 미팅)│ 확정 모달 빠른 모드               │
│                              │ "다음 미팅 곧 시작" 알림           │
│                              │ 10초 후 자동 최소화 옵션          │
└──────────────────────────────┴───────────────────────────────────┘
```

**Part 4 상태 머신**

```
            ┌─────────────────┐
            │   미팅 종료     │
            └────────┬────────┘
                     ↓
            ┌─────────────────┐
            │ 4.1 자동 전환   │
            │ (0.5s delay)    │
            └────────┬────────┘
                     ↓
            ┌─────────────────┐
            │ 4.2 확정 모달   │
            │  (Reviewing)    │
            └────────┬────────┘
                     ↓
          ┌──────────┴──────────┐
          ↓                     ↓
    [빈칸 있음]            [빈칸 없음]
          ↓                     ↓
    ┌───────────┐         ┌───────────┐
    │  Filling  │         │   Ready   │
    │ (빈칸채우기)│         │ (확정가능) │
    └─────┬─────┘         └─────┬─────┘
          ↓                     ↓
    [모두 채움]                 │
          ↓                     │
    ┌───────────┐               │
    │   Ready   │←──────────────┘
    └─────┬─────┘
          ↓
    [확정하기 클릭]
          ↓
    ┌───────────────┐
    │ 4.3 저장 중    │
    │ (Saving)      │
    └───────┬───────┘
            ↓
      ┌─────┴─────┐
      ↓           ↓
  [성공]        [실패]
      ↓           ↓
  ┌─────────┐   ┌─────────┐
  │ Complete │   │  Retry  │
  │ (완료화면)│   │ (재시도)│
  └────┬────┘   └────┬────┘
       ↓             ↓
    [3초 후]     [재시도?]──Yes──→ Saving
       ↓             │
    Today        No──┘──→ Today (로컬만 저장)
```

**Part 4 핵심 성과 지표**

```typescript
const part4Metrics = {
  // 확정 완료율
  confirmationRate: '> 85%',       // 미팅 종료 후 확정 완료 비율
  avgConfirmationTime: '< 180초',  // 평균 확정 소요 시간 (3분)

  // 갭 채우기
  gapFillRate: '> 90%',            // 빈칸 채우기 완료율
  avgGapsPerMeeting: '1-3개',      // 미팅당 평균 빈칸 수

  // 모달 포기율
  abandonRate: '< 15%',            // 나중에 클릭 또는 이탈 비율
  laterRecoveryRate: '> 70%',      // 나중에 → 당일 내 처리 비율

  // Notion 통합
  notionConnectRate: '> 60%',      // Notion 연결 비율
  notionSaveRate: '> 95%',         // 연결 시 저장 성공률
  notionViewRate: '> 30%',         // 저장 후 Notion 보기 클릭률

  // 만족도
  confirmationSatisfaction: '> 4.5/5', // 확정 프로세스 만족도

  // 시간 효율
  timeToReady: '< 60초',           // 모달 오픈 → Ready 상태
  totalPostMeetingTime: '< 3분'    // 미팅 종료 → Today 복귀
};
```

---

### 4.2 화면 2: 오늘 (Today) - 오늘 할 일 화면

#### 설계 철학
> "아침에 열면 오늘 뭐 해야 하는지 딱 보임"

#### 화면 구조

```
┌──────────────────────────────────────┐
│  좋은 아침이에요, 민수님 👋           │  ← 인사 (시간대별)
│  2025년 12월 29일 일요일             │
├──────────────────────────────────────┤
│                                      │
│  🔴 지금 바로 처리 (2)  ← 상단 고정   │
│  ─────────────────────────────────   │
│  ┌────────────────────────────────┐  │
│  │ 어제 C사 미팅 - 결정 확정 안 됨 │  │
│  │                                │  │
│  │ 빈칸: 담당자, 기한              │  │
│  │ 예상 시간: 3분                  │  │
│  │                                │  │
│  │ [지금 처리 →]                   │  │
│  └────────────────────────────────┘  │
│                                      │
│  📅 오늘 미팅 (3)                     │
│  ─────────────────────────────────   │
│  ┌────────────────────────────────┐  │
│  │ 10:00 A사 2차 투자 검토         │  │
│  │                                │  │
│  │ 💡 준비 필요:                   │  │
│  │ • 지난번 미확인: CAC, LTV       │  │
│  │ • 꼭 물어볼 질문 2개 준비됨     │  │
│  │                                │  │
│  │ 예상 준비 시간: 2분             │  │
│  │                                │  │
│  │ [준비하기]  [바로 시작]         │  │
│  └────────────────────────────────┘  │
│                                      │
│  ⏰ 나중에 (4)  ← 접혀있음            │
│  [펼치기 ▼]                          │
│                                      │
└──────────────────────────────────────┘
```

#### 우선순위 자동 정렬

**AI가 자동으로 정렬하는 기준:**

```
🔴 긴급 (지금 바로):
├─ 조건 1: 확정 안 된 결정 (24시간 이내)
├─ 조건 2: 기한 임박 액션 (오늘 마감)
├─ 조건 3: 오늘 미팅 준비 필요
└─ 정렬: 중요도 × 긴급도 점수

📅 오늘 (시간순):
├─ 오전 미팅 (시간 빠른 순)
├─ 오후 미팅
└─ 저녁 미팅

⏰ 나중에:
├─ 대기 중 (타인 응답 기다림)
├─ 블로킹됨 (선행 작업 필요)
└─ 낮은 우선순위
```

**사용자가 하는 일:**
```
✅ 위에서부터 순서대로 처리
❌ 우선순위 직접 설정
❌ 카테고리 분류
❌ 태그 관리
```

#### 미팅 준비 플로우 (Part 1.5: 5-Layer Framework 고도화)

##### 행동 설계 (Fogg Model B=MAT)

```
Motivation (동기):
├─ Hope: "2분 준비로 완벽하게 무장된 상태로 미팅 입장"
├─ Fear: "지난번에 뭐 약속했는지 기억 안 나서 신뢰 잃기 싫다"
└─ Context: 미팅 10분 전, 시간 압박 + 준비 욕구 동시 발생

Ability (능력):
├─ Zero Input: AI가 다 준비해놓음, 읽기만 하면 됨
├─ Time: 2분 이내 (브리핑 읽기 30초 + 확인 90초)
└─ Physical: 클릭 3-4번으로 완료

Trigger (트리거):
├─ Push: 10분 전 알림 "A사 미팅 10분 후, 준비할까요?"
├─ Visual: "오늘" 화면에 카운트다운 표시
└─ Hot: 미팅 임박한 순간 = 행동 가능성 최고조
```

##### [준비하기] 클릭 시 화면

```
┌────────────────────────────────────────┐
│ 📋 A사 2차 미팅 준비                      │
│ 예상 소요: 2분                           │
├────────────────────────────────────────┤
│                                        │
│ 📌 지난 미팅 핵심 (12/22)               │
│ ┌──────────────────────────────────┐  │
│ │ • MAU 10만, 월 성장률 15%         │  │
│ │ • 유료 전환율 8%                  │  │
│ │ • CTO가 보안 우려 표명            │  │
│ └──────────────────────────────────┘  │
│                                        │
│ ⚠️ 미확인 항목 (지난번 놓친 것)          │
│ ┌──────────────────────────────────┐  │
│ │ ❌ CAC 채널별 상세                 │  │
│ │ ❌ LTV 계산 기준                   │  │
│ │ ⚠️ 경쟁사 대응 전략 (일부만)        │  │
│ └──────────────────────────────────┘  │
│                                        │
│ 💡 이번에 물어볼 질문                    │
│ ☑ "CAC는 채널별로 어떻게 되나요?"       │
│ ☑ "CTO 보안 검토 일정은 어떻게 되나요?" │
│ ☐ [+ 내 질문 추가]                      │
│                                        │
│ [준비 완료 - 회의 시작 →]  [나중에]     │
│                                        │
└────────────────────────────────────────┘
```

##### Edge Cases 처리

```
Case 1: 첫 미팅 (과거 기록 없음)
├─ "지난 미팅 핵심" 섹션 숨김
├─ Playbook 기본 질문 표시
└─ CTA: "첫 미팅 시작 →"

Case 2: 미팅 3건 이상 (기록 많음)
├─ 가장 최근 미팅만 상세 표시
├─ "이전 미팅 2건 더 보기" 접힘 섹션
└─ 미확인 항목: 모든 미팅에서 누적

Case 3: 준비 건너뛰기
├─ 시스템: 준비 안 됨 상태로 미팅 시작
├─ HUD: "💡 준비 안 됨 - 미확인 2건" 배지 표시
└─ 클릭 시: 준비 모달 다시 표시 (미팅 중에도)

Case 4: 급한 미팅 (5분 이내)
├─ 화면: 핵심만 표시 (미확인 항목 + 질문 2개)
├─ 메시지: "⚡ 빠른 준비 모드"
└─ CTA: "30초 준비 완료 →"
```

**핵심:**
- ✅ "지난번 뭐 했지?" 찾을 필요 없음 (자동 요약)
- ✅ "이번엔 뭐 물어야 하지?" 고민 없음 (질문 준비됨)
- ✅ 읽고 확인만 하면 됨
- ✅ 시간 압박 상황 대응 (빠른 준비 모드)

#### 확정 화면 (회의 직후 자동 표시)

**회의 종료 → 자동 전환:**

```
┌────────────────────────────────┐
│ 📝 방금 회의 정리 (5분)         │
├────────────────────────────────┤
│                                │
│ AI가 자동 추출한 내용:          │
│                                │
│ ✅ 결정 사항 (1):               │
│ ┌──────────────────────────┐  │
│ │ DD 진행 합의              │  │
│ │ 시작일: 2025-01-06        │  │
│ │ 담당: 김대표 (A사)        │  │
│ └──────────────────────────┘  │
│                                │
│ ⚠️ 빈칸 채우기 (2):              │
│ ┌──────────────────────────┐  │
│ │ 액션: 재무 자료 제출      │  │
│ │ 담당: [____] ← 선택 필요  │  │
│ │ 기한: [____] ← 날짜 선택  │  │
│ └──────────────────────────┘  │
│                                │
│ 📋 인사이트 (5개 자동 추출됨):  │
│ ✓ MAU 10만, 월 성장률 15%       │
│ ✓ 유료 전환율 8%                │
│ ... [더 보기]                   │
│                                │
│ [확정 완료 →]                   │
│ 예상 시간: 2분 남음             │
│                                │
└────────────────────────────────┘
```

**사용자가 하는 일:**
```
1. AI 추출 내용 확인 (읽기 30초)
2. 빈칸 채우기 (입력 2분)
3. [확정 완료] 클릭

총 소요: 3-5분
```

**확정 후 자동 동작:**
```
[확정 완료] 클릭
    ↓
자동으로:
├─ Notion에 회의록 페이지 생성
├─ Salesforce 딜 단계 → "DD 진행 중"
├─ Slack #sales 채널에 요약 공유
├─ 김대표에게 액션 리마인더 이메일
└─ 캘린더에 다음 체크 일정 추가

사용자는:
아무것도 안 함
```

#### Today 화면 5-Layer Framework (Part 2.1)

##### Layer 1: Strategy & JTBD

```
Primary Job:
"나는 아침에 일어났을 때, 오늘 무엇을 놓치면 안 되는지 3초 만에 파악하고 싶다"

Outcome Expectation:
├─ 긴급한 것 먼저 (AI가 우선순위 판단)
├─ 오늘 일정 한눈에 (스캔 10초 이내)
├─ 다음 행동 명확 (각 카드에 CTA)
└─ 인지 부하 최소화 (그룹핑 + 숫자)

Success = 사용자가 "오늘 뭐 하지?" 고민 없이
         위에서부터 순서대로 처리하면 되는 상태
```

##### Layer 2: Behavioral Design (Fogg Model)

```
Motivation (동기):
├─ Hope: "오늘 하루를 완벽하게 시작하자"
├─ Fear: "중요한 걸 놓치면 큰일"
├─ Social: "팀에 피해 주기 싫어"
└─ Amplifier: 숫자 배지 "처리 2건" = 작은 성취감 예고

Ability (능력):
├─ Physical: 스크롤 1번 + 클릭 1번으로 행동 시작
├─ Cognitive: 3개 섹션만 (긴급/오늘/나중에)
├─ Time: 전체 스캔 10초, 각 카드 처리 2-5분
└─ Memory: 기억할 필요 없음 (AI가 다 정리)

Trigger (트리거):
├─ Push: 아침 8시 "좋은 아침! 오늘 처리 2건"
├─ Visual: 🔴 빨간 배지 = 즉시 주목
├─ Hot: 아침 루틴 = 습관 형성 최적 타이밍
└─ Social: "어제 A사 미팅 - 확정 안 됨" = 책임감
```

##### Layer 3: Structure & Logic

```
화면 구조 (위→아래 우선순위):

┌──────────────────────────────────┐
│ 인사 섹션                          │
│ "좋은 아침이에요, 민수님 👋"        │
│ 2025년 12월 30일 월요일           │
├──────────────────────────────────┤
│ 🔴 지금 바로 처리 (2) [펼침]       │
│ ┌────────────────────────────┐   │
│ │ 미확정 카드 / 기한임박 카드  │   │
│ └────────────────────────────┘   │
├──────────────────────────────────┤
│ 📅 오늘 미팅 (3) [펼침]            │
│ ┌────────────────────────────┐   │
│ │ 10:00 A사 / 14:00 B사 ...  │   │
│ └────────────────────────────┘   │
├──────────────────────────────────┤
│ ⏰ 나중에 (4) [접힘]               │
│ [펼치기 ▼]                        │
└──────────────────────────────────┘

섹션 로직:
├─ 🔴 긴급: 24시간 내 확정 필요 OR 오늘 마감
├─ 📅 오늘: 오늘 예정된 미팅 (시간순)
└─ ⏰ 나중에: 내일 이후 (기본 접힘)
```

##### Layer 4: Edge Cases

```
Empty States:

Case 1: 완전 신규 사용자 (미팅 기록 0건)
├─ 인사 섹션: 환영 메시지
├─ 빈 상태 일러스트 + "첫 미팅을 기다리고 있어요"
├─ CTA: [캘린더 연동하기] [데모 미팅 체험]
└─ 마이크로카피: "캘린더 연동하면 자동으로 미팅이 나타나요"

Case 2: 오늘 미팅 없음
├─ 🔴 긴급 섹션만 표시 (있으면)
├─ 📅 오늘: "오늘은 여유롭네요! ☕" 메시지
└─ 나중에 섹션 자동 펼침

Case 3: 과부하 (오늘 미팅 5건 이상)
├─ 경고 배너: "오늘 미팅이 많네요. 중요한 것만 집중하세요"
├─ 상위 3건만 펼침, 나머지 접힘
├─ 각 카드에 예상 준비 시간 강조
└─ 스킵 옵션 더 눈에 띄게

Case 4: 긴급 누적 (처리 안 된 항목 5건 이상)
├─ 경고: "밀린 확정이 쌓이고 있어요"
├─ 우선순위 점수 기반 상위 3건만 표시
├─ [일괄 처리 모드] 버튼 제안
└─ 가장 오래된 것부터 해결 유도
```

##### Layer 5: Event Logging

```typescript
type TodayEventType =
  | 'today_screen_viewed'       // Today 화면 진입
  | 'today_section_expanded'    // 섹션 펼침
  | 'today_section_collapsed'   // 섹션 접음
  | 'today_card_clicked'        // 카드 클릭
  | 'today_empty_state_shown'   // 빈 상태 표시
  | 'today_refresh_triggered'   // 새로고침
  | 'today_overload_shown';     // 과부하 경고 표시

interface TodayMetadata {
  urgentCount: number;         // 긴급 섹션 항목 수
  todayCount: number;          // 오늘 미팅 수
  laterCount: number;          // 나중에 항목 수
  totalUnconfirmed: number;    // 미확정 결정 총 수
  timeOfDay: 'morning' | 'afternoon' | 'evening';
  sessionDuration: number;     // 화면 체류 시간
}

// 핵심 지표
const todayMetrics = {
  avgScanTime: avg(sessionDuration WHERE today_screen_viewed),
  // 목표: < 10초

  urgentClearRate: count(urgent_completed) / count(urgent_shown),
  // 목표: > 80%

  sectionInteractionRate: count(section_expanded) / count(today_screen_viewed),
  // 모니터링용
};
```

#### 미팅 카드 인터랙션 (Part 2.2)

##### Layer 1: Strategy & JTBD

```
Primary Job:
"나는 미팅 카드를 볼 때, 지금 뭘 해야 하는지 바로 알고 싶다"

Card States (상태 기계):
┌─────────────────────────────────────────────┐
│                                             │
│  PENDING ──→ URGENT ──→ PREPPING            │
│     │           │           │               │
│     │           ↓           ↓               │
│     └──→ SKIPPED ←──── READY ──→ LIVE       │
│                                             │
└─────────────────────────────────────────────┘

State Definitions:
├─ PENDING: 미팅 24시간+ 남음, 낮은 우선순위
├─ URGENT: 미팅 24시간 이내 && 확정 대기
├─ PREPPING: [준비하기] 클릭 후 준비 중
├─ READY: 준비 완료, 미팅 대기
├─ LIVE: 현재 진행 중 (Now 화면으로)
└─ SKIPPED: 사용자가 준비 건너뜀
```

##### Layer 2: Behavioral Design

```
카드별 CTA 설계:

┌─ 확정 대기 카드 (빈칸 있음) ─┐
│ Motivation: 완료의 쾌감       │
│ Ability: 터치 2번으로 완료    │
│ Trigger: 🔴 빨간 점 = 긴급    │
│ CTA: [지금 처리 →]            │
└─────────────────────────────┘

┌─ 오늘 미팅 카드 ─────────────┐
│ Motivation: 준비된 자신감     │
│ Ability: 2분 준비 (시간 명시) │
│ Trigger: 💡 준비 필요 배지    │
│ CTA: [준비하기] [바로 시작]   │
└─────────────────────────────┘

┌─ 준비 완료 카드 ────────────┐
│ Motivation: 대기 상태 확인   │
│ Ability: 클릭 한 번         │
│ Trigger: ✅ 녹색 체크       │
│ CTA: [미팅 시작] (활성화)    │
└─────────────────────────────┘
```

##### Layer 3: Card Visual Design

```
카드 구조 (공통):
┌────────────────────────────────┐
│ 📌 10:00  A사 2차 투자 검토    │ ← 시간 + 제목
│ ─────────────────────────────  │
│ 💡 준비 필요:                  │ ← 상태 메시지
│ • 미확인: CAC, LTV            │ ← 컨텍스트
│ • 예상 준비 시간: 2분          │ ← Ability 강조
│                                │
│ [준비하기]  [바로 시작]        │ ← 듀얼 CTA
└────────────────────────────────┘

상태별 시각 변화:
├─ PENDING: 회색 테두리, 낮은 contrast
├─ URGENT: 빨간 테두리 + 펄스 애니메이션
├─ PREPPING: 파란 테두리, 프로그레스 표시
├─ READY: 녹색 테두리, ✅ 아이콘
└─ SKIPPED: 회색 + ⚠️ "준비 안 됨"
```

##### Layer 4: Edge Cases

```
Case 1: 겹치는 미팅 (Back-to-back)
├─ 경고: "⚡ 연속 미팅 - 빠른 준비 권장"
├─ 준비 시간 추천: 1분 (압축 모드)
├─ 자동으로 핵심만 표시 (미확인 상위 2개)
└─ 미팅 사이 전환 최적화

Case 2: 취소된 미팅
├─ 카드에 취소선 + "취소됨" 배지
├─ 24시간 후 자동 아카이브
├─ 액션: [아카이브] [복구]
└─ 관련 준비 내용은 보존

Case 3: 반복 미팅 (주간 1:1 등)
├─ "3회차 주간 1:1" 표시
├─ 지난 회차 누적 미확인 표시
├─ 패턴 감지: "매주 같은 질문 나오네요"
└─ 제안: "반복 질문 템플릿으로 저장?"

Case 4: 미팅 임박 (5분 이내)
├─ 카드 강조: 빨간 배경 + 카운트다운
├─ CTA 변경: [준비하기] → [빠른 준비 30초]
├─ 또는: [바로 시작] 강조
└─ 준비 모달: 압축 버전 자동 적용
```

##### Layer 5: Event Logging

```typescript
type CardEventType =
  | 'card_viewed'              // 카드 뷰포트 진입
  | 'card_clicked'             // 카드 클릭
  | 'card_prep_clicked'        // [준비하기] 클릭
  | 'card_start_clicked'       // [바로 시작] 클릭
  | 'card_state_changed'       // 상태 전환
  | 'card_urgent_triggered'    // 긴급 상태 전환
  | 'card_pulse_shown';        // 펄스 애니메이션 표시

interface CardMetadata {
  cardId: string;
  meetingId: string;
  companyName: string;
  meetingNumber: number;
  cardState: 'pending' | 'urgent' | 'prepping' | 'ready' | 'live' | 'skipped';
  timeUntilMeeting: number;    // 분 단위
  hasUnconfirmed: boolean;
  unconfirmedCount: number;
  prepTimeEstimate: number;    // 초 단위
}

// 핵심 지표
const cardMetrics = {
  prepClickRate: count(card_prep_clicked) / count(card_viewed),
  // 목표: > 70%

  skipRate: count(card_start_clicked) / count(card_viewed WHERE hasUnconfirmed),
  // 목표: < 30%

  avgTimeToAction: avg(timeToClick WHERE card_viewed to card_prep_clicked),
  // 목표: < 5초
};
```

---

### 4.3 화면 3: 검색 (Search) - 과거 찾기 화면

#### 설계 철학
> "구글처럼 검색만 있으면 됨"

#### 화면 구조 (극도로 단순)

```
┌──────────────────────────────────────┐
│                                      │
│  🔍 검색                              │
│  ┌────────────────────────────────┐  │
│  │ 3개월 전 A사 CAC               │  │  ← 검색창
│  └────────────────────────────────┘  │
│                                      │
├──────────────────────────────────────┤
│                                      │
│  결과 3개                             │
│                                      │
│  ┌────────────────────────────────┐  │
│  │ A사 2차 미팅 (2025.12.29)      │  │
│  │                                │  │
│  │ "CAC는 채널별로 온라인 $85,    │  │
│  │  오프라인 $120입니다"          │  │
│  │                                │  │
│  │ [전체 보기 →]                  │  │
│  └────────────────────────────────┘  │
│                                      │
│  ┌────────────────────────────────┐  │
│  │ A사 1차 미팅 (2025.12.22)      │  │
│  │ "CAC 관련 질문 나왔으나..."    │  │
│  │ [전체 보기 →]                  │  │
│  └────────────────────────────────┘  │
│                                      │
│  그게 전부입니다.                     │
│                                      │
└──────────────────────────────────────┘
```

#### 시맨틱 검색 (자연어 이해)

**사용자 검색 예시:**

```
검색어: "A사 예산"
→ AI 이해: "A사" + "예산" 관련 모든 대화
→ 결과: A사 미팅 중 예산 언급된 부분

검색어: "지난달 실패한 딜"
→ AI 이해: 지난 30일 + 상태="실패"
→ 결과: 실패로 표시된 모든 딜

검색어: "리스크 논의 안 된 회의"
→ AI 이해: 결정 8요소 중 "리스크" 누락
→ 결과: 리스크 항목 ❌ 인 회의

검색어: "김대표 약속"
→ AI 이해: 발화자="김대표" + 액션 아이템
→ 결과: 김대표가 약속한 모든 액션

검색어: "3개월 전 CAC 얘기"
→ AI 이해: 시간="3개월 전" + 키워드="CAC"
→ 결과: 시간순 정렬
```

#### 검색 결과 하이라이트

```
┌────────────────────────────────┐
│ A사 2차 미팅 (2025.12.29)      │
│                                │
│ 김대표: "CAC는 채널별로         │
│         온라인이 $85,          │  ← 검색어 "CAC" 강조
│         오프라인이 $120입니다"  │
│                                │
│ 민수: "LTV는 어떻게 되나요?"    │
│                                │
│ [전체 보기 →]                  │
└────────────────────────────────┘

강조 표시:
├─ 검색어 볼드 처리
├─ 배경 노란색
└─ 전후 1-2문장 표시 (컨텍스트)
```

#### 필터 (숨김, 필요 시만)

```
기본: 필터 없음 (검색창만)

[고급 검색] 클릭 시:
┌────────────────────────────────┐
│ 기간: [전체 ▼]                  │
│ 회사: [전체 ▼]                  │
│ 상태: [전체 ▼]                  │
│                                │
│ [적용]  [초기화]                │
└────────────────────────────────┘

원칙:
├─ 기본은 숨김 (복잡도 최소화)
├─ 대부분 검색어만으로 충분
└─ 고급 사용자만 필터 사용
```

#### 검색 5-Layer Framework (Part 5)

> **사용자 여정**: 부가 기능 > 검색
> **핵심 가치**: "3개월 전 A사 CAC 얘기"를 5초 내에 찾기

**Part 5.1: 검색 진입 (Search Entry)**

```
┌─────────────────────────────────────────────────────────────────┐
│                    Part 5.1: 검색 진입                          │
├─────────────────────────────────────────────────────────────────┤
│  ① Trigger: 과거 정보 필요 ("김대표가 뭐라고 했더라?")           │
│  ② Motivation: Onno에서 검색하면 바로 찾을 수 있다는 확신        │
│  ③ Ability: 시맨틱 검색 = 자연어 그대로 입력 가능               │
│  ④ Action: 검색어 입력 → Enter or 300ms 디바운스               │
│  ⑤ Reward: 빠른 결과 표시 + 하이라이트                         │
└─────────────────────────────────────────────────────────────────┘
```

**시맨틱 검색 쿼리 파싱:**

```yaml
자연어_이해_예시:
  "3개월 전 A사 CAC":
    timeRange: "3개월 전"
    company: "A사"
    keyword: "CAC"

  "김대표가 약속한 것":
    person: "김대표"
    decisionElement: "action_item"

  "지난달 실패한 딜":
    timeRange: "지난달"
    status: "실패"

  "리스크 논의 안 된 회의":
    decisionElement: "risk"
    status: "missing"
```

**Part 5.2: 검색 결과 (Search Results)**

```
┌─────────────────────────────────────────────────────────────────┐
│                    Part 5.2: 검색 결과                          │
├─────────────────────────────────────────────────────────────────┤
│  ① Trigger: 검색 완료 (결과 표시)                               │
│  ② Motivation: 첫 번째 결과가 내가 찾던 것                      │
│  ③ Ability: 관련도순 + 하이라이트 + 스니펫                      │
│  ④ Action: 결과 카드 클릭 → 상세 보기                          │
│  ⑤ Reward: 원하는 정보 발견                                    │
└─────────────────────────────────────────────────────────────────┘
```

**결과 랭킹 알고리즘:**

```yaml
Ranking_Factors:
  semantic_similarity: 40%    # 벡터 유사도
  recency: 25%                # 최신 우선
  relevance_signals:          # 15%
    - exact_match_boost
    - phrase_match_boost
    - decision_element_match
  user_history: 20%           # 사용자 선호 학습
    - frequently_searched_topics
    - frequently_accessed_meetings
```

**Part 5.3: 상세 조회 (Detail View)**

```
┌─────────────────────────────────────────────────────────────────┐
│                    Part 5.3: 상세 조회                          │
├─────────────────────────────────────────────────────────────────┤
│  ① Trigger: 결과 클릭                                           │
│  ② Motivation: 전체 맥락 이해 + 관련 정보 발견                  │
│  ③ Ability: 자동 스크롤 + 하이라이트 네비게이션                 │
│  ④ Action: 하이라이트 간 이동 (▲▼) / 관련 미팅 클릭            │
│  ⑤ Reward: 필요한 정보와 맥락을 함께 확인                      │
└─────────────────────────────────────────────────────────────────┘
```

**Part 5 Edge Cases**

```yaml
Edge_Cases:
  no_results:
    trigger: "검색 결과 0건"
    response: |
      - 검색어 분해 제안: "'A사 예산' → 'A사' 또는 '예산'"
      - 유사 검색어 제안: "'예싼' → '예산'으로 검색"
      - 필터 완화 제안: "기간 제한 없이 검색"
    ui: "'A사 예산' 결과가 없습니다. 다른 검색어를 시도해보세요"

  too_many_results:
    trigger: "결과 100건 이상"
    response: |
      - 상위 20개만 표시
      - 필터 사용 권장
      - 더 구체적인 검색어 제안
    ui: "결과가 많습니다 (150건). 필터로 범위를 좁혀보세요"

  typo_handling:
    trigger: "오타로 추정되는 검색어"
    response: |
      - 자동 수정 후 검색
      - 원래 검색어 옵션 제공
    ui: "'A사 예싼' → 'A사 예산' 검색 결과 표시 중"

  ambiguous_time:
    trigger: "'얼마 전', '최근', '지난번' 등 모호한 시간 표현"
    response: |
      - 기본 30일로 해석
      - 범위 조정 옵션 제공
    ui: "최근 30일 결과 표시 [기간 변경]"

  cross_meeting_topic:
    trigger: "같은 주제가 여러 미팅에 분산"
    response: |
      - 타임라인 뷰 제안
      - 주제별 그룹핑
    ui: "'예산' 주제가 3개 미팅에서 논의됨 [타임라인 보기]"

  search_during_meeting:
    trigger: "미팅 중 HUD에서 검색 시도"
    response: |
      - HUD 내 간략 검색 지원
      - 전체 검색은 콘솔로 유도
    ui: "[간략 검색] A사 예산 - 결과 2건 (콘솔에서 자세히)"
```

**Part 5 상태 머신**

```
┌─────────────────────────────────────────────────────────────────┐
│                   Part 5: 검색 상태 머신                         │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  ┌─────────┐  input  ┌─────────┐  submit  ┌─────────┐           │
│  │  Idle   │ ──────→ │ Typing  │ ───────→ │Searching│           │
│  │(검색대기)│         │ (입력중) │          │ (검색중) │           │
│  └────┬────┘         └────┬────┘          └────┬────┘           │
│       ↑                   │ clear              │ results        │
│       │                   ↓                    ↓                │
│       │              ┌─────────┐         ┌─────────┐            │
│       └──────────────│  Idle   │         │ Results │            │
│                      └─────────┘         │(결과표시)│            │
│                                          └────┬────┘            │
│                                               │ click           │
│                                               ↓                 │
│                                          ┌─────────┐            │
│                                          │ Detail  │            │
│                                          │(상세조회)│            │
│                                          └────┬────┘            │
│                                               │ back            │
│                                               ↓                 │
│                                           Results               │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

**Part 5 핵심 성과 지표**

```typescript
const part5Metrics = {
  // 검색 사용률
  searchUsageRate: '> 20%',          // DAU 중 검색 사용 비율

  // 검색 성공률
  searchSuccessRate: '> 70%',        // 결과 클릭률
  firstResultClickRate: '> 50%',     // 첫 번째 결과 클릭률

  // 검색 품질
  semanticSuccessRate: '> 80%',      // 시맨틱 파싱 성공률
  reSearchRate: '< 25%',             // 재검색 비율 (낮을수록 좋음)

  // 시간 효율
  avgTimeToClick: '< 10초',          // 검색 → 결과 클릭 시간
  avgSearchTime: '< 0.5초',          // 검색 처리 시간

  // 탐색 행동
  detailConversionRate: '> 90%',     // 결과 → 상세 전환율
  relatedExplorationRate: '> 25%',   // 관련 미팅 탐색률

  // 만족도
  searchSatisfactionProxy: '> 60%',  // 상세 후 바로 종료 비율
  filterUsageRate: '< 30%'           // 필터 사용률 (시맨틱 잘 되면 낮음)
};
```

#### 설정 5-Layer Framework (Part 5.2)

설정 화면의 핵심 원칙: **"필요할 때만 찾고, 변경은 최소화"**

> 사용자가 설정에 자주 들어가는 것은 오히려 UX 실패 신호입니다.
> 좋은 기본값(sensible defaults)으로 설정 진입 자체를 줄이는 것이 목표입니다.

**Part 5.2.1: 설정 메인 (Settings Main)**

```
┌─────────────────────────────────────────────────────────────────┐
│                    Part 5.2.1: 설정 메인                         │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  Strategy/JTBD:                                                 │
│  ├─ 상황: "알림이 너무 많아" / "통합 연결 변경하고 싶어"           │
│  ├─ 하고 싶은 것: 빠르게 원하는 설정 찾아서 변경                  │
│  └─ 기대 결과: 변경 후 즉시 반영, 설정에서 빨리 벗어남            │
│                                                                 │
│  설정 진입 동기 분포:                                            │
│  ├─ 🔗 통합 관리: 40% (Notion, 캘린더 연결/해제)                  │
│  ├─ 🔔 알림 조정: 30% (빈도 조절, 시간 설정)                      │
│  ├─ 👤 프로필: 15% (이름, 이메일, 사진)                           │
│  ├─ 💳 구독: 10% (플랜 확인, 결제 정보)                           │
│  └─ 📁 기타: 5% (데이터, 로그아웃)                                │
│                                                                 │
├─────────────────────────────────────────────────────────────────┤
│  Fogg Model 설계:                                               │
│                                                                 │
│  Motivation:                                                    │
│  ├─ 접근성: 설정 아이콘은 항상 같은 위치에                        │
│  ├─ 예측성: 설정 변경 결과를 미리 보여줌                          │
│  └─ 안심: 위험한 설정은 경고 표시                                 │
│                                                                 │
│  Ability:                                                       │
│  ├─ 검색 지원: 설정 내 검색으로 빠른 접근                         │
│  ├─ 분류 명확: 카테고리별 명확한 구분                             │
│  └─ 한 화면 완결: 스크롤 없이 주요 설정 보임                      │
│                                                                 │
│  Trigger:                                                       │
│  ├─ 문제 발생 시: "알림 과다 → '설정에서 조절' 링크"              │
│  ├─ 온보딩 미완료: "'통합 연결' 배지 표시"                        │
│  └─ 결제 임박: "'구독' 섹션 하이라이트"                           │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

**Part 5.2.2: 통합 관리 (Integration Management)**

```
┌─────────────────────────────────────────────────────────────────┐
│                   Part 5.2.2: 통합 관리                          │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  Strategy/JTBD:                                                 │
│  ├─ Notion: "미팅 내용이 자동으로 Notion에 저장되길 원함"         │
│  ├─ Calendar: "캘린더에서 미팅 일정을 자동으로 가져오길 원함"     │
│  └─ 해제: "더 이상 사용하지 않는 통합을 정리하고 싶음"            │
│                                                                 │
│  MVP 통합 (우선순위):                                            │
│  ├─ 필수: Notion, Google Calendar                               │
│  ├─ 선택: Outlook Calendar                                      │
│  └─ 예정: Slack, Salesforce, HubSpot                            │
│                                                                 │
├─────────────────────────────────────────────────────────────────┤
│  연결 플로우 설계:                                               │
│                                                                 │
│  연결됨 상태:                                                    │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │ 📓 Notion                                               │   │
│  │    워크스페이스: Onno Team                               │   │
│  │    저장 위치: /Meetings                                  │   │
│  │    마지막 동기화: 2분 전                                  │   │
│  │    [설정 변경] [연결 해제]                                │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                 │
│  연결 가능 상태:                                                 │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │ 📅 Outlook Calendar                         [연결하기]   │   │
│  │    Microsoft 캘린더와 연동                               │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                 │
│  Coming Soon 상태:                                              │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │ 💬 Slack                                   [Coming Soon] │   │
│  │    미팅 요약을 채널에 자동 공유                           │   │
│  │    → 클릭 시 "출시 알림 받기" [이메일 등록]                │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                 │
├─────────────────────────────────────────────────────────────────┤
│  Notion 설정 변경 모달:                                          │
│                                                                 │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │ 저장 위치:  [📁 /Meetings ▼]                             │   │
│  │                                                         │   │
│  │ 저장 옵션:                                               │   │
│  │ ☑ 미팅 종료 시 자동 저장                                 │   │
│  │ ☑ 전사 내용 포함                                         │   │
│  │ ☐ 참석자 정보 포함                                       │   │
│  │                                                         │   │
│  │ 템플릿: [기본 미팅 템플릿 ▼]                              │   │
│  │                                                         │   │
│  │          [취소]            [저장]                        │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

**Part 5.2.3: 알림 설정 (Notification Settings)**

```
┌─────────────────────────────────────────────────────────────────┐
│                   Part 5.2.3: 알림 설정                          │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  Strategy/JTBD:                                                 │
│  ├─ 조절: "알림이 방해되지 않게 적절히 조절하고 싶음"             │
│  ├─ 필터: "정말 중요한 것만 알림 받고 싶음"                       │
│  └─ 시간: "업무 시간에만 알림 받고 싶음"                          │
│                                                                 │
├─────────────────────────────────────────────────────────────────┤
│  알림 빈도 슬라이더:                                             │
│                                                                 │
│  적음 ───●───────────────────── 많음                            │
│          ↑ 현재: 하루 평균 3-5개                                 │
│                                                                 │
│  빈도별 예상 알림:                                               │
│  ├─ 적음: 1-2개/일 (긴급 알림만)                                 │
│  ├─ 보통: 3-5개/일 (중요 인사이트 포함)                           │
│  └─ 많음: 8-12개/일 (모든 알림)                                  │
│                                                                 │
├─────────────────────────────────────────────────────────────────┤
│  카테고리별 알림 설정:                                           │
│                                                                 │
│  미팅 전:                                                        │
│  ├─ 준비 리마인더 [ON ●] - 알림 시점: [10분 전 ▼]               │
│  └─ 일정 변경 알림 [ON ●]                                        │
│                                                                 │
│  미팅 중:                                                        │
│  ├─ AI 인사이트 [ON ●] - 중요 수치, 결정 사항                    │
│  ├─ 갭 감지 알림 [ON ●] - 놓친 질문, 미확인 사항                 │
│  └─ 위험 신호 알림 [ON ●] - 부정적 신호, 리스크                  │
│                                                                 │
│  미팅 후:                                                        │
│  ├─ 확정 리마인더 [ON ●] - 알림 시점: [1시간 후 ▼]              │
│  └─ 액션 아이템 리마인더 [ON ●]                                  │
│                                                                 │
├─────────────────────────────────────────────────────────────────┤
│  방해 금지 시간:                                                 │
│                                                                 │
│  🌙 [OFF ○]  22:00 - 08:00                                      │
│  "이 시간에는 알림을 보내지 않아요"                               │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

**Part 5.2 Edge Cases**

```yaml
# 통합 관련 Edge Cases
integration_edge_cases:
  연결_실패:
    조건: "OAuth 인증 실패 또는 권한 거부"
    화면: "연결 실패 - [다시 시도] [문제 해결 가이드]"
    재시도: "3회까지 자동 재시도, 이후 수동"

  연결_해제_확인:
    조건: "사용자가 연결 해제 요청"
    화면: "⚠️ 연결을 해제하면 자동 저장이 중단됩니다. [취소] [해제]"
    데이터: "기존 연동 데이터는 유지, 새 데이터만 저장 안됨"

  Notion_워크스페이스_변경:
    조건: "다른 워크스페이스로 변경"
    화면: "새 워크스페이스로 변경하면 이전 저장 위치 설정이 초기화됩니다"
    동작: "기존 데이터는 유지, 새 저장 위치 선택 필요"

  Calendar_권한_취소:
    조건: "Google 계정에서 Onno 권한 직접 취소"
    화면: "캘린더 연결이 해제되었어요. [다시 연결]"
    감지: "API 호출 실패 시 자동 감지"

  다중_Calendar_시도:
    조건: "여러 캘린더 계정 연결 시도"
    MVP: "1개만 허용"
    화면: "기존 캘린더를 해제하고 새로 연결하시겠어요?"

# 알림 관련 Edge Cases
notification_edge_cases:
  모든_알림_OFF:
    조건: "사용자가 모든 알림 끄기"
    경고: "⚠️ 중요한 인사이트를 놓칠 수 있어요"
    허용: "OK, 알겠어요" 버튼으로 확인 후 적용

  알림_과다_감지:
    조건: "알림 무시율 > 50%"
    제안: "알림이 많은 것 같아요. 줄여볼까요? [조절하기]"
    자동: "보통 → 적음으로 자동 제안"

# 계정 관련 Edge Cases
account_edge_cases:
  계정_삭제_요청:
    조건: "사용자가 데이터 삭제 요청"
    화면: "정말 모든 데이터를 삭제하시겠어요? 이 작업은 되돌릴 수 없습니다."
    확인: "이메일 확인 후 72시간 내 완료"
    법적: "GDPR/CCPA 준수"

  무료_사용자_Pro_설정:
    조건: "무료 플랜에서 Pro 전용 설정 접근"
    화면: "Pro 플랜에서 사용 가능 [업그레이드]"
    디자인: "설정은 보이되 비활성화 상태"

  비밀번호_변경_실패:
    조건: "현재 비밀번호 불일치"
    화면: "현재 비밀번호가 일치하지 않아요"
    보안: "5회 실패 시 10분 잠금"
```

**Part 5.2 상태 머신**

```
┌─────────────────────────────────────────────────────────────────┐
│                  Part 5.2: 설정 상태 머신                        │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  States:                                                        │
│  ├─ main: 메인 설정 화면                                         │
│  ├─ category: 카테고리 상세 (통합, 알림 등)                       │
│  ├─ editing: 설정 변경 중                                        │
│  ├─ saving: 저장 중                                              │
│  ├─ oauth: OAuth 진행 중                                         │
│  └─ confirming: 위험 작업 확인 중                                 │
│                                                                 │
│  Transitions:                                                   │
│                                                                 │
│       ┌────────────────────────────────────────────────┐        │
│       │                     main                       │        │
│       │  ├─ CATEGORY_TAP → category                    │        │
│       │  ├─ PROFILE_TAP → editing                      │        │
│       │  ├─ LOGOUT → confirming                        │        │
│       │  └─ SEARCH → main (검색 결과로 스크롤)          │        │
│       └────────────────────────────────────────────────┘        │
│                              ↓                                  │
│       ┌────────────────────────────────────────────────┐        │
│       │                   category                     │        │
│       │  ├─ BACK → main                                │        │
│       │  ├─ EDIT → editing                             │        │
│       │  ├─ CONNECT → oauth                            │        │
│       │  └─ DISCONNECT → confirming                    │        │
│       └────────────────────────────────────────────────┘        │
│                              ↓                                  │
│       ┌────────────────────────────────────────────────┐        │
│       │                   editing                      │        │
│       │  ├─ SAVE → saving                              │        │
│       │  ├─ CANCEL → category                          │        │
│       │  └─ VALIDATE_ERROR → editing                   │        │
│       └────────────────────────────────────────────────┘        │
│                              ↓                                  │
│       ┌────────────────────────────────────────────────┐        │
│       │                   saving                       │        │
│       │  ├─ SUCCESS → category (toast: "저장됨")       │        │
│       │  └─ ERROR → editing (toast: "저장 실패")       │        │
│       └────────────────────────────────────────────────┘        │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

**Part 5.2 핵심 성과 지표**

```typescript
const part52Metrics = {
  // 사용 패턴 (낮을수록 좋음 - 기본값이 적절하다는 의미)
  settingsEntryRate: '< 10%',         // DAU 중 설정 진입 비율
  avgSettingsTime: '< 60초',          // 평균 설정 체류 시간
  settingsSearchRate: '< 20%',        // 설정 내 검색 사용률

  // 통합 연결
  notionConnectionRate: '> 70%',      // Notion 연결 유저 비율
  calendarConnectionRate: '> 50%',    // Calendar 연결 유저 비율
  integrationSuccessRate: '> 90%',    // 연결 시도 → 성공률
  integrationChurnRate: '< 5%',       // 통합 해제율

  // 알림
  notificationOnRate: '> 80%',        // 알림 ON 유지율
  frequencyChangeRate: '< 30%',       // 빈도 변경률 (낮으면 기본값 적절)
  dndUsageRate: '측정만',              // 방해 금지 사용률

  // 계정
  twoFactorRate: '> 20%',             // 2FA 활성화율
  accountDeleteRate: '< 1%'           // 계정 삭제 요청률
};
```

---

## 5. 자동화 전략: AI가 95%, 사용자 5%

### 5.1 자동화 레벨 정의

```
┌─────────────────────────────────────────────────┐
│          자동화 레벨 스펙트럼                     │
└─────────────────────────────────────────────────┘

Level 0: 수동 (사용자가 전부)
├─ 예: Google Docs
└─ 사용자가 회의록 직접 작성

Level 1: 보조 (사용자 작업 + AI 제안)
├─ 예: Grammarly
└─ 사용자가 쓰면 AI가 교정 제안

Level 2: 반자동 (AI 초안 + 사용자 편집)
├─ 예: Otter.ai
└─ AI가 전사, 사용자가 편집

Level 3: 자동 (AI 전부 + 사용자 확인만) ← Onno 목표
├─ 예: Onno
└─ AI가 결정 추출, 사용자 확인만

Level 4: 완전 자동 (사용자 개입 0)
├─ 예: Tesla Autopilot
└─ 위험, 사용자 신뢰 어려움
```

### 5.2 Onno의 자동화 전략 (Level 3)

```
┌──────────────────────────────────────┐
│    AI가 하는 일 (95%)                 │
└──────────────────────────────────────┘

회의 전:
✅ 과거 미팅 분석
✅ 미확인 항목 추출
✅ 질문 자동 생성
✅ 준비 사항 정리

회의 중:
✅ 실시간 전사
✅ 인사이트 추출 (숫자, 지표)
✅ 결정 8요소 추적
✅ 갭 감지 알고리즘
✅ 타이밍 판단 (언제 알릴지)
✅ 제안 생성 (질문, 경고)

회의 후:
✅ 결정 사항 추출
✅ 액션 아이템 생성
✅ 담당자 자동 인식
✅ 기한 추론 ("다음 주" → 날짜)
✅ 통합 도구 자동 반영
✅ 다음 미팅 준비

┌──────────────────────────────────────┐
│    사용자가 하는 일 (5%)              │
└──────────────────────────────────────┘

회의 전:
✅ 준비 사항 읽기 (30초)
✅ [준비 완료] 클릭

회의 중:
✅ 제안 보고 선택 ([물어보기] or [무시])

회의 후:
✅ AI 추출 내용 확인
✅ 빈칸 채우기 (담당자, 기한)
✅ [확정] 클릭

총 시간:
회의 전 1분 + 회의 후 5분 = 6분
```

### 5.3 자동화 우선순위

```
반드시 자동화 (사용자에게 절대 안 물어봄):
├─ 회의 시작/종료 감지
├─ 전사 및 인사이트 추출
├─ 결정 8요소 추적
├─ 과거 맥락 연결
├─ 우선순위 정렬
├─ 통합 도구 반영
└─ 검색 결과 정렬

선택적 자동화 (AI 확신도에 따라):
├─ AI 95% 확신 → 자동 처리
├─ AI 50-95% → 제안으로 표시
└─ AI 50% 미만 → 사용자에게 물어봄

절대 자동화 안 함 (사용자만 알 수 있음):
├─ 담당자 지정 (빈칸)
├─ 기한 확정 (빈칸)
├─ 최종 확정 (체크)
└─ 민감한 결정 (승인)
```

---

## 6. 인터랙션 디자인: Zero-UI

### 6.1 Zero-UI 개념

> "최고의 UI는 UI가 없는 것"

**정의:**
사용자가 버튼 누르거나 설정하지 않아도
시스템이 상황을 파악해서 알아서 동작

### 6.2 Zero-UI 적용 사례

#### 사례 1: 회의 시작 감지 (자동)

```
기존 (UI 있음):
┌────────────────────┐
│ Onno 앱 열기       │
│ [회의 시작] 클릭   │
│ 설정 확인          │
└────────────────────┘
사용자 액션: 3개

Onno (Zero-UI):
[사용자가 Zoom 열면]
    ↓
시스템 자동 감지:
├─ Zoom 앱 실행됨
├─ 캘린더 확인: 10:00 A사 미팅
├─ 미팅 매칭 성공
└─ HUD 자동 실행

사용자 액션: 0개
사용자: "오, 자동으로 켜졌네?"
```

#### 사례 2: 회의 종료 감지 (자동)

```
기존:
사용자가 [종료] 버튼 클릭

Onno:
시스템 자동 감지:
├─ 말이 1분 이상 없음
├─ Zoom 종료됨
└─ 회의 종료 판단
    ↓
자동 동작:
├─ "오늘" 화면 새 탭 열림
├─ 확정 화면 표시
└─ 사용자는 그냥 확인만
```

#### 사례 3: 액션 아이템 자동 생성

```
회의 중 대화:
김대표: "다음 주 금요일까지 재무 자료 보내드릴게요"

AI 자동 처리:
✅ 액션 아이템 생성
   └─ "재무 자료 제출"
✅ 담당자: 김대표 (발화자)
✅ 기한: 2025-01-10 (다음 주 금요일)
✅ 관련 회사: A사
✅ 캘린더 리마인더: 2025-01-09 (하루 전)

사용자:
회의 후 확정 화면에서
→ 체크박스만 확인
→ [확정] 클릭
```

#### 사례 4: 통합 도구 자동 반영

```
사용자가 [확정] 클릭
    ↓
시스템 자동 실행 (백그라운드):

1초 후:
├─ Notion API 호출
└─ 회의록 페이지 생성
    "A사 2차 미팅 (2025.12.29)"

2초 후:
├─ Salesforce API 호출
└─ 딜 단계 업데이트
    "Discovery" → "Due Diligence"

3초 후:
├─ Slack Webhook 호출
└─ #sales 채널 메시지
    "A사 DD 진행 합의됨 (민수)"

5초 후:
├─ Google Calendar API
└─ 리마인더 추가
    "재무 자료 제출 확인 (1/9)"

사용자:
[확정] 클릭 후 화면만 봄
→ "✓ Notion 반영됨"
→ "✓ Salesforce 업데이트됨"
→ "✓ Slack 공유됨"

직접 한 일: 없음
```

#### 사례 5: 다음 미팅 맥락 자동 연결

```
2주 후 A사 3차 미팅

사용자가 [준비하기] 클릭
    ↓
AI 자동 분석:
├─ 과거 A사 미팅 2건 로드
├─ 미확인 항목 추출:
│   ├─ 2차: "경쟁사 대응 전략"
│   └─ 1차: "팀 채용 계획"
├─ 김대표 약속 확인:
│   └─ "재무 자료 제출" (1/10)
│       → 상태: ✓ 완료 (1/9 수신)
└─ 질문 자동 생성:
    ├─ "경쟁사 대응 전략은?"
    └─ "채용 계획 진행 상황은?"

사용자:
30초 읽고 → [준비 완료]
```

### 6.3 Zero-UI 구현 요구사항

```
기술 요구사항:

1. 컨텍스트 인식
   ├─ 앱 실행 감지 (Zoom, Meet, Teams)
   ├─ 캘린더 연동 (Google, Outlook)
   └─ 시스템 이벤트 리스닝

2. 자연어 이해 (NLU)
   ├─ "다음 주 금요일" → 날짜 파싱
   ├─ "김대표" → 사람 엔티티 인식
   └─ "보내드릴게요" → 액션 인텐트

3. 자동 통합
   ├─ API 자동 호출
   ├─ 에러 처리 (재시도, 폴백)
   └─ 상태 동기화

4. 예측 모델
   ├─ 회의 종료 시점 예측
   ├─ 갭 감지 타이밍
   └─ 사용자 의도 추론
```

---

## 7. 사용자 플로우: 전체 여정

### 7.0 최초 온보딩 플로우 (설치 시뮬레이션)

```
┌─────────────────────────────────────────────────┐
│    첫 사용자 경험: "Aha Moment" 3분 이내 달성    │
└─────────────────────────────────────────────────┘

LinkedIn 광고 클릭
├─ 랜딩 페이지 도착 (https://onno.ai)
├─ 45초 데모 영상 시청
├─ [지금 바로 체험하기] 버튼 클릭 ← Spark Trigger
└─ 설치 시뮬레이션 모달 등장

설치 시뮬레이션 (3단계, 약 10초):
├─ 1단계: 브라우저 선택 (자동 감지) ← Ability 극대화
├─ 2단계: 설치 진행 (프로그레스바 2.5초)
└─ 3단계: 설치 완료 안내

[Onno 시작하기] 클릭
├─ 환영 화면 (2초 로딩)
├─ 메인 프로덕트 체험 페이지로 이동 (/app/onboarding)
└─ "오늘" 화면 도착

"오늘" 화면 (20초):
├─ 💡 "잠깐만요, 민수님!" ← Nudge (개인화)
├─ 🔥 "지금 바로 처리 1건" ← Scarcity (긴급성)
├─ 미팅 카드: "35분 후, A사 2차 검토" ← Hope (결과 예고)
└─ [준비하기] 클릭

준비 모달 (30초):
├─ "35분 후, 완벽하게 준비된 당신 🎯" ← Motivation
├─ ✓ 체크박스 2개 (김대표 CAC, 경쟁사 비교)
├─ "왜 중요한가요?" 설명 ← Learning Investment
└─ [준비 완료, 미팅 시작하기] 클릭

미팅 시뮬레이션 (90초):
├─ 0~23초: 실시간 전사 자동 업데이트
├─ 35초: 💡 인사이트 1개 등장 (MAU 10만)
├─ ⭐ 45초: Level 2 알림 등장 ← **Aha Moment!**
│   "놓치면 안 되는 질문이 있어요"
│   → [지금 물어볼게요] 클릭 ← Flow State
├─ 48초: 질문이 전사에 자동 추가
└─ 90초: 미팅 종료

확정 모달 (20초) - Part 1.4: Notion 통합:
├─ AI가 자동 정리한 내용 (결정, 액션, 인사이트)
├─ 💾 저장 옵션 섹션:
│   ├─ ☑ Notion에 저장하기 체크박스 ← Default Effect
│   ├─ 미연결 시: [🔗 Notion 연결하기] 버튼 표시
│   │   └─ "30초면 연결 완료!" 마이크로카피
│   └─ 연결됨 시: ✅ Notion 연결됨 (워크스페이스명)
└─ [확정하고 저장하기] 클릭

Notion 연결 플로우 (체험 중 최초 1회):
├─ [Notion 연결하기] 클릭 → OAuth 팝업
├─ 사용자 승인 → 연결 완료 (2초)
├─ 체크박스 상태 자동 업데이트
└─ Edge Cases:
    ├─ OAuth 거부 → 체크박스 해제, "나중에 설정에서 연결" 메시지
    └─ 연결 실패 → [다시 시도] 버튼, 3회 실패 시 skip

저장 완료 (10초):
├─ 🎉 폭죽 애니메이션 ← Delight
├─ ✅ Notion에 저장됨 표시 (연결된 경우)
├─ "모든 팀원이 볼 수 있게 저장했어요" ← Social Value
└─ [Notion에서 보기] [다음 미팅 준비하기] ["오늘" 화면으로]

가입 유도 모달 (Part 1.3: 회원가입, 15초):
├─ 타이밍: 저장 완료 메시지 1.5초 후 등장 ← Hot Trigger
├─ "🎉 체험이 마음에 드셨나요?"
├─ "방금 경험한 AI 어시스턴트, 실제 미팅에서도 함께하세요"
├─ 혜택 강조:
│   ✅ 14일 무료 체험 (카드등록 불필요) ← Zero Risk
│   ✅ 언제든 취소 가능 ← Fear 제거
│   ✅ 체험 데이터 자동 이관 ← Endowment Effect
├─ 소셜 프루프: "3,500명의 투자심사역이 Onno와 함께합니다" ← Social Proof
├─ CTA 버튼 (우선순위):
│   1순위: [🚀 구글 계정으로 1초 만에 시작하기] ← Default, 가장 큼
│   2순위: [GitHub 계정] [이메일로 가입] ← 작은 버튼
│   3순위: [나중에] ← 텍스트 링크, 회색
└─ 행동:
    ├─ 구글 클릭 → OAuth 팝업 → 환영 화면 (2초) → "오늘" 화면
    ├─ 이메일 클릭 → 간소화 폼 (이메일+비밀번호만) → "오늘" 화면
    └─ 나중에 클릭 → 확인 모달 ("7일 후 체험 데이터 삭제") → 랜딩 복귀

총 소요 시간: 약 3분 30초
Time to Aha Moment: 약 1분 45초

행동 심리 설계 요소:
├─ Fogg Model (B=MAT): 모든 단계에 동기+능력+트리거 배치
├─ Flow Theory: 점진적 난이도 (Low→Medium→High)
├─ Nudge: Default, Scarcity, Social Proof 활용
└─ Investment: Learning, Data, Identity 투자 요소

주의사항:
- 실제 파일 다운로드 없음
- 실제 브라우저 확장 설치 없음
- 모달을 통한 설치 과정 "간접 경험"
- 메인 프로덕트는 웹 기반으로 체험
- 체험 데이터는 7일간 보관 후 자동 삭제
```

### 7.1 일주일 여정 맵

```
┌─────────────────────────────────────────────────┐
│        민수 (투자심사역)의 1주일                  │
└─────────────────────────────────────────────────┘

월요일 아침 9:00
├─ Onno 앱 열기
├─ "오늘" 화면: "지금 바로 처리 2건"
├─ 3분 처리 → 완료
└─ 오늘 미팅 3건 확인

월요일 10:00 - A사 1차 미팅
├─ Zoom 열면 HUD 자동 실행
├─ [35분] 💡 "팀 구성 확인 필요" 알림
├─ → [물어보기] 클릭 → 질문함
├─ [58분] 자동 정리 모드
└─ 회의 종료 → 확정 화면 (5분)

월요일 오후
├─ 다른 미팅 2건 동일 패턴
└─ 퇴근 전 "오늘" 확인: 모두 처리됨 ✓

화요일 - 목요일
└─ 동일 패턴 반복

금요일 오전 - A사 2차 미팅
├─ [준비하기]: "1차 미확인 항목 2개"
├─ 2분 준비 → [준비 완료]
├─ 미팅 중: 준비한 질문 자동 나옴
├─ [37분] 💡 "리스크 논의 누락" 알림
├─ → [물어보기] → "공동창업자 이슈?"
└─ 회의 후: DD 진행 합의 확정

주말
├─ 월요일 A사 3차 준비
└─ 검색: "A사 리스크" → 과거 내용 찾음

총 Onno 사용 시간 (주간):
├─ 회의 전 준비: 10분 (5일 × 2분)
├─ 회의 후 확정: 25분 (5일 × 5분)
└─ 합계: 35분

절약 시간 (추정):
├─ 회의록 작성: 150분 (5일 × 30분)
├─ 과거 내용 찾기: 50분
├─ 다음 미팅 준비: 100분
└─ 합계: 300분 = 5시간

ROI: 35분 투자 → 5시간 절약 (8.5배)
```

### 7.2 단일 미팅 플로우 (상세)

```
┌─────────────────────────────────────────────────┐
│        A사 2차 미팅 플로우 (60분)                 │
└─────────────────────────────────────────────────┘

[10분 전] 알림
├─ 푸시: "10분 후 A사 미팅"
├─ [준비하기] 클릭
└─ 2분 준비

[0분] 회의 시작
├─ Zoom 열림
├─ HUD 자동 실행 (최소화)
└─ 사용자: 회의 집중

[1-30분] 대화 청취
├─ HUD 상태: 대기 (배지만)
├─ 시스템: 실시간 전사, 추적
└─ 사용자: 회의 집중

[35분] 갭 감지
├─ AI: "CAC 미확인, 중요도 높음"
├─ HUD: 자동 확장 (Level 2)
├─ 💡 "CAC는 채널별로?"
├─ 사용자: [물어보기] 클릭
└─ 김대표: "온라인 $85, 오프라인 $120"

[37분] 다시 대기
└─ HUD: 자동 축소

[40-55분] 계속 청취
└─ 인사이트 자동 추출

[58분] 종료 임박
├─ HUD: 자동 정리 모드
├─ 📝 "미확인: 리스크, 경쟁 전략"
├─ 사용자: 확인만
└─ 회의 계속 진행

[60분] 회의 종료
├─ Zoom 종료
├─ "오늘" 화면 자동 열림
└─ 확정 화면 표시

[60분 30초] 확정 시작
├─ AI 추출 내용 확인 (30초)
├─ 빈칸 채우기:
│   ├─ 담당자: [김대표] 선택
│   └─ 기한: [1/10] 선택
└─ [확정] 클릭 (65분)

[65분] 자동 반영
├─ Notion 페이지 생성 (1초)
├─ Salesforce 업데이트 (2초)
├─ Slack 공유 (3초)
└─ 완료 ✓

총 소요:
├─ 회의: 60분
├─ 회의 전 준비: 2분
├─ 회의 후 확정: 5분
└─ 합계: 67분

기존 방식:
├─ 회의: 60분
├─ 회의록 작성: 30분
├─ 다음 미팅 준비: 20분
└─ 합계: 110분

절약: 43분 (39%)
```

---

## 8. 기술 구현 요구사항

### 8.1 프론트엔드 아키텍처

```
┌─────────────────────────────────────────┐
│         프론트엔드 구조                   │
└─────────────────────────────────────────┘

1. 브라우저 확장 (MVP)
   ├─ Manifest V3
   ├─ React 18
   ├─ TailwindCSS
   └─ Zustand (상태관리)

2. 3개 화면 컴포넌트
   ├─ NowScreen (회의 중)
   │   ├─ HUD Component
   │   ├─ AlertCard Component
   │   └─ MinimizedBadge Component
   │
   ├─ TodayScreen (오늘)
   │   ├─ PriorityList Component
   │   ├─ MeetingCard Component
   │   └─ PrepScreen Component
   │
   └─ SearchScreen (검색)
       ├─ SearchBar Component
       ├─ ResultList Component
       └─ DetailView Component

3. 공통 컴포넌트
   ├─ Navigation (3개 탭)
   ├─ Toast (알림)
   └─ Modal (팝업)
```

### 8.2 백엔드 아키텍처

```
┌─────────────────────────────────────────┐
│         백엔드 구조                       │
└─────────────────────────────────────────┘

1. API 서버 (Next.js 14)
   ├─ /api/meetings/*
   ├─ /api/decisions/*
   ├─ /api/search/*
   └─ /api/integrations/*

2. 실시간 처리 파이프라인
   ┌──────────┐
   │ 오디오    │
   └────┬─────┘
        ↓
   ┌──────────┐
   │ STT      │ ← Deepgram or Whisper
   └────┬─────┘
        ↓
   ┌──────────┐
   │ 전사      │ ← 실시간 스트림
   └────┬─────┘
        ↓
   ┌──────────┐
   │ AI 분석   │ ← GPT-4 or Claude
   └────┬─────┘
        ├─→ 인사이트 추출
        ├─→ 결정 8요소 추적
        ├─→ 갭 감지
        └─→ 제안 생성
        ↓
   ┌──────────┐
   │ HUD 업데이트│ ← WebSocket
   └──────────┘

3. 데이터베이스
   ├─ Supabase PostgreSQL
   │   ├─ meetings 테이블
   │   ├─ decisions 테이블
   │   ├─ actions 테이블
   │   └─ insights 테이블
   │
   └─ Pinecone (벡터 DB)
       └─ 시맨틱 검색용

4. 통합 서비스
   ├─ Notion API
   ├─ Salesforce API
   ├─ Slack Webhook
   └─ Google Calendar API
```

### 8.3 AI/ML 파이프라인

```
┌─────────────────────────────────────────┐
│         AI 처리 흐름                      │
└─────────────────────────────────────────┘

1. 실시간 전사
   Input: 오디오 스트림
   Model: Deepgram Nova-2
   Output: 텍스트 (1초 지연)

2. 인사이트 추출
   Input: 전사 텍스트
   Model: GPT-4 Turbo (fine-tuned)
   Prompt: "숫자, 지표, 클레임 추출"
   Output: JSON 구조화 데이터

3. 결정 8요소 추적
   Input: 누적 전사
   Model: Claude 3.5 Sonnet
   Prompt: "Goal, Evidence, Risk 등 추적"
   Output: 8요소 상태 (✅⚠️❌)

4. 갭 감지 알고리즘
   Input: 8요소 상태 + 시간 + 대화 흐름
   Logic:
   ├─ If (Risk ❌ && time > 30min)
   ├─    && (topic_relevant)
   ├─    && (confidence > 0.85)
   └─ Then: Trigger Alert (Level 2)

5. 질문 생성
   Input: 갭 유형 + 과거 맥락
   Model: GPT-4 Turbo
   Prompt: "자연스러운 질문 생성"
   Output: "CAC는 채널별로 어떻게 되나요?"

6. 검색 임베딩
   Input: 검색 쿼리
   Model: text-embedding-3-small
   Output: 768차원 벡터
   → Pinecone 검색
```

### 8.4 성능 요구사항

```
┌─────────────────────────────────────────┐
│         성능 지표                         │
└─────────────────────────────────────────┘

실시간 처리:
├─ STT 지연: < 1초
├─ AI 추론: < 2초
├─ HUD 업데이트: < 200ms
└─ 총 레이턴시: < 3초

정확도:
├─ 전사 정확도: > 95%
├─ 결정 요소 추출: > 80%
├─ 갭 감지 정확도: > 75%
├─ 오탐률: < 20%
└─ 검색 정확도: > 85%

안정성:
├─ 가동률: > 99.5%
├─ 에러율: < 0.5%
└─ 데이터 손실: 0%

확장성:
├─ 동시 미팅: 1,000개
├─ 사용자: 10,000명
└─ 검색 QPS: 100
```

---

## 9. 성공 지표 및 검증

### 9.1 북극성 지표 (North Star Metric)

```
┌─────────────────────────────────────────┐
│     북극성 지표: 주간 활성 미팅 수        │
└─────────────────────────────────────────┘

정의:
"Onno와 함께 진행한 미팅 수 (주간)"

왜 이 지표?
├─ 사용 빈도 반영 (습관화)
├─ 가치 제공 횟수 (누적)
└─ 유지율 선행 지표

목표:
├─ MVP (3개월): 주 3회/유저
├─ V2 (6개월): 주 5회/유저
└─ V3 (12개월): 주 7회/유저
```

### 9.2 핵심 지표 (Key Metrics)

```
┌─────────────────────────────────────────┐
│         사용자 획득 (Acquisition)         │
└─────────────────────────────────────────┘

├─ 신규 가입: 주 50명 (MVP)
├─ 활성화율: > 60% (첫 미팅 완료)
└─ 설치→첫미팅: < 10분

┌─────────────────────────────────────────┐
│         참여도 (Engagement)               │
└─────────────────────────────────────────┘

├─ DAU/MAU: > 40% (주 2-3회 사용)
├─ 미팅당 HUD 상호작용: > 2회
├─ 제안 채택률: > 60%
└─ 회의 후 확정 완료율: > 80%

┌─────────────────────────────────────────┐
│         유지율 (Retention)                │
└─────────────────────────────────────────┘

├─ W1 유지율: > 70%
├─ W4 유지율: > 50%
├─ W12 유지율: > 40%
└─ 이탈 시점: W2 (집중 모니터링)

┌─────────────────────────────────────────┐
│         만족도 (Satisfaction)             │
└─────────────────────────────────────────┘

├─ NPS: > 50 (MVP), > 60 (V2)
├─ 별점: > 4.5/5.0
├─ "없으면 불편" 답변: > 60%
└─ 추천 의향: > 70%

┌─────────────────────────────────────────┐
│         비즈니스 영향 (Impact)            │
└─────────────────────────────────────────┘

├─ 회의 시간 단축: -20%
├─ 재회의율 감소: -30%
├─ 결정 완결성 점수: > 80/100
└─ 사용자 시간 절약: 주 3시간
```

### 9.3 검증 계획

```
┌─────────────────────────────────────────┐
│         MVP 검증 (0-3개월)                │
└─────────────────────────────────────────┘

Week 1-4: 알파 테스트 (5명)
├─ 목표: 치명적 버그 제거
├─ 방법: 내부 팀 사용
└─ 성공 기준: 크래시 0건

Week 5-8: 베타 테스트 (30명)
├─ 목표: 핵심 가치 검증
├─ 방법: 초대제 파일럿
├─ 성공 기준:
│   ├─ W1 유지율 > 70%
│   ├─ NPS > 40
│   └─ "없으면 불편" > 50%

Week 9-12: 확장 (100명)
├─ 목표: 확장성 검증
├─ 방법: 대기자 순차 오픈
└─ 성공 기준:
    ├─ DAU/MAU > 30%
    ├─ 제안 채택률 > 50%
    └─ 확정 완료율 > 70%

검증 방법:
├─ 정량: PostHog 이벤트 트래킹
├─ 정성: 주간 인터뷰 (5명)
└─ 피드백: In-app 서베이
```

### 9.4 실패 시나리오 및 대응

```
┌─────────────────────────────────────────┐
│         리스크 매트릭스                   │
└─────────────────────────────────────────┘

Risk 1: 정확도 낮음 (갭 감지 < 60%)
├─ 영향: 치명적 (신뢰 붕괴)
├─ 대응:
│   ├─ 즉시 수동 모드 제공
│   ├─ 파인튜닝 긴급 진행
│   └─ 사용자 피드백 루프

Risk 2: 너무 방해됨 (오탐 > 30%)
├─ 영향: 높음 (사용자 이탈)
├─ 대응:
│   ├─ 알림 threshold 상향
│   ├─ Level 1만 활성화
│   └─ 무시 학습 강화

Risk 3: 복잡하다 (활성화율 < 40%)
├─ 영향: 중간 (성장 둔화)
├─ 대응:
│   ├─ 온보딩 재설계
│   ├─ 데모 영상 제작
│   └─ 1:1 온보딩 제공

Risk 4: 느림 (레이턴시 > 5초)
├─ 영향: 중간 (UX 저하)
├─ 대응:
│   ├─ 인프라 스케일업
│   ├─ 캐싱 강화
│   └─ 모델 경량화
```

---

## 부록 A: 사용자 테스트 스크립트

```
┌─────────────────────────────────────────┐
│         초기 사용자 인터뷰 (30분)         │
└─────────────────────────────────────────┘

도입 (5분):
├─ 자기소개
├─ 현재 회의 패턴 (주 몇 회?)
└─ 회의 후 어떻게 정리하나?

Onno 사용 (15분):
├─ [준비하기] 시연
├─ 모의 회의 진행 (AI 상대)
└─ [확정] 완료까지

피드백 (10분):
├─ "첫인상은?"
├─ "가장 좋았던 점?"
├─ "가장 불편했던 점?"
├─ "없으면 불편할 것 같나?"
└─ "동료에게 추천?"

마무리:
└─ 지속 사용 의향 확인
```

---

## 부록 B: 디자인 시스템

```
┌─────────────────────────────────────────┐
│         색상 팔레트 (3가지만)             │
└─────────────────────────────────────────┘

🔴 빨강 (긴급):
├─ Primary: #EF4444
└─ 용도: 치명적 알림, 긴급 액션

🟡 노랑 (주의):
├─ Primary: #F59E0B
└─ 용도: 경고, 확인 필요

🟢 초록 (정상):
├─ Primary: #10B981
└─ 용도: 완료, 정상 상태

회색 (중립):
├─ 900: #111827 (텍스트)
├─ 500: #6B7280 (보조 텍스트)
└─ 100: #F3F4F6 (배경)

┌─────────────────────────────────────────┐
│         타이포그래피 (2가지 크기)         │
└─────────────────────────────────────────┘

큰 글씨 (20px):
└─ 핵심 메시지, 제목

작은 글씨 (14px):
└─ 본문, 부가 설명

폰트:
├─ Sans-serif: Inter
└─ Monospace: Fira Code (코드용)

┌─────────────────────────────────────────┐
│         간격 (4의 배수)                   │
└─────────────────────────────────────────┘

├─ 4px: 최소 간격
├─ 8px: 요소 내부
├─ 16px: 요소 간
├─ 24px: 섹션 간
└─ 32px: 화면 여백
```

---

## 부록 C: 행동심리 기반 온보딩 설계

### C.1 5-Layer Framework 적용

**첫 사용자 경험을 위한 5개 레이어:**

```
Layer 1: Strategy & JTBD (전략 및 본질)
├─ Functional Job: 회의 중 갭 감지 + 회의 후 자동 요약
├─ Emotional Job: 불안감 해소, 똑똑해 보이고 싶음
└─ Social Job: 팀에 신뢰받는 전문가로 인식

Layer 2: Behavioral Design (행동 설계)
├─ Fogg Model: B = MAT (동기 × 능력 × 트리거)
├─ Flow Theory: 점진적 복잡도 (Low → Medium → High)
└─ Nudge: Default, Scarcity, Social Proof

Layer 3: Structure & Logic (구조 및 논리)
├─ User Flow: Happy Path + Edge Cases
├─ Information Architecture: 인지 부하 최소화
└─ Policy: 데이터 보관, 개인정보, A/B 테스트

Layer 4: UI & Interaction (인터페이스)
├─ Visual Hierarchy: F-Pattern 기반
├─ Atomic Design: Atoms → Molecules → Organisms
└─ Micro-interaction: 즐거움 제공

Layer 5: Data & Growth (성장)
├─ Event Logging: 모든 상호작용 추적
├─ A/B Testing: 가설 검증
└─ Cohort Analysis: 사용자 세그먼트 분석
```

### C.2 Fogg Behavior Model (B=MAT)

| 요소 | 설계 방법 | 구체적 예시 |
|------|----------|------------|
| **Motivation (동기)** | Hope: 결과 기대 / Fear: 손실 회피 | "35분 후, 완벽하게 준비된 당신", "카드등록 불필요" |
| **Ability (능력)** | Zero Input + Clear CTA | "구글 계정으로 1초 만에 시작하기" |
| **Trigger (트리거)** | Hot: 즉시 행동 가능 / Contextual: 맥락적 | 긍정 감정 최고조 3.5초 후 가입 모달 |

### C.3 Nudge Techniques (넛지 기법)

```
1. Default Effect (기본값 효과):
   ├─ 구글 로그인 버튼 가장 크고 눈에 띄게
   ├─ Notion, Slack 체크박스 기본 선택
   └─ 가장 쉬운 경로가 기본 경로

2. Scarcity (희소성):
   ├─ "14일 무료 체험"
   ├─ "7일 후 체험 데이터 삭제"
   └─ 시간 제한 → 긴박감 → 즉각 행동

3. Social Proof (사회적 증거):
   ├─ "3,500명의 투자심사역이 Onno와 함께합니다"
   ├─ 구체적 숫자 + 구체적 직군
   └─ FOMO (Fear of Missing Out) 활용

4. Endowment Effect (소유 효과):
   ├─ 데모 데이터가 "내 것"처럼 느껴지게
   ├─ 체험 데이터 7일 보관
   └─ 가입 시 자동 이관 → 잃기 싫음
```

### C.4 Investment (이탈 방지)

| 투자 유형 | 구현 방법 | 효과 |
|----------|----------|------|
| **Data Investment** | 체험 데이터 7일 보관 → 가입 시 복원 | 다시 돌아올 이유 제공 |
| **Learning Investment** | "왜 이 질문이 중요한지" 1줄 설명 | 학습한 내용 잃고 싶지 않음 |
| **Identity Investment** | "민수님의 미팅 스타일: 분석형" 진단 | 자아 정체성 형성 |

---

## 부록 D: 이벤트 로깅 구조

### D.1 데모 체험 이벤트

```typescript
interface DemoEvent {
  userId: string;              // 익명 ID (쿠키)
  sessionId: string;           // 세션 ID
  timestamp: number;           // Unix timestamp
  event: DemoEventType;
  metadata?: EventMetadata;
}

type DemoEventType =
  // 진입
  | 'demo_started'
  | 'welcome_screen_shown'
  // 준비 단계
  | 'prep_modal_opened'
  | 'prep_checkbox_clicked'
  | 'prep_completed'
  | 'prep_skipped'
  // 시뮬레이션
  | 'simulation_started'
  | 'insight_shown'
  | 'alert_shown'
  | 'alert_action'
  | 'simulation_completed'
  // 확정
  | 'confirmation_modal_opened'
  | 'save_clicked'
  | 'save_completed'
  // 전환
  | 'signup_modal_shown'
  | 'signup_clicked'
  | 'demo_abandoned';
```

### D.2 회원가입 이벤트

```typescript
type SignupEventType =
  | 'signup_modal_shown'
  | 'signup_cta_clicked'
  | 'oauth_popup_opened'
  | 'oauth_authorized'
  | 'oauth_denied'
  | 'email_form_shown'
  | 'signup_completed'
  | 'demo_data_migrated'
  | 'later_clicked'
  | 'later_reconversion'
  | 'signup_abandoned';

interface SignupMetadata {
  method?: 'google' | 'github' | 'email';
  timeFromDemoEnd?: number;
  errorType?: string;
  reconversion?: boolean;
  migratedItems?: {
    meetings: number;
    decisions: number;
    insights: number;
  };
}
```

### D.3 Notion 통합 이벤트 (Part 1.4)

```typescript
type NotionIntegrationEvent =
  | 'notion_checkbox_shown'        // 확정 모달에서 체크박스 표시됨
  | 'notion_checkbox_checked'      // 체크박스 선택됨
  | 'notion_checkbox_unchecked'    // 체크박스 해제됨
  | 'notion_connect_clicked'       // [Notion 연결하기] 버튼 클릭
  | 'notion_oauth_started'         // OAuth 팝업 열림
  | 'notion_oauth_completed'       // OAuth 승인 성공
  | 'notion_oauth_denied'          // OAuth 거부됨
  | 'notion_oauth_error'           // OAuth 에러 발생
  | 'notion_save_attempted'        // Notion 저장 시도
  | 'notion_save_completed'        // Notion 저장 성공
  | 'notion_save_failed'           // Notion 저장 실패
  | 'notion_view_clicked';         // [Notion에서 보기] 클릭

interface NotionMetadata {
  isConnected: boolean;              // 연결 상태
  workspaceId?: string;              // 워크스페이스 ID
  workspaceName?: string;            // 워크스페이스 이름
  pageId?: string;                   // 생성된 페이지 ID
  errorType?: 'network' | 'auth' | 'permission' | 'unknown';
  retryCount?: number;               // 재시도 횟수
  timeToConnect?: number;            // 연결까지 소요 시간 (ms)
}

// 핵심 지표
const notionMetrics = {
  // 체크박스 선택률 (Default Effect 검증)
  checkboxRate: count(notion_checkbox_checked) / count(notion_checkbox_shown),
  // 목표: > 60%

  // 연결 전환율 (OAuth 플로우 효율성)
  connectRate: count(notion_oauth_completed) / count(notion_connect_clicked),
  // 목표: > 80%

  // 저장 성공률 (시스템 안정성)
  saveRate: count(notion_save_completed) / count(notion_save_attempted),
  // 목표: > 95%

  // 연결 후 저장률 (실제 사용)
  activationRate: count(notion_save_completed) / count(notion_oauth_completed),
  // 목표: > 90%
};
```

### D.4 미팅 준비 이벤트 (Part 1.5)

```typescript
type PrepEventType =
  // 진입
  | 'prep_reminder_pushed'      // 10분 전 알림 발송
  | 'prep_reminder_clicked'     // 알림에서 직접 클릭
  | 'prep_card_shown'           // 오늘 화면에서 카드 표시
  | 'prep_button_clicked'       // [준비하기] 클릭
  // 준비 모달
  | 'prep_modal_opened'         // 모달 열림
  | 'prep_past_expanded'        // 지난 미팅 섹션 확장
  | 'prep_unconfirmed_viewed'   // 미확인 항목 확인
  | 'prep_question_unchecked'   // AI 질문 체크 해제
  | 'prep_question_added'       // 사용자 질문 추가
  // 완료
  | 'prep_completed'            // 준비 완료 클릭
  | 'prep_skipped'              // 나중에 클릭
  | 'prep_direct_start';        // 바로 시작 클릭 (준비 건너뜀)

interface PrepMetadata {
  meetingId: string;
  companyName: string;
  meetingNumber: number;           // 해당 회사와 몇 번째 미팅
  pastMeetingCount: number;        // 과거 미팅 기록 수
  unconfirmedCount: number;        // 미확인 항목 수
  suggestedQuestionCount: number;  // AI 제안 질문 수
  userQuestionCount: number;       // 사용자 추가 질문 수
  prepTimeSeconds: number;         // 준비 소요 시간
  isQuickMode: boolean;            // 빠른 준비 모드 여부
}

// 핵심 지표
const prepMetrics = {
  // 준비율: 알림 본 사람 중 준비 완료한 비율
  prepRate: count(prep_completed) / count(prep_card_shown),
  // 목표: > 70%

  // 평균 준비 시간
  avgPrepTime: avg(prepTimeSeconds WHERE prep_completed),
  // 목표: < 120초 (2분)

  // AI 질문 채택률: AI 질문 중 체크 유지된 비율
  questionAdoptionRate: (suggested - unchecked) / suggested,
  // 목표: > 80%

  // 사용자 질문 추가율 (파워유저 지표)
  userQuestionRate: count(prep_question_added) / count(prep_completed),
  // 목표: > 15%

  // 건너뛰기율
  skipRate: count(prep_skipped + prep_direct_start) / count(prep_card_shown),
  // 목표: < 30%
};
```

### D.5 Today 화면 이벤트 (Part 2.1)

```typescript
type TodayEventType =
  | 'today_screen_viewed'       // Today 화면 진입
  | 'today_section_expanded'    // 섹션 펼침
  | 'today_section_collapsed'   // 섹션 접음
  | 'today_card_clicked'        // 카드 클릭
  | 'today_empty_state_shown'   // 빈 상태 표시
  | 'today_refresh_triggered'   // 새로고침
  | 'today_overload_shown';     // 과부하 경고 표시

interface TodayMetadata {
  urgentCount: number;         // 긴급 섹션 항목 수
  todayCount: number;          // 오늘 미팅 수
  laterCount: number;          // 나중에 항목 수
  totalUnconfirmed: number;    // 미확정 결정 총 수
  timeOfDay: 'morning' | 'afternoon' | 'evening';
  sessionDuration: number;     // 화면 체류 시간
}

// 핵심 지표
const todayMetrics = {
  // 평균 스캔 시간
  avgScanTime: avg(sessionDuration WHERE today_screen_viewed),
  // 목표: < 10초

  // 긴급 항목 처리율
  urgentClearRate: count(urgent_completed) / count(urgent_shown),
  // 목표: > 80%

  // 섹션 인터랙션율
  sectionInteractionRate: count(section_expanded) / count(today_screen_viewed),
  // 모니터링용
};
```

### D.6 미팅 카드 이벤트 (Part 2.2)

```typescript
type CardEventType =
  | 'card_viewed'              // 카드 뷰포트 진입
  | 'card_clicked'             // 카드 클릭
  | 'card_prep_clicked'        // [준비하기] 클릭
  | 'card_start_clicked'       // [바로 시작] 클릭
  | 'card_state_changed'       // 상태 전환
  | 'card_urgent_triggered'    // 긴급 상태 전환
  | 'card_pulse_shown';        // 펄스 애니메이션 표시

interface CardMetadata {
  cardId: string;
  meetingId: string;
  companyName: string;
  meetingNumber: number;
  cardState: 'pending' | 'urgent' | 'prepping' | 'ready' | 'live' | 'skipped';
  timeUntilMeeting: number;    // 분 단위
  hasUnconfirmed: boolean;
  unconfirmedCount: number;
  prepTimeEstimate: number;    // 초 단위
}

// 핵심 지표
const cardMetrics = {
  // 준비하기 클릭률
  prepClickRate: count(card_prep_clicked) / count(card_viewed),
  // 목표: > 70%

  // 건너뛰기율 (준비 없이 시작)
  skipRate: count(card_start_clicked) / count(card_viewed WHERE hasUnconfirmed),
  // 목표: < 30%

  // 평균 행동까지 시간
  avgTimeToAction: avg(timeToClick WHERE card_viewed to card_prep_clicked),
  // 목표: < 5초
};
```

### D.7 미팅 중 이벤트 (Part 3)

```typescript
// Part 3.1: 자동 시작 이벤트
type MeetingStartEventType =
  | 'meeting_auto_started'       // HUD 자동 실행 (앱 감지)
  | 'meeting_manual_started'     // 수동 시작
  | 'meeting_matched_calendar'   // 캘린더 매칭 성공
  | 'meeting_new_prompt_shown'   // 새 미팅 프롬프트 표시
  | 'meeting_new_named'          // 새 미팅 이름 입력
  | 'meeting_app_detected';      // 앱 감지 이벤트

interface MeetingStartMetadata {
  meetingId: string;
  detectedApp: 'zoom' | 'meet' | 'teams' | 'manual';
  matchConfidence: number;       // 0-1
  calendarMatched: boolean;
  prepCompleted: boolean;        // Part 2에서 준비 완료 여부
  timeToActivation: number;      // ms (앱 실행 → HUD 표시)
}

// Part 3.2: HUD Idle 이벤트
type HUDIdleEventType =
  | 'hud_idle_entered'           // Idle 상태 진입
  | 'hud_manual_expanded'        // 사용자가 클릭하여 확장
  | 'hud_manual_collapsed'       // 사용자가 닫기 클릭
  | 'hud_position_changed'       // 위치 드래그 변경
  | 'hud_opacity_changed';       // 투명도 변경 (비활성화)

interface HUDIdleMetadata {
  meetingId: string;
  elapsedTime: number;           // 미팅 경과 시간 (초)
  insightCount: number;          // 수집된 인사이트 수
  infoAlertCount: number;        // Level 1 알림 수
  expandDuration?: number;       // 확장 유지 시간 (ms)
}

// Part 3.3: 알림 이벤트
type AlertEventType =
  | 'alert_shown'                // 알림 표시
  | 'alert_ask_clicked'          // [물어보기] 클릭
  | 'alert_later_clicked'        // [나중에] 클릭
  | 'alert_risk_accepted'        // [위험 감수] 클릭 (Level 3)
  | 'alert_timeout'              // 10초 타임아웃
  | 'alert_dismissed';           // 닫기 클릭

interface AlertMetadata {
  alertId: string;
  alertLevel: 1 | 2 | 3;
  alertType: string;             // 'missing_risk', 'no_action', 'legal_issue'
  triggerConditions: string[];   // 충족된 조건들
  conversationContext: string;   // 대화 맥락 요약
  timeInMeeting: number;         // 미팅 경과 시간 (초)
  displayDuration: number;       // 표시 시간 (ms)
  responseTime?: number;         // 알림 → 응답 시간 (ms)
  suggestedQuestion: string;
}

// Part 3.4: 응답 이벤트
type ResponseEventType =
  | 'question_prompted'          // 질문 프롬프트 표시
  | 'question_copied'            // 질문 클립보드 복사
  | 'question_asked'             // 실제 질문 수행 (전사 감지)
  | 'answer_received'            // 답변 수집됨 (전사 분석)
  | 'answer_toast_shown'         // 답변 수집 토스트 표시
  | 'deferred_item_resolved';    // 연기 항목 자연 해결

interface ResponseMetadata {
  alertId: string;
  questionText: string;
  answerText?: string;
  answerConfidence?: number;     // 답변 감지 신뢰도
  wasDeferred: boolean;
  naturallyResolved: boolean;    // 자연스럽게 해결됐는지
}

// Part 3 종합: 미팅 종료 이벤트
type MeetingEndEventType =
  | 'meeting_ended'              // 미팅 종료
  | 'meeting_summary_generated'  // 요약 생성 완료
  | 'deferred_alerts_surfaced';  // 연기 알림 재표면화

interface MeetingEndMetadata {
  meetingId: string;
  duration: number;              // 총 미팅 시간 (초)
  totalAlerts: {
    level1: number;
    level2: number;
    level3: number;
  };
  alertsActioned: number;        // 물어보기 클릭 횟수
  alertsDeferred: number;        // 나중에/타임아웃 횟수
  risksAccepted: number;         // 위험 감수 횟수
  insightsCollected: number;     // 수집된 인사이트 수
  decisionsTracked: number;      // 추적된 결정 요소 수
  gapsIdentified: number;        // 감지된 갭 수
  gapsResolved: number;          // 해결된 갭 수
  deferredUnresolved: number;    // 미해결 연기 항목 수
}

// Part 3 핵심 지표
const part3MetricsCalculation = {
  autoStartRate:
    'count(meeting_auto_started) / count(meeting_auto_started + meeting_manual_started)',
  // 목표: > 90%

  matchAccuracy:
    'count(meeting_matched_calendar) / count(meeting_auto_started)',
  // 목표: > 85%

  avgIdleRatio:
    'sum(idle_time) / sum(meeting_duration)',
  // 목표: > 95%

  alertActionRate:
    'count(alert_ask_clicked) / count(alert_shown WHERE level >= 2)',
  // 목표: > 50%

  alertTimeoutRate:
    'count(alert_timeout) / count(alert_shown WHERE level >= 2)',
  // 목표: < 20%

  level3AcceptRate:
    'count(alert_risk_accepted) / count(alert_shown WHERE level = 3)',
  // 목표: < 10%

  questionAskedRate:
    'count(question_asked) / count(alert_ask_clicked)',
  // 목표: > 80%

  answerReceivedRate:
    'count(answer_received) / count(question_asked)',
  // 목표: > 90%

  gapResolutionRate:
    'count(gapsResolved) / count(gapsIdentified)',
  // 목표: > 70%

  avgResponseTime:
    'avg(responseTime WHERE alert_level >= 2)',
  // 목표: < 3초
};
```

### D.8 미팅 후 이벤트 (Part 4)

```typescript
// Part 4.1: 자동 전환 이벤트
type TransitionEventType =
  | 'meeting_ended'              // 미팅 종료 감지
  | 'meeting_end_false_positive' // 오탐 (앱 재열림)
  | 'confirmation_modal_shown'   // 확정 모달 표시
  | 'confirmation_modal_skipped' // 확정 모달 건너뜀 (짧은 미팅)
  | 'modal_auto_transition'      // 자동 전환 완료
  | 'transition_cancelled';      // 전환 취소 (X 클릭)

interface TransitionMetadata {
  meetingDuration: number;       // 미팅 시간 (초)
  triggerType: 'app_closed' | 'call_ended' | 'manual';
  transitionDelay: number;       // 전환 소요 시간 (ms)
  isShortMeeting: boolean;       // 5분 미만 여부
}

// Part 4.2: 확정 모달 이벤트
type ConfirmationEventType =
  | 'modal_viewed'               // 모달 표시됨
  | 'decision_reviewed'          // 결정 사항 확인
  | 'gap_field_focused'          // 빈칸 필드 포커스
  | 'gap_field_filled'           // 빈칸 채움
  | 'gap_field_skipped'          // 빈칸 건너뜀
  | 'insight_expanded'           // 인사이트 더 보기
  | 'insight_edited'             // 인사이트 수정
  | 'decision_added'             // 결정 사항 수동 추가
  | 'decision_deleted'           // 결정 사항 삭제
  | 'confirm_clicked'            // 확정하기 클릭
  | 'modal_abandoned'            // 모달 이탈 (X)
  | 'later_clicked';             // 나중에 처리 클릭

interface ConfirmationMetadata {
  totalGaps: number;             // 전체 빈칸 수
  filledGaps: number;            // 채운 빈칸 수
  totalDecisions: number;        // AI 추출 결정 수
  editedDecisions: number;       // 수정한 결정 수
  addedDecisions: number;        // 추가한 결정 수
  timeSpent: number;             // 모달 체류 시간 (ms)
  abandonReason?: 'x_clicked' | 'outside_click' | 'later_button';
}

// Part 4.3: 통합 저장 이벤트
type IntegrationEventType =
  | 'notion_checkbox_checked'    // Notion 저장 체크
  | 'notion_checkbox_unchecked'  // Notion 저장 체크 해제
  | 'notion_connect_clicked'     // Notion 연결하기 클릭
  | 'notion_oauth_started'       // OAuth 시작
  | 'notion_oauth_completed'     // OAuth 성공
  | 'notion_oauth_failed'        // OAuth 실패
  | 'notion_save_started'        // 저장 시작
  | 'notion_save_completed'      // 저장 성공
  | 'notion_save_failed'         // 저장 실패
  | 'notion_save_retried'        // 저장 재시도
  | 'notion_view_clicked'        // Notion에서 보기 클릭
  | 'completion_screen_shown'    // 완료 화면 표시
  | 'today_screen_returned';     // Today 복귀

interface IntegrationMetadata {
  notionConnected: boolean;      // Notion 연결 상태
  saveToNotion: boolean;         // Notion 저장 선택 여부
  workspaceId?: string;          // 워크스페이스 ID
  pageUrl?: string;              // 생성된 페이지 URL
  errorType?: 'network' | 'auth' | 'permission' | 'quota';
  retryCount: number;            // 재시도 횟수
  localSaved: boolean;           // 로컬 저장 여부
}

// Part 4 핵심 지표
const part4Metrics = {
  // 확정 완료율
  confirmationRate:
    'count(confirm_clicked) / count(meeting_ended WHERE duration > 300)',
  // 목표: > 85%

  // 평균 확정 소요 시간
  avgConfirmationTime:
    'avg(timeSpent WHERE confirm_clicked)',
  // 목표: < 180초 (3분)

  // 빈칸 채우기율
  gapFillRate:
    'sum(filledGaps) / sum(totalGaps)',
  // 목표: > 90%

  // 모달 포기율
  abandonRate:
    'count(modal_abandoned + later_clicked) / count(modal_viewed)',
  // 목표: < 15%

  // Notion 저장율 (연결 사용자 대상)
  notionSaveRate:
    'count(notion_save_completed) / count(confirm_clicked WHERE notionConnected)',
  // 목표: > 95%

  // 나중에 → 복귀율
  laterRecoveryRate:
    'count(confirm_clicked WHERE fromLater) / count(later_clicked)',
  // 목표: > 70%
};
```

### D.9 핵심 지표 계산

```typescript
// 체험 완료율
const demoCompletionRate =
  count(simulation_completed) / count(demo_started);
// 목표: > 65%

// Aha Moment 도달률
const ahaMomentRate =
  count(alert_action WHERE action='ask') / count(alert_shown);
// 목표: > 70%

// 가입 전환율
const signupConversionRate =
  count(signup_completed) / count(signup_modal_shown);
// 목표: > 42%

// 재전환율
const reconversionRate =
  count(later_reconversion) / count(later_clicked);
// 목표: > 30%
```

---

### D.9 검색 이벤트 (Part 5)

```typescript
// Part 5.1: 검색 진입 이벤트
interface SearchEntryEvents {
  search_tab_opened: {
    source: 'nav' | 'shortcut' | 'deep_link';
    hasRecentSearches: boolean;
    timestamp: Date;
  };

  search_focused: {
    hasRecentSearches: boolean;
    suggestionsShown: number;
    timestamp: Date;
  };

  recent_search_clicked: {
    query: string;
    ageInDays: number;
    position: number;
    timestamp: Date;
  };

  suggestion_clicked: {
    suggestion: string;
    suggestionType: 'topic' | 'person' | 'company' | 'time';
    position: number;
    timestamp: Date;
  };

  search_submitted: {
    query: string;
    queryLength: number;
    queryType: 'keyword' | 'natural' | 'time' | 'person' | 'decision_element';
    fromSuggestion: boolean;
    fromRecent: boolean;
    timestamp: Date;
  };
}

// Part 5.2: 검색 결과 이벤트
interface SearchResultEvents {
  search_completed: {
    query: string;
    resultCount: number;
    searchTimeMs: number;
    semanticParseSuccess: boolean;
    parsedIntent?: {
      timeRange?: { start: Date; end: Date };
      person?: string;
      company?: string;
      topic?: string;
      decisionElement?: string;
    };
    timestamp: Date;
  };

  result_clicked: {
    query: string;
    resultIndex: number;
    meetingId: string;
    meetingDate: Date;
    timeToClickMs: number;
    scrollPosition: number;
    timestamp: Date;
  };

  result_hovered: {
    query: string;
    resultIndex: number;
    meetingId: string;
    hoverDurationMs: number;
    timestamp: Date;
  };

  filter_opened: {
    query: string;
    resultCount: number;
    timestamp: Date;
  };

  filter_applied: {
    query: string;
    filterType: 'date' | 'company' | 'person' | 'decision_element';
    filterValue: string;
    resultsBefore: number;
    resultsAfter: number;
    timestamp: Date;
  };

  sort_changed: {
    query: string;
    from: 'relevance' | 'date';
    to: 'relevance' | 'date';
    timestamp: Date;
  };

  no_results_shown: {
    query: string;
    suggestionShown: boolean;
    suggestedQueries: string[];
    timestamp: Date;
  };

  load_more_clicked: {
    query: string;
    currentCount: number;
    loadedCount: number;
    timestamp: Date;
  };
}

// Part 5.3: 상세 조회 이벤트
interface SearchDetailEvents {
  detail_viewed: {
    meetingId: string;
    query: string;
    highlightCount: number;
    meetingDate: Date;
    timestamp: Date;
  };

  highlight_navigated: {
    meetingId: string;
    query: string;
    direction: 'prev' | 'next';
    currentPosition: number;
    totalHighlights: number;
    timestamp: Date;
  };

  related_meeting_clicked: {
    fromMeetingId: string;
    toMeetingId: string;
    query: string;
    relationType: 'same_company' | 'same_topic' | 'follow_up';
    timestamp: Date;
  };

  detail_exited: {
    meetingId: string;
    query: string;
    exitType: 'back_to_results' | 'new_search' | 'close' | 'navigate_away';
    viewDurationMs: number;
    scrollDepthPercent: number;
    highlightsViewed: number;
    timestamp: Date;
  };

  decision_element_clicked: {
    meetingId: string;
    query: string;
    elementType: 'decision' | 'action' | 'risk' | 'assumption';
    elementId: string;
    timestamp: Date;
  };
}

// Part 5 핵심 지표
const part5SearchMetrics = `
// 검색 사용률
const searchUsageRate =
  count(search_tab_opened) / count(dau);
// 목표: > 20%

// 검색 성공률 (결과 클릭)
const searchSuccessRate =
  count(result_clicked) / count(search_submitted);
// 목표: > 70%

// 첫 결과 클릭률
const firstResultClickRate =
  count(result_clicked WHERE resultIndex === 0) / count(result_clicked);
// 목표: > 50%

// 시맨틱 검색 성공률
const semanticSuccessRate =
  count(search_completed WHERE semanticParseSuccess) / count(search_submitted);
// 목표: > 80%

// 평균 검색 시간
const avgTimeToClick =
  avg(timeToClickMs WHERE result_clicked) / 1000;
// 목표: < 10초

// 재검색 비율 (검색 품질 지표)
const reSearchRate =
  count(search_submitted WHERE previousSearchWithin5min) / count(search_submitted);
// 목표: < 25%

// 필터 사용률
const filterUsageRate =
  count(filter_applied) / count(search_completed WHERE resultCount > 0);
// 목표: < 30%

// 검색 만족도 (상세 조회 후 바로 종료)
const searchSatisfaction =
  count(detail_exited WHERE exitType === 'close') / count(detail_exited);
// 목표: > 60%

// 관련 미팅 탐색률
const relatedExplorationRate =
  count(related_meeting_clicked) / count(detail_viewed);
// 목표: > 25%
`;
```

### D.10 설정 이벤트 (Part 5.2)

```typescript
// Part 5.2.1: 설정 진입/탐색 이벤트
interface SettingsNavigationEvents {
  settings_opened: {
    userId: string;
    entryPoint: 'header' | 'profile' | 'notification_banner' | 'deeplink';
    timestamp: Date;
  };

  settings_closed: {
    userId: string;
    exitMethod: 'back_button' | 'outside_click' | 'navigate_away';
    timeSpentMs: number;
    changesCount: number;
    timestamp: Date;
  };

  settings_category_viewed: {
    userId: string;
    category: 'integration' | 'notification' | 'hud' | 'subscription' | 'privacy' | 'data' | 'help';
    previousCategory: string | null;
    timestamp: Date;
  };

  settings_searched: {
    userId: string;
    query: string;
    resultCount: number;
    resultClicked: boolean;
    clickedSetting?: string;
    timestamp: Date;
  };
}

// Part 5.2.2: 통합 관리 이벤트
interface IntegrationEvents {
  integration_connect_started: {
    userId: string;
    integrationType: 'notion' | 'google_calendar' | 'outlook' | 'slack' | 'salesforce';
    entryPoint: 'settings' | 'confirmation_modal' | 'onboarding';
    timestamp: Date;
  };

  integration_connected: {
    userId: string;
    integrationType: 'notion' | 'google_calendar' | 'outlook';
    workspaceName?: string;      // Notion
    accountEmail?: string;       // Calendar
    connectionTimeMs: number;
    timestamp: Date;
  };

  integration_connect_failed: {
    userId: string;
    integrationType: 'notion' | 'google_calendar' | 'outlook';
    errorType: 'oauth_denied' | 'oauth_error' | 'permission_denied' | 'network_error' | 'timeout';
    errorMessage?: string;
    attemptNumber: number;
    timestamp: Date;
  };

  integration_disconnected: {
    userId: string;
    integrationType: 'notion' | 'google_calendar' | 'outlook';
    reason: 'user_requested' | 'token_revoked' | 'permission_changed';
    connectionDurationDays: number;
    totalSyncs: number;
    timestamp: Date;
  };

  integration_settings_changed: {
    userId: string;
    integrationType: 'notion' | 'google_calendar';
    setting: string;
    oldValue: any;
    newValue: any;
    timestamp: Date;
  };

  coming_soon_interest: {
    userId: string;
    integrationType: 'slack' | 'salesforce' | 'hubspot';
    emailRegistered: boolean;
    timestamp: Date;
  };
}

// Part 5.2.3: 알림 설정 이벤트
interface NotificationSettingsEvents {
  notification_toggled: {
    userId: string;
    notificationType: 'prep_reminder' | 'schedule_change' | 'ai_insight' | 'gap_detection' | 'risk_alert' | 'confirm_reminder' | 'action_reminder';
    category: 'before_meeting' | 'during_meeting' | 'after_meeting';
    newState: boolean;
    timestamp: Date;
  };

  notification_frequency_changed: {
    userId: string;
    from: 'low' | 'medium' | 'high';
    to: 'low' | 'medium' | 'high';
    previousDailyAvg: number;
    expectedDailyAvg: number;
    timestamp: Date;
  };

  notification_time_changed: {
    userId: string;
    notificationType: 'prep_reminder' | 'confirm_reminder';
    from: string;    // "10min" | "30min" | "1hour"
    to: string;
    timestamp: Date;
  };

  dnd_toggled: {
    userId: string;
    enabled: boolean;
    startTime?: string;    // "22:00"
    endTime?: string;      // "08:00"
    timestamp: Date;
  };

  all_notifications_disabled_warning: {
    userId: string;
    action: 'confirmed' | 'cancelled';
    timestamp: Date;
  };

  notification_suggestion_shown: {
    userId: string;
    reason: 'high_ignore_rate' | 'too_many_notifications';
    currentFrequency: 'low' | 'medium' | 'high';
    suggestedFrequency: 'low' | 'medium' | 'high';
    timestamp: Date;
  };

  notification_suggestion_action: {
    userId: string;
    action: 'accepted' | 'dismissed' | 'customized';
    fromFrequency: 'low' | 'medium' | 'high';
    toFrequency: 'low' | 'medium' | 'high';
    timestamp: Date;
  };
}

// Part 5.2.4: 계정/프로필 이벤트
interface AccountEvents {
  profile_updated: {
    userId: string;
    fieldsChanged: ('name' | 'email' | 'avatar' | 'company' | 'role')[];
    timestamp: Date;
  };

  password_changed: {
    userId: string;
    success: boolean;
    failureReason?: 'wrong_current_password' | 'weak_new_password' | 'same_as_current';
    timestamp: Date;
  };

  two_factor_toggled: {
    userId: string;
    enabled: boolean;
    method?: 'authenticator' | 'sms';
    timestamp: Date;
  };

  session_terminated: {
    userId: string;
    deviceId: string;
    deviceInfo: string;
    terminationType: 'single' | 'all_other';
    timestamp: Date;
  };

  logout: {
    userId: string;
    deviceId: string;
    logoutType: 'manual' | 'session_expired' | 'remote_terminate';
    timestamp: Date;
  };
}

// Part 5.2.5: 데이터/개인정보 이벤트
interface DataPrivacyEvents {
  data_export_requested: {
    userId: string;
    exportType: 'full' | 'meetings_only' | 'settings_only';
    format: 'json' | 'csv';
    timestamp: Date;
  };

  data_export_downloaded: {
    userId: string;
    exportId: string;
    fileSizeMb: number;
    timestamp: Date;
  };

  account_delete_requested: {
    userId: string;
    reason?: 'not_useful' | 'privacy_concern' | 'switching_service' | 'other';
    feedbackText?: string;
    timestamp: Date;
  };

  account_delete_cancelled: {
    userId: string;
    cancelledAt: 'confirmation' | 'email_verification' | 'grace_period';
    timestamp: Date;
  };

  account_deleted: {
    userId: string;
    accountAgeDays: number;
    totalMeetings: number;
    timestamp: Date;
  };
}

// Part 5.2.6: 구독/결제 이벤트
interface SubscriptionEvents {
  plan_view: {
    userId: string;
    currentPlan: 'free' | 'pro' | 'enterprise';
    timestamp: Date;
  };

  upgrade_initiated: {
    userId: string;
    fromPlan: 'free' | 'pro';
    toPlan: 'pro' | 'enterprise';
    trigger: 'settings' | 'feature_gate' | 'banner';
    timestamp: Date;
  };

  upgrade_completed: {
    userId: string;
    fromPlan: 'free' | 'pro';
    toPlan: 'pro' | 'enterprise';
    paymentMethod: 'card' | 'paypal';
    amount: number;
    currency: string;
    timestamp: Date;
  };

  downgrade_requested: {
    userId: string;
    fromPlan: 'pro' | 'enterprise';
    toPlan: 'free' | 'pro';
    reason?: string;
    timestamp: Date;
  };

  billing_updated: {
    userId: string;
    updateType: 'card_changed' | 'billing_address' | 'billing_email';
    timestamp: Date;
  };
}

// Part 5.2 핵심 지표
const part52SettingsMetrics = `
// 설정 진입률 (낮을수록 좋음 - 기본값이 적절하다는 의미)
const settingsEntryRate =
  count(settings_opened) / count(dau);
// 목표: < 10%

// 평균 설정 체류 시간 (짧을수록 좋음)
const avgSettingsTime =
  avg(timeSpentMs WHERE settings_closed) / 1000;
// 목표: < 60초

// 설정 검색 사용률 (낮을수록 좋음 - 카테고리가 명확)
const settingsSearchRate =
  count(settings_searched) / count(settings_opened);
// 목표: < 20%

// Notion 연결률
const notionConnectionRate =
  count(users WHERE notion_connected) / count(users);
// 목표: > 70%

// Calendar 연결률
const calendarConnectionRate =
  count(users WHERE calendar_connected) / count(users);
// 목표: > 50%

// 통합 연결 성공률
const integrationSuccessRate =
  count(integration_connected) / count(integration_connect_started);
// 목표: > 90%

// 통합 해제율 (낮을수록 좋음)
const integrationChurnRate =
  count(integration_disconnected WHERE reason === 'user_requested') /
  count(integration_connected);
// 목표: < 5%

// 알림 ON 유지율
const notificationOnRate =
  count(users WHERE notification_on) / count(users);
// 목표: > 80%

// 알림 빈도 변경률 (낮으면 기본값 적절)
const frequencyChangeRate =
  count(notification_frequency_changed) / count(users);
// 목표: < 30%

// 2FA 활성화율
const twoFactorRate =
  count(users WHERE 2fa_enabled) / count(users);
// 목표: > 20%

// 계정 삭제 요청률 (낮을수록 좋음)
const accountDeleteRate =
  count(account_delete_requested) / count(users);
// 목표: < 1%
`;
```

---

### D.11 에러 처리 이벤트 (Part 6.1)

에러 처리는 **횡단 관심사(Cross-Cutting Concern)**로, 모든 Part에 걸쳐 일관되게 적용됩니다.

```typescript
// Part 6.1.1: 에러 분류 체계
type ErrorSeverity = 'critical' | 'major' | 'minor' | 'info';
type ErrorDomain = 'network' | 'auth' | 'integration' | 'ai' | 'media' | 'storage' | 'validation';

// Part 6.1.2: 에러 발생 이벤트
interface ErrorOccurredEvent {
  eventType: 'error_occurred';
  errorCode: string;           // 'NETWORK_TIMEOUT', 'AUTH_EXPIRED', 'STT_FAILED', etc.
  errorDomain: ErrorDomain;
  severity: ErrorSeverity;
  message: string;             // 사용자에게 표시될 메시지
  technicalDetails?: string;   // 디버깅용 상세 정보
  context: {
    screen: string;            // 발생 화면 ('today', 'hud', 'search', 'settings', etc.)
    action: string;            // 발생 시점 액션 ('fetch_meetings', 'start_recording', etc.)
    userId: string;
    sessionId: string;
  };
  timestamp: Date;
}

// Part 6.1.3: 에러 표시 이벤트
interface ErrorDisplayedEvent {
  eventType: 'error_displayed';
  errorCode: string;
  displayType: 'modal' | 'banner' | 'toast' | 'inline';
  ctaOptions: string[];        // ['retry', 'settings', 'dismiss']
  autoRecoveryStarted: boolean;
  timestamp: Date;
}

// Part 6.1.4: 자동 복구 이벤트
interface AutoRecoveryEvents {
  auto_retry_started: {
    errorCode: string;
    attemptNumber: number;
    maxAttempts: number;
    backoffMs: number;
    timestamp: Date;
  };

  auto_retry_success: {
    errorCode: string;
    attemptNumber: number;
    recoveryTimeMs: number;
    timestamp: Date;
  };

  auto_retry_failed: {
    errorCode: string;
    attemptNumber: number;
    finalError: string;
    fallbackActivated: boolean;
    timestamp: Date;
  };
}

// Part 6.1.5: 사용자 복구 액션 이벤트
interface UserRecoveryEvents {
  error_cta_clicked: {
    errorCode: string;
    ctaType: 'retry' | 'settings' | 'login' | 'permission' | 'help';
    displayType: 'modal' | 'banner' | 'toast' | 'inline';
    timeToClickMs: number;     // 에러 표시 후 클릭까지 시간
    timestamp: Date;
  };

  user_recovery_success: {
    errorCode: string;
    ctaType: string;
    recoveryTimeMs: number;
    timestamp: Date;
  };

  user_recovery_failed: {
    errorCode: string;
    ctaType: string;
    reason: string;
    timestamp: Date;
  };

  error_dismissed: {
    errorCode: string;
    dismissMethod: 'close_button' | 'outside_click' | 'auto_timeout' | 'swipe';
    displayDurationMs: number;
    timestamp: Date;
  };
}

// Part 6.1.6: 폴백 모드 이벤트
interface FallbackEvents {
  fallback_activated: {
    errorDomain: ErrorDomain;
    originalService: string;     // 'pinecone', 'notion_api', 'gpt_4', etc.
    fallbackService: string;     // 'postgres_fts', 'local_storage', 'gpt_3.5', etc.
    reason: string;
    timestamp: Date;
  };

  offline_mode_entered: {
    userId: string;
    trigger: 'network_lost' | 'server_unavailable' | 'manual';
    pendingActionsCount: number;
    timestamp: Date;
  };

  offline_mode_exited: {
    userId: string;
    durationMs: number;
    pendingActionsSynced: number;
    syncErrors: number;
    timestamp: Date;
  };

  degraded_mode_entered: {
    userId: string;
    features: string[];          // 제한된 기능 목록
    reason: string;
    timestamp: Date;
  };

  degraded_mode_exited: {
    userId: string;
    durationMs: number;
    timestamp: Date;
  };
}

// Part 6.1.7: 네트워크 에러 상세 이벤트
interface NetworkErrorEvents {
  network_error: {
    errorCode: 'NETWORK_TIMEOUT' | 'NETWORK_OFFLINE' | 'DNS_FAILED' | 'CONNECTION_REFUSED';
    endpoint: string;
    method: 'GET' | 'POST' | 'PUT' | 'DELETE' | 'PATCH';
    timeoutMs?: number;
    retryAttempt: number;
    timestamp: Date;
  };

  websocket_disconnected: {
    sessionId: string;
    reason: 'network' | 'server' | 'timeout' | 'manual';
    reconnectAttempt: number;
    timestamp: Date;
  };

  websocket_reconnected: {
    sessionId: string;
    totalReconnectAttempts: number;
    downtime: number;
    timestamp: Date;
  };
}

// Part 6.1.8: 통합 에러 상세 이벤트
interface IntegrationErrorEvents {
  oauth_error: {
    provider: 'notion' | 'google_calendar' | 'outlook';
    errorType: 'access_denied' | 'invalid_grant' | 'token_expired' | 'rate_limited';
    autoRefreshAttempted: boolean;
    autoRefreshSuccess: boolean;
    timestamp: Date;
  };

  api_integration_error: {
    provider: 'notion' | 'google_calendar' | 'outlook';
    operation: 'read' | 'write' | 'update' | 'delete';
    httpStatus: number;
    errorCode: string;
    retryAttempt: number;
    timestamp: Date;
  };

  notion_save_error: {
    meetingId: string;
    errorType: 'permission_denied' | 'database_not_found' | 'rate_limited' | 'validation_error';
    localBackupCreated: boolean;
    retryScheduled: boolean;
    timestamp: Date;
  };
}

// Part 6.1.9: AI 에러 상세 이벤트
interface AIErrorEvents {
  ai_generation_error: {
    taskType: 'stt' | 'summary' | 'insight' | 'question' | 'embedding';
    provider: 'deepgram' | 'openai' | 'anthropic';
    errorType: 'rate_limited' | 'token_limit' | 'invalid_response' | 'timeout' | 'service_unavailable';
    fallbackUsed: boolean;
    fallbackType?: 'default_content' | 'cached' | 'simpler_model';
    timestamp: Date;
  };

  stt_error: {
    sessionId: string;
    errorType: 'microphone_permission' | 'microphone_not_found' | 'audio_processing' | 'api_error';
    durationLostMs: number;     // 손실된 녹음 시간
    recoveryAttempted: boolean;
    timestamp: Date;
  };
}

// Part 6.1.10: 데이터 손실 방지 이벤트
interface DataProtectionEvents {
  local_backup_created: {
    dataType: 'meeting' | 'transcript' | 'decision' | 'settings';
    recordId: string;
    sizeBytes: number;
    reason: 'sync_failed' | 'offline' | 'preventive';
    timestamp: Date;
  };

  local_backup_synced: {
    dataType: 'meeting' | 'transcript' | 'decision' | 'settings';
    recordId: string;
    backupAgeMs: number;
    syncSuccess: boolean;
    timestamp: Date;
  };

  data_loss_prevented: {
    dataType: string;
    recordId: string;
    preventionMethod: 'local_backup' | 'retry' | 'queue';
    timestamp: Date;
  };

  potential_data_loss: {
    dataType: string;
    recordId: string;
    reason: string;
    userNotified: boolean;
    timestamp: Date;
  };
}

// Part 6.1 핵심 지표
const part61ErrorMetrics = `
// 전체 에러 발생률 (낮을수록 좋음)
const errorRate =
  count(error_occurred) / count(api_calls);
// 목표: < 1%

// 자동 복구 성공률
const autoRecoveryRate =
  count(auto_retry_success) / count(auto_retry_started);
// 목표: > 70%

// 사용자 복구 성공률
const userRecoveryRate =
  count(user_recovery_success) / count(error_cta_clicked);
// 목표: > 60%

// 평균 복구 시간 (자동)
const avgAutoRecoveryTime =
  avg(recoveryTimeMs WHERE auto_retry_success);
// 목표: < 5초

// 에러 후 이탈률 (낮을수록 좋음)
const errorChurnRate =
  count(session_end_within_60s_of_error) / count(error_displayed);
// 목표: < 10%

// CTA 클릭률
const errorCtaClickRate =
  count(error_cta_clicked) / count(error_displayed);
// 목표: > 60%

// 에러 무시율 (dismiss)
const errorDismissRate =
  count(error_dismissed) / count(error_displayed);
// 지표: 높으면 에러가 덜 심각하다는 의미

// 동일 에러 재발률 (세션 내)
const errorRecurrenceRate =
  count(same_error_twice_in_session) / count(sessions_with_error);
// 목표: < 5%

// 오프라인 모드 진입률
const offlineModeRate =
  count(offline_mode_entered) / count(dau);
// 지표: 측정만 (네트워크 의존)

// 데이터 손실 건수
const dataLossCount =
  count(potential_data_loss WHERE userNotified = true);
// 목표: 0

// 도메인별 에러 분포
const errorByDomain =
  group_by(error_occurred, errorDomain) / count(error_occurred);
// 지표: 특정 도메인 집중 모니터링
`;
```

### D.12 로딩 상태 이벤트 (Part 6.2)

로딩 상태는 **횡단 관심사(Cross-Cutting Concern)**로, 모든 Part에 걸쳐 일관되게 적용됩니다.

```typescript
// Part 6.2.1: 로딩 상태 분류 체계
type LoadingSeverity = 'blocking' | 'partial' | 'background' | 'inline';
type LoadingDisplayType = 'skeleton' | 'spinner' | 'progress' | 'shimmer' | 'pulse' | 'streaming';
type LoadingContext = 'navigation' | 'data_fetch' | 'action' | 'ai_process' | 'sync' | 'media';

// Part 6.2.2: 로딩 시작 이벤트
interface LoadingStartedEvent {
  eventType: 'loading_started';
  loadingId: string;             // 고유 식별자
  context: LoadingContext;
  severity: LoadingSeverity;
  displayType: LoadingDisplayType;
  estimatedDurationMs?: number;  // 예상 시간
  cancellable: boolean;
  screen: string;                // 발생 화면
  action: string;                // 트리거 액션
  timestamp: Date;
}

// Part 6.2.3: 로딩 완료 이벤트
interface LoadingCompletedEvent {
  eventType: 'loading_completed';
  loadingId: string;
  context: LoadingContext;
  actualDurationMs: number;      // 실제 소요 시간
  estimatedDurationMs?: number;  // 예상 시간 (비교용)
  displayShown: boolean;         // 로딩 UI 표시 여부 (100ms 규칙)
  userWaited: boolean;           // 사용자가 실제로 대기했는지
  timestamp: Date;
}

// Part 6.2.4: 로딩 에러 이벤트
interface LoadingErrorEvent {
  eventType: 'loading_error';
  loadingId: string;
  context: LoadingContext;
  errorCode: string;
  durationBeforeErrorMs: number;
  retryScheduled: boolean;
  timestamp: Date;
}

// Part 6.2.5: 로딩 취소 이벤트
interface LoadingCancelledEvent {
  eventType: 'loading_cancelled';
  loadingId: string;
  context: LoadingContext;
  cancelMethod: 'button' | 'navigation' | 'timeout' | 'error';
  durationBeforeCancelMs: number;
  timestamp: Date;
}

// Part 6.2.6: 로딩 이탈 이벤트
interface LoadingAbandonedEvent {
  eventType: 'loading_abandoned';
  loadingId: string;
  context: LoadingContext;
  durationBeforeAbandonMs: number;
  destinationScreen?: string;    // 이탈 후 이동 화면
  timestamp: Date;
}

// Part 6.2.7: 로딩 표시 이벤트
interface LoadingDisplayEvents {
  skeleton_shown: {
    loadingId: string;
    screen: string;
    skeletonType: 'card' | 'list' | 'text' | 'full_page';
    itemCount: number;           // Skeleton 개수
    durationMs: number;          // 표시 시간
    timestamp: Date;
  };

  spinner_shown: {
    loadingId: string;
    screen: string;
    spinnerSize: 'small' | 'medium' | 'large' | 'xl';
    placement: 'button' | 'inline' | 'center' | 'overlay';
    durationMs: number;
    timestamp: Date;
  };

  progress_shown: {
    loadingId: string;
    screen: string;
    progressType: 'linear' | 'circular' | 'steps';
    finalProgress: number;       // 완료 시 진행률 (0-100)
    durationMs: number;
    timestamp: Date;
  };

  streaming_shown: {
    loadingId: string;
    screen: string;
    streamType: 'ai_response' | 'transcription' | 'search_results';
    chunkCount: number;          // 스트림 청크 수
    totalCharacters: number;     // 총 문자 수
    durationMs: number;
    timestamp: Date;
  };
}

// Part 6.2.8: 낙관적 UI 이벤트
interface OptimisticUIEvents {
  optimistic_applied: {
    operationType: 'toggle' | 'text_save' | 'decision_edit' | 'integration_save';
    dataType: string;
    recordId: string;
    screen: string;
    timestamp: Date;
  };

  optimistic_confirmed: {
    operationType: string;
    recordId: string;
    confirmationDelayMs: number; // 서버 확인까지 시간
    timestamp: Date;
  };

  optimistic_reverted: {
    operationType: string;
    recordId: string;
    reason: 'api_error' | 'validation_error' | 'conflict';
    errorCode?: string;
    userNotified: boolean;
    timestamp: Date;
  };
}

// Part 6.2.9: 성능 메트릭 이벤트
interface PerformanceMetricEvents {
  web_vitals_measured: {
    fcp: number;                 // First Contentful Paint (ms)
    lcp: number;                 // Largest Contentful Paint (ms)
    cls: number;                 // Cumulative Layout Shift
    fid: number;                 // First Input Delay (ms)
    ttfb: number;                // Time to First Byte (ms)
    screen: string;
    timestamp: Date;
  };

  perceived_performance_feedback: {
    userId: string;
    rating: 'fast' | 'normal' | 'slow';
    screen: string;
    actualLoadTimeMs: number;
    timestamp: Date;
  };
}

// Part 6.2.10: 스트리밍 상세 이벤트
interface StreamingEvents {
  streaming_started: {
    streamId: string;
    streamType: 'ai_response' | 'transcription' | 'search_results';
    screen: string;
    timestamp: Date;
  };

  streaming_chunk_received: {
    streamId: string;
    chunkIndex: number;
    chunkSize: number;           // bytes
    totalReceived: number;       // 누적 bytes
    timestamp: Date;
  };

  streaming_completed: {
    streamId: string;
    totalChunks: number;
    totalBytes: number;
    durationMs: number;
    timestamp: Date;
  };

  streaming_interrupted: {
    streamId: string;
    reason: 'error' | 'timeout' | 'cancelled';
    chunksReceived: number;
    partialContentUsable: boolean;
    timestamp: Date;
  };
}

// Part 6.2 핵심 지표
const part62LoadingMetrics = `
// 실제 로딩 시간 (페이지별)
const actualLoadingTime =
  avg(actualDurationMs WHERE loading_completed GROUP BY screen);
// 목표: 페이지 로드 < 2초, API < 500ms

// 체감 로딩 불만족률
const perceivedSlowRate =
  count(perceived_performance_feedback WHERE rating = 'slow') /
  count(perceived_performance_feedback);
// 목표: < 10%

// Skeleton 표시율 (적절한 상황에서)
const skeletonDisplayRate =
  count(skeleton_shown) / count(loading_started WHERE severity IN ('blocking', 'partial'));
// 목표: > 95%

// 로딩 표시 지연 준수율 (100ms 규칙)
const loadingDelayCompliance =
  count(loading_completed WHERE displayShown = false AND actualDurationMs < 100) /
  count(loading_completed WHERE actualDurationMs < 100);
// 목표: > 99% (빠른 로딩은 표시 안 함)

// 로딩 중 이탈률
const loadingAbandonRate =
  count(loading_abandoned) / count(loading_started);
// 목표: < 5%

// 로딩 취소율 (취소 가능한 경우)
const loadingCancelRate =
  count(loading_cancelled) / count(loading_started WHERE cancellable = true);
// 목표: < 10%

// 로딩 후 즉시 이탈률
const postLoadingBounceRate =
  count(exit_within_3s_after_loading_completed) / count(loading_completed);
// 목표: < 15%

// Web Vitals 목표 달성률
const webVitalsPassRate =
  count(web_vitals_measured WHERE lcp < 2500 AND cls < 0.1 AND fid < 100) /
  count(web_vitals_measured);
// 목표: > 75%

// 낙관적 업데이트 롤백률
const optimisticRollbackRate =
  count(optimistic_reverted) / count(optimistic_applied);
// 목표: < 2%

// 스트리밍 완료율
const streamingCompletionRate =
  count(streaming_completed) / count(streaming_started);
// 목표: > 98%

// 스트리밍 중단 복구율
const streamingInterruptRecoveryRate =
  count(streaming_interrupted WHERE partialContentUsable = true) /
  count(streaming_interrupted);
// 목표: > 80% (부분 콘텐츠 활용)

// 예상 시간 정확도
const estimatedTimeAccuracy =
  1 - avg(abs(actualDurationMs - estimatedDurationMs) / estimatedDurationMs
    WHERE estimatedDurationMs IS NOT NULL);
// 목표: > 70% (30% 오차 이내)
`;
```

### D.13 빈 상태 이벤트 (Part 6.3)

```typescript
// Part 6.3: 빈 상태(Empty State) 이벤트 로깅

// ============================================
// Part 6.3.1: 빈 상태 분류
// ============================================

type EmptyStateReason =
  | 'first_time'         // 첫 사용 - 데이터 생성 전
  | 'no_data'            // 조건 만족 데이터 없음
  | 'filtered_out'       // 필터링으로 인한 빈 결과
  | 'search_no_match'    // 검색 결과 없음
  | 'completed_all'      // 모든 항목 완료
  | 'temporal_gap'       // 특정 기간에 데이터 없음
  | 'permission_limited' // 권한 부족으로 접근 불가
  | 'feature_not_setup'; // 기능 미설정

type EmptyStateContext =
  | 'today_meetings'       // Today 화면 - 오늘 미팅 없음
  | 'past_meetings'        // 지난 미팅 리스트 빈 상태
  | 'search_results'       // 검색 결과 없음
  | 'decisions_list'       // 결정 사항 없음
  | 'actions_list'         // 액션 아이템 없음
  | 'insights_list'        // 인사이트 없음
  | 'notifications'        // 알림 없음
  | 'integrations'         // 연동 서비스 없음
  | 'hud_idle'             // HUD 대기 상태
  | 'filter_results';      // 필터 결과 없음

// ============================================
// Part 6.3.2: 빈 상태 표시 이벤트
// ============================================

interface EmptyStateShownEvent {
  empty_state_shown: {
    emptyStateId: string;        // 고유 ID
    reason: EmptyStateReason;
    context: EmptyStateContext;
    screen: string;
    isFirstTime: boolean;        // 해당 컨텍스트에서 첫 빈 상태인지
    hasPrimaryCta: boolean;      // Primary CTA 포함 여부
    hasSecondaryCta: boolean;    // Secondary CTA 포함 여부
    previousScreen?: string;     // 이전 화면
    timestamp: Date;
  };
}

// ============================================
// Part 6.3.3: 빈 상태 CTA 클릭 이벤트
// ============================================

interface EmptyStateCtaClickedEvent {
  empty_state_cta_clicked: {
    emptyStateId: string;
    reason: EmptyStateReason;
    context: EmptyStateContext;
    ctaType: 'primary' | 'secondary' | 'suggestion' | 'link';
    ctaLabel: string;            // 클릭한 CTA 텍스트
    ctaAction: string;           // 액션 (navigate, open, oauth 등)
    timeToClickMs: number;       // 빈 상태 표시 후 클릭까지 시간
    timestamp: Date;
  };
}

// ============================================
// Part 6.3.4: 빈 상태 해소 이벤트
// ============================================

interface EmptyStateDismissedEvent {
  empty_state_dismissed: {
    emptyStateId: string;
    reason: EmptyStateReason;
    context: EmptyStateContext;
    dismissMethod: 'data_created' | 'filter_changed' | 'navigation' | 'refresh';
    timeSpentMs: number;         // 빈 상태 체류 시간
    ctaClicked: boolean;         // CTA 클릭으로 해소됐는지
    timestamp: Date;
  };
}

// ============================================
// Part 6.3.5: 빈 상태 탐색 이벤트
// ============================================

interface EmptyStateNavigatedEvent {
  empty_state_navigated: {
    emptyStateId: string;
    reason: EmptyStateReason;
    context: EmptyStateContext;
    navigatedTo: string;         // 이동한 화면
    navigationMethod: 'cta' | 'nav_bar' | 'back_button' | 'link';
    timeSpentMs: number;
    timestamp: Date;
  };
}

// ============================================
// Part 6.3.6: 빈 상태 이탈 이벤트
// ============================================

interface EmptyStateBouncedEvent {
  empty_state_bounced: {
    emptyStateId: string;
    reason: EmptyStateReason;
    context: EmptyStateContext;
    bounceType: 'app_close' | 'tab_close' | 'session_timeout' | 'background';
    timeSpentMs: number;         // 빈 상태 체류 시간
    anyInteraction: boolean;     // 어떤 상호작용이라도 있었는지
    timestamp: Date;
  };
}

// ============================================
// Part 6.3.7: 첫 사용자 전환 이벤트
// ============================================

interface FirstTimeEmptyStateEvents {
  first_time_onboarding_shown: {
    emptyStateId: string;
    context: EmptyStateContext;
    onboardingType: 'calendar_connect' | 'notion_connect' | 'first_meeting' | 'demo_meeting';
    suggestedActions: string[];
    timestamp: Date;
  };

  first_time_onboarding_started: {
    emptyStateId: string;
    context: EmptyStateContext;
    actionSelected: string;
    timeToStartMs: number;
    timestamp: Date;
  };

  first_time_onboarding_completed: {
    emptyStateId: string;
    context: EmptyStateContext;
    action: string;
    success: boolean;
    durationMs: number;
    timestamp: Date;
  };

  first_time_onboarding_skipped: {
    emptyStateId: string;
    context: EmptyStateContext;
    skipReason?: 'later' | 'not_interested' | 'unknown';
    timeSpentMs: number;
    timestamp: Date;
  };
}

// ============================================
// Part 6.3.8: 검색 빈 상태 이벤트
// ============================================

interface SearchEmptyStateEvents {
  search_empty_suggestions_shown: {
    emptyStateId: string;
    originalQuery: string;
    suggestedQueries: string[];
    filterSuggestions: string[];
    timestamp: Date;
  };

  search_empty_suggestion_clicked: {
    emptyStateId: string;
    originalQuery: string;
    suggestionType: 'query' | 'filter' | 'reset';
    suggestionValue: string;
    suggestionIndex: number;
    timestamp: Date;
  };

  search_empty_filter_adjusted: {
    emptyStateId: string;
    originalQuery: string;
    filterType: 'date_range' | 'type' | 'participant' | 'all';
    previousFilter: Record<string, unknown>;
    newFilter: Record<string, unknown>;
    resultedInData: boolean;
    timestamp: Date;
  };
}

// ============================================
// Part 6.3.9: 섹션별 인라인 빈 상태 이벤트
// ============================================

interface InlineEmptyStateEvents {
  inline_empty_state_shown: {
    parentScreen: string;
    sectionId: string;           // 섹션 식별자
    sectionType: 'decisions' | 'actions' | 'insights' | 'participants';
    reason: EmptyStateReason;
    size: 'small' | 'compact';   // 인라인 빈 상태 크기
    timestamp: Date;
  };

  inline_empty_state_interaction: {
    parentScreen: string;
    sectionId: string;
    interactionType: 'add_button' | 'help_link' | 'dismiss';
    timestamp: Date;
  };
}

// ============================================
// Part 6.3.10: 빈 상태 A/B 테스트 이벤트
// ============================================

interface EmptyStateExperimentEvents {
  empty_state_variant_assigned: {
    experimentId: string;
    variantId: 'control' | 'variant_a' | 'variant_b';
    context: EmptyStateContext;
    variantConfig: {
      illustration?: string;
      title?: string;
      ctaText?: string;
      showSocialProof?: boolean;
    };
    timestamp: Date;
  };

  empty_state_variant_outcome: {
    experimentId: string;
    variantId: string;
    context: EmptyStateContext;
    outcome: 'converted' | 'navigated' | 'bounced';
    timeToOutcomeMs: number;
    timestamp: Date;
  };
}

// Part 6.3 핵심 지표
const part63EmptyStateMetrics = `
// 빈 상태 CTA 전환율
const emptyStateConversionRate =
  count(empty_state_cta_clicked) / count(empty_state_shown);
// 목표: > 30%

// 빈 상태 이탈율
const emptyStateBounceRate =
  count(empty_state_bounced) / count(empty_state_shown);
// 목표: < 20%

// 빈 상태 탐색율 (다른 화면으로 이동)
const emptyStateExplorationRate =
  count(empty_state_navigated) / count(empty_state_shown);
// 목표: > 50%

// 첫 사용자 온보딩 완료율
const firstTimeOnboardingCompletionRate =
  count(first_time_onboarding_completed WHERE success = true) /
  count(first_time_onboarding_shown);
// 목표: > 60%

// 빈 상태 → 데이터 생성 전환율
const emptyToDataConversionRate =
  count(empty_state_dismissed WHERE dismissMethod = 'data_created') /
  count(empty_state_shown WHERE reason = 'first_time' OR reason = 'no_data');
// 목표: > 40%

// 검색 빈 상태 → 결과 발견율
const searchEmptyToResultRate =
  count(search_empty_filter_adjusted WHERE resultedInData = true) /
  count(search_empty_suggestions_shown);
// 목표: > 50%

// 빈 상태 평균 체류 시간
const avgEmptyStateTimeSpent =
  avg(timeSpentMs WHERE empty_state_dismissed OR empty_state_navigated);
// 목표: 적정 범위 5-30초 (너무 짧으면 인지 안 됨, 너무 길면 막힘)

// 빈 상태 재방문율 (빈 상태 경험 후 재방문)
const emptyStateReturnRate =
  count(distinct userId WHERE session_started AND
    previous_session_had_empty_state = true) /
  count(distinct userId WHERE empty_state_shown);
// 목표: > 70%

// 인라인 빈 상태 상호작용률
const inlineEmptyInteractionRate =
  count(inline_empty_state_interaction) / count(inline_empty_state_shown);
// 목표: > 15%

// 빈 상태 컨텍스트별 분포
const emptyStateDistribution =
  count(empty_state_shown GROUP BY context) / count(empty_state_shown);
// 인사이트: 어느 화면에서 빈 상태가 가장 많이 발생하는지

// 빈 상태 원인별 분포
const emptyStateReasonDistribution =
  count(empty_state_shown GROUP BY reason) / count(empty_state_shown);
// 인사이트: first_time vs no_data vs filtered_out 비율
`;
```

### D.14 접근성 이벤트 (Part 6.4)

```typescript
// ============================================
// Part 6.4: 접근성(Accessibility) 이벤트 로깅
// ============================================

// Part 6.4.1: 접근성 기능 타입 분류
type AccessibilityFeature =
  | 'screen_reader'      // 스크린 리더 지원
  | 'keyboard_nav'       // 키보드 네비게이션
  | 'focus_management'   // 포커스 관리
  | 'color_contrast'     // 색상 대비
  | 'reduced_motion'     // 모션 감소
  | 'text_scaling'       // 텍스트 크기 조절
  | 'high_contrast'      // 고대비 모드
  | 'skip_link'          // 스킵 링크
  | 'aria_live';         // ARIA 라이브 영역

// Part 6.4.2: 키보드 단축키 사용 이벤트
interface KeyboardShortcutUsedEvent {
  event: 'keyboard_shortcut_used';
  properties: {
    shortcutKey: string;              // '/', 'j', 'k', 'Escape' 등
    modifiers: string[];              // ['ctrl'], ['shift'], ['alt']
    action: string;                   // 'focusSearch', 'nextMeeting', 'closeModal'
    scope: 'global' | 'today' | 'hud' | 'search' | 'modal' | 'settings';
    screen: string;                   // 현재 화면
    success: boolean;                 // 단축키 동작 성공 여부
    responseTimeMs: number;           // 단축키 응답 시간
  };
}

// Part 6.4.3: 스크린 리더 감지 이벤트
interface ScreenReaderDetectedEvent {
  event: 'screen_reader_detected';
  properties: {
    detected: boolean;
    screenReaderType: 'nvda' | 'jaws' | 'voiceover' | 'talkback' | 'narrator' | 'unknown';
    platform: 'windows' | 'macos' | 'ios' | 'android' | 'linux';
    browser: string;
    browserVersion: string;
    sessionId: string;
  };
}

// Part 6.4.4: 포커스 트랩 이벤트
interface FocusTrapEvent {
  event: 'focus_trap_entered' | 'focus_trap_exited';
  properties: {
    trapContainerId: string;          // 'confirmModal', 'searchPanel' 등
    trapType: 'modal' | 'dropdown' | 'panel' | 'tooltip';
    entryPoint: string;               // 포커스 트랩 진입 트리거
    exitMethod: 'escape' | 'close_button' | 'outside_click' | 'submit' | 'tab_out';
    timeInTrapMs: number;             // 포커스 트랩 내 체류 시간
    tabCycleCount: number;            // Tab 순환 횟수
    focusReturnedCorrectly: boolean;  // 원래 위치로 포커스 복귀 성공 여부
  };
}

// Part 6.4.5: 스킵 링크 사용 이벤트
interface SkipLinkUsedEvent {
  event: 'skip_link_used';
  properties: {
    skipLinkType: 'main_content' | 'navigation' | 'section';
    targetId: string;                 // 스킵 대상 요소 ID
    sourceScreen: string;             // 사용한 화면
    userType: 'keyboard' | 'screen_reader' | 'unknown';
    timeToSkipMs: number;             // 페이지 로드 후 스킵까지 시간
  };
}

// Part 6.4.6: 접근성 설정 변경 이벤트
interface AccessibilitySettingChangedEvent {
  event: 'accessibility_setting_changed';
  properties: {
    settingName: string;              // 'reduceMotion', 'highContrast', 'textScaleFactor'
    previousValue: unknown;
    newValue: unknown;
    source: 'user_preference' | 'system_preference' | 'auto_detected';
    applyScope: 'session' | 'persistent';
  };
}

// Part 6.4.7: 모션 감소 관련 이벤트
interface ReducedMotionEvent {
  event: 'reduced_motion_enabled' | 'reduced_motion_disabled';
  properties: {
    source: 'system_setting' | 'user_preference';
    affectedAnimations: string[];     // 영향받는 애니메이션 목록
    screen: string;
  };
}

// Part 6.4.8: 고대비 모드 이벤트
interface HighContrastEvent {
  event: 'high_contrast_enabled' | 'high_contrast_disabled';
  properties: {
    contrastMode: 'light' | 'dark' | 'custom';
    source: 'system_setting' | 'user_preference';
    previousTheme: string;
  };
}

// Part 6.4.9: ARIA 라이브 영역 이벤트
interface AriaLiveAnnouncementEvent {
  event: 'aria_live_announced';
  properties: {
    regionId: string;                 // 라이브 영역 ID
    ariaLive: 'polite' | 'assertive';
    message: string;                  // 읽힌 메시지 (개인정보 제외)
    messageType: 'status' | 'alert' | 'progress' | 'suggestion' | 'error';
    context: string;                  // 발생 컨텍스트
    screen: string;
  };
}

// Part 6.4.10: 텍스트 크기 조절 이벤트
interface TextScalingEvent {
  event: 'text_scaling_changed';
  properties: {
    previousScale: number;            // 1.0 = 100%
    newScale: number;
    scalingMethod: 'browser_zoom' | 'app_setting' | 'system_setting';
    layoutBreakage: boolean;          // 레이아웃 깨짐 발생 여부
    affectedComponents: string[];     // 영향받는 컴포넌트
  };
}

// Part 6.4.11: 포커스 표시 이벤트
interface FocusIndicatorEvent {
  event: 'focus_indicator_interaction';
  properties: {
    elementType: 'button' | 'link' | 'input' | 'card' | 'tab' | 'checkbox' | 'radio';
    elementId: string;
    focusMethod: 'keyboard' | 'programmatic';
    focusVisible: boolean;            // :focus-visible 상태
    indicatorStyle: 'ring' | 'outline' | 'underline' | 'background';
    screen: string;
  };
}

// Part 6.4.12: 접근성 이슈 보고 이벤트
interface AccessibilityIssueReportedEvent {
  event: 'accessibility_issue_reported';
  properties: {
    issueType: 'keyboard_trap' | 'missing_label' | 'low_contrast' | 'focus_lost' | 'screen_reader' | 'other';
    severity: 'blocker' | 'critical' | 'major' | 'minor';
    description: string;
    screen: string;
    elementSelector?: string;
    userAssistiveTech?: string;
    browserInfo: string;
  };
}

// Part 6.4.13: 키보드 탐색 패턴 이벤트
interface KeyboardNavigationPatternEvent {
  event: 'keyboard_navigation_pattern';
  properties: {
    screen: string;
    navigationPath: string[];         // 탐색 경로 (요소 ID 배열)
    tabCount: number;                 // Tab 키 횟수
    shiftTabCount: number;            // Shift+Tab 횟수
    arrowKeyCount: number;            // 화살표 키 횟수
    enterCount: number;               // Enter 키 횟수
    escapeCount: number;              // Escape 키 횟수
    totalNavigationTimeMs: number;
    taskCompleted: boolean;           // 목표 작업 완료 여부
    targetAction: string;             // 목표 작업
  };
}

// Part 6.4.14: 접근성 테스트 자동화 이벤트
interface AccessibilityAuditEvent {
  event: 'accessibility_audit_completed';
  properties: {
    auditor: 'axe-core' | 'lighthouse' | 'manual';
    screen: string;
    totalIssues: number;
    criticalIssues: number;
    seriousIssues: number;
    moderateIssues: number;
    minorIssues: number;
    wcagLevel: 'A' | 'AA' | 'AAA';
    passRate: number;                 // 통과율 (%)
    auditDurationMs: number;
  };
}

// ============================================
// Part 6.4 접근성 메트릭
// ============================================

const part64AccessibilityMetrics = `
// 키보드 전용 사용자 비율
const keyboardOnlyUserRate =
  count(distinct userId WHERE keyboard_shortcut_used AND NOT mouse_click) /
  count(distinct userId);
// 인사이트: 키보드 전용 사용자 비율

// 스크린 리더 사용자 비율
const screenReaderUserRate =
  count(distinct userId WHERE screen_reader_detected.detected = true) /
  count(distinct userId);
// 인사이트: 스크린 리더 사용자 규모

// 키보드 단축키 사용률
const keyboardShortcutUsageRate =
  count(distinct userId WHERE keyboard_shortcut_used) /
  count(distinct userId);
// 목표: > 20% (키보드 사용자 중)

// 인기 단축키 TOP 5
const topKeyboardShortcuts =
  count(keyboard_shortcut_used GROUP BY shortcutKey ORDER BY count DESC LIMIT 5);
// 인사이트: 가장 많이 사용되는 단축키

// 포커스 트랩 탈출 성공률
const focusTrapExitSuccessRate =
  count(focus_trap_exited WHERE focusReturnedCorrectly = true) /
  count(focus_trap_exited);
// 목표: 100%

// 스킵 링크 사용률
const skipLinkUsageRate =
  count(skip_link_used) /
  count(page_loaded WHERE hasSkipLink = true);
// 인사이트: 스킵 링크 실제 활용도

// 접근성 설정 활성화율
const accessibilitySettingsEnabledRate = {
  reduceMotion: count(users WHERE reduceMotion = true) / count(users),
  highContrast: count(users WHERE highContrast = true) / count(users),
  largeText: count(users WHERE largeText = true) / count(users),
};
// 인사이트: 접근성 설정 선호도

// 접근성 이슈 보고 빈도
const accessibilityIssueFrequency =
  count(accessibility_issue_reported) /
  count(distinct userId);
// 목표: < 0.1 (사용자당 0.1건 미만)

// WCAG 준수율
const wcagComplianceRate =
  sum(accessibility_audit_completed.passRate) /
  count(accessibility_audit_completed);
// 목표: 100% (AA 수준)

// 키보드 탐색 완료율
const keyboardTaskCompletionRate =
  count(keyboard_navigation_pattern WHERE taskCompleted = true) /
  count(keyboard_navigation_pattern);
// 목표: > 95%

// 키보드 탐색 평균 시간
const avgKeyboardNavigationTime =
  avg(keyboard_navigation_pattern.totalNavigationTimeMs);
// 목표: 마우스 대비 150% 이내

// ARIA 라이브 알림 빈도
const ariaLiveAnnouncementRate =
  count(aria_live_announced) / count(session);
// 인사이트: 동적 콘텐츠 알림 빈도

// 접근성 기능별 사용 분포
const accessibilityFeatureDistribution =
  count(events GROUP BY accessibilityFeature) / count(events WHERE isAccessibilityEvent = true);
// 인사이트: 어떤 접근성 기능이 가장 많이 사용되는지
`;
```

---

## 부록 E: 몰입형 프로토타입 체험 설계

### E.1 프로토타입 체험 목적

웹 기반 프로토타입에서 **실제 데스크톱 환경처럼** Onno의 두 가지 핵심 경험을 체험할 수 있도록 설계합니다.

**핵심 가치 전달:**
- HUD 모드: "회의 중에도 다른 작업하면서 AI가 실시간 지원"
- 콘솔 모드: "회의 전후 모든 결정을 한 곳에서 관리"

### E.2 체험 모드 전환 시스템

```
┌─────────────────────────────────────────────────────────────┐
│                                                             │
│  ┌──────────────────┐         ┌──────────────────┐         │
│  │                  │         │                  │         │
│  │   🖥️ HUD 모드    │ ◄─────► │  📊 콘솔 모드    │         │
│  │                  │  전환   │                  │         │
│  │  가상 데스크톱   │  버튼   │  Decision OS     │         │
│  │  + 플로팅 HUD   │         │  풀스크린        │         │
│  │                  │         │                  │         │
│  └──────────────────┘         └──────────────────┘         │
│                                                             │
│  [모드 전환 버튼: 화면 좌측 하단 고정]                       │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

### E.3 HUD 모드 상세 체험

#### E.3.1 가상 데스크톱 환경

사용자가 **실제 데스크톱에서 Onno를 사용하는 것처럼** 느끼도록 가상 환경을 구현합니다.

**구성 요소:**

| 요소 | 설명 | 인터랙션 |
|------|------|----------|
| **MenuBar** | macOS 스타일 상단 바 (시계, 배터리) | 테마 전환 |
| **Dock** | 하단 앱 런처 (Finder, Chrome, Zoom, Slack, Onno) | 앱 활성화 |
| **VirtualWindow** | 드래그/리사이즈 가능한 윈도우 | 이동, 최소화 |
| **ZoomSimulator** | 4인 화상회의 시뮬레이션 | 발화자 표시 |
| **SlackSimulator** | 메신저 알림 시뮬레이션 | 읽기 전용 |
| **BrowserSimulator** | 고객사 자료 열람 | 탭 전환 |

#### E.3.2 Onno HUD 체험 포인트

```
체험 포인트 1: 드래그로 위치 조정
├─ 행동: HUD 헤더를 드래그
├─ 결과: 원하는 위치로 이동
└─ 메시지: "작업 환경에 맞게 배치하세요"

체험 포인트 2: 실시간 인사이트 캡처
├─ 행동: 시나리오 진행 중 자동 표시
├─ 결과: "MAU 10만" 등 핵심 수치 추출
└─ 메시지: "놓친 숫자가 없어요"

체험 포인트 3: 질문 제안 복사
├─ 행동: [복사] 버튼 클릭
├─ 결과: 클립보드에 저장 + 토스트
└─ 메시지: "바로 물어보세요"

체험 포인트 4: 개입 카드 응답
├─ 행동: [쓰겠다] / [나중에] / [무시] 선택
├─ 결과: 카드 닫힘 + 상태 업데이트
└─ 메시지: "AI가 타이밍을 알려드려요"
```

#### E.3.3 데모 시나리오

**시나리오: 시리즈A 투자 미팅 (8분, 10배속 = 48초 체험)**

```
[0:00-0:05] 인사 및 시작
├─ Zoom: 김대표 발화 시작
├─ HUD: 녹음 시작, 타이머 작동
└─ 자막: "안녕하세요, 오늘 구체적인 숫자들을..."

[0:05-0:15] 핵심 지표 언급
├─ 자막: "MAU 10만, 월 성장률 15%"
├─ HUD: 인사이트 자동 캡처 (하이라이트 효과)
└─ 결정 품질: 근거 ✓ 업데이트

[0:15-0:25] 질문 제안
├─ HUD: 💡 "CAC는 채널별로 어떻게 되시나요?"
├─ Slack: 메시지 알림 (멀티태스킹 시뮬레이션)
└─ 사용자: [복사] 클릭 가능

[0:25-0:35] 개입 카드
├─ HUD: ⚠️ 안전 카드 팝업
├─ 내용: "유닛이코노믹스 미확인"
└─ 사용자: 응답 선택

[0:35-0:48] 마무리
├─ HUD: 📋 미팅 요약 카드
├─ 내용: "결정 3개, 액션 5개"
└─ 전환: [회의 종료] → 콘솔 모드
```

### E.4 콘솔 모드 상세 체험

#### E.4.1 Decision OS 콘솔

**6개 모듈 체험:**

| 모듈 | MVP 구현 | 체험 내용 |
|------|----------|----------|
| **📅 오늘** | ✅ 풀 구현 | 오늘 미팅 3개, 처리 항목 5개 표시 |
| **📚 Library** | ✅ 풀 구현 | 과거 결정 검색, 필터, 상세 보기 |
| **📖 Playbook** | ⚠️ 읽기만 | 템플릿 3개 미리보기 |
| **🗂️ Context** | ⚠️ 용어집만 | 투자 용어 10개 검색 |
| **⚙️ Governance** | ❌ 비활성 | "Coming Soon" 표시 |
| **📊 Analytics** | ❌ 비활성 | "Coming Soon" 표시 |

#### E.4.2 콘솔 체험 포인트

```
체험 포인트 1: 오늘 대시보드
├─ 화면: 오늘 할 일 + 미팅 목록
├─ 행동: [HUD 모드로 시작] 클릭
└─ 결과: HUD 모드로 전환

체험 포인트 2: Decision Library
├─ 화면: 과거 결정 목록
├─ 행동: 검색 + 필터
└─ 결과: 결정 상세 보기

체험 포인트 3: 미팅 확정
├─ 화면: 회의 종료 후 확정 화면
├─ 행동: 결정/액션 확인 + 수정
└─ 결과: Notion 동기화 트리거
```

### E.5 모드 전환 UI

#### E.5.1 전환 버튼 디자인

```
┌─────────────────────────────────────┐
│                                     │
│  현재 모드: HUD 모드                 │
│                                     │
│  ┌─────────────────────────────┐   │
│  │  🖥️ HUD    │  📊 콘솔      │   │ ← 세그먼트 버튼
│  │  ████████  │               │   │
│  └─────────────────────────────┘   │
│                                     │
│  💡 팁: 회의 중에는 HUD,            │
│      회의 전후에는 콘솔을 사용하세요  │
│                                     │
└─────────────────────────────────────┘

위치: 화면 좌측 하단 (고정)
크기: 280px × 120px
```

#### E.5.2 전환 애니메이션

**HUD → 콘솔:**
```
1. 가상 데스크톱 줌아웃 (scale: 1 → 0.9)
2. 블러 효과 (blur: 0 → 10px)
3. 페이드아웃 (opacity: 1 → 0)
4. 콘솔 페이드인 (opacity: 0 → 1)
5. 소요 시간: 0.6초
```

**콘솔 → HUD:**
```
1. 콘솔 줌아웃 (scale: 1 → 0.95)
2. 페이드아웃 (opacity: 1 → 0)
3. 가상 데스크톱 페이드인 (opacity: 0 → 1)
4. HUD 슬라이드인 (translateX: 100% → 0)
5. 소요 시간: 0.8초
```

### E.6 데모 페이지 URL 구조

```
/demo                    → 데모 선택 화면
  ├─ "HUD 모드 체험하기"  → /demo/immersive?mode=hud
  ├─ "콘솔 모드 체험하기" → /demo/immersive?mode=console
  └─ "전체 플로우 체험"   → /demo/immersive (자동 시나리오)

/demo/immersive          → 몰입형 데모 메인
  ├─ ?mode=hud           → HUD 모드로 시작
  ├─ ?mode=console       → 콘솔 모드로 시작
  └─ (기본)              → HUD 모드로 시작
```

### E.7 성공 지표

| 지표 | 목표 | 의미 |
|------|------|------|
| **체험 시작률** | > 80% | 랜딩 → 데모 클릭 |
| **체험 완료율** | > 65% | 데모 시작 → 끝까지 |
| **모드 전환률** | > 50% | 최소 1회 전환 |
| **HUD 인터랙션** | > 3회 | 복사/메모/응답 |
| **체류 시간** | > 4분 | 평균 체류 |
| **가입 전환율** | > 45% | 체험 → 가입 |

---

## 부록 F: A/B 테스트 계획

### F.1 시뮬레이션 길이

| 항목 | A안 (Control) | B안 (Variant) | 측정 지표 |
|------|-------------|--------------|----------|
| 시뮬레이션 길이 | 90초 | 180초 | 완료율 |
| 노출 비율 | 80% | 20% | - |
| 예상 결과 | 기준선 | -15% (너무 김) | - |

### F.2 알림 표현

| 항목 | A안 | B안 | 측정 지표 |
|------|-----|-----|----------|
| 제목 | "확인 필요" | "놓치면 안 되는 질문" | 클릭률 |
| 버튼 | "물어보기" | "지금 물어볼게요 →" | 클릭률 |
| 예상 | 기준선 | +25% | - |

### F.3 CTA 버튼 문구

| 항목 | A안 | B안 | 측정 지표 |
|------|-----|-----|----------|
| 문구 | "구글 계정으로 시작하기" | "구글 계정으로 1초 만에 시작하기" | 가입률 |
| 예상 | 40% | 45% (+12.5%) | - |

---

**문서 끝**

**최종 업데이트**: 2025-12-30 (몰입형 프로토타입 설계 추가)

**다음 단계:**
1. 몰입형 프로토타입 구현
2. 사용자 테스트 (5명)
3. MVP 개발 시작
4. 베타 런칭 (30명)
